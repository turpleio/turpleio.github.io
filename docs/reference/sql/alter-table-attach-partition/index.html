<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=3">
<meta httpequiv="x-ua-compatible" content="ie=edge">
<meta property="og:type" content="website">
<meta name="author" content="turpleio">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link href="https://www.googletagmanager.com" rel="dns-prefetch">
<link href="https://www.google-analytics.com" rel="dns-prefetch">
<link rel="icon" href="/favicon.png">
<link rel="apple-touch-icon" href="/img/icons/apple-180x180.png" sizes="180x180">
<meta name="msapplication-config" content="/browserconfig.xml">
<link rel="sitemap" type="application/xml" href="/sitemap.xml">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PVR7M2G"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-PVR7M2G",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Turple: Cloud Native Platform" href="/opensearch.xml">
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#d14671">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#21222c">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Turple: Cloud Native Platform Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Turple: Cloud Native Platform Blog Atom Feed"><title data-react-helmet="true">ALTER TABLE ATTACH PARTITION | Turple: Cloud Native Platform</title><meta data-react-helmet="true" name="twitter:description" content="Turple is a cloud native platform which can help you build and operate your services on cloud."><meta data-react-helmet="true" name="twitter:title" content="Introduction | Turple: Cloud Native Platform"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for &quot;Introduction | Turple: Cloud Native Platform&quot;"><meta data-react-helmet="true" property="og:title" content="ALTER TABLE ATTACH PARTITION | Turple: Cloud Native Platform"><meta data-react-helmet="true" name="description" content="ATTACH PARTITION SQL keyword reference documentation."><meta data-react-helmet="true" property="og:description" content="ATTACH PARTITION SQL keyword reference documentation."><meta data-react-helmet="true" property="og:image" content="https://turpleio.github.io/img/og.png"><meta data-react-helmet="true" name="twitter:image" content="https://turpleio.github.io/img/og.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link rel="stylesheet" href="/assets/css/styles.4f6557e4.css">
</head>
<body itemscope itemtype="http://schema.org/Organization">
<meta itemprop="name" content="Turple: Cloud Native Platform">
<meta itemprop="description" content="Turple is a cloud native platform which can help you build and operate your services on cloud.">
<meta itemprop="url" content="https://turpleio.github.io">
<meta itemprop="logo" content="https://turpleio.github.io/img/favicon.png">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar_wBc8 navbar--light"><div class="navbar__inner inner_Y8Z6"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand brand_AtiA" href="/">QuestDB</a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand brand_AtiA" href="/">QuestDB</a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="wrapper_DIJ0"><div class="doc_D+rh"><div class="doc__sidebar_gVFN" role="complementary"><div class="sidebar_LIo8"><div class="menu menu--responsive thin-scrollbar menu_oAhv"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_nrF-" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" href="/docs/">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Get Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/get-started/docker/">Docker</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/get-started/binaries/">Binaries</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/get-started/homebrew/">Homebrew</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/get-started/first-database/">Create my first dataset</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/get-started/learn-more/">Learn more</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Develop</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/connect/">Connect</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/insert-data/">Insert data</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/query-data/">Query data</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/update-data/">Update data</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/web-console/">Web Console</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/guides/importing-data/">Large CSV import (COPY SQL)</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/guides/importing-data-rest/">Small CSV import (REST API)</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/guides/modifying-data/">Modify data</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/guides/working-with-timestamps-timezones/">Timestamps and time zones</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/guides/out-of-order-commit-lag/">Out-of-order commit lag</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Deployment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/deployment/aws-official-ami/">AWS Marketplace AMI</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/deployment/kubernetes/">Kubernetes</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/deployment/google-cloud-platform/">Google Cloud Platform</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/deployment/digitalocean/">DigitalOcean Droplet</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Operations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/operations/design-for-performance/">Design for performance</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/operations/capacity-planning/">Capacity planning</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/operations/data-retention/">Data retention</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/operations/health-monitoring/">Health monitoring</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/operations/backup/">Backup and restore</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/operations/updating-data/">Updating data</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Third-party Tools</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/third-party-tools/prometheus/">Prometheus</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/third-party-tools/grafana/">Grafana</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="-1">Kafka</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/third-party-tools/kafka/overview/">Overview</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/third-party-tools/kafka/questdb-kafka/">QuestDB Kafka connector</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/third-party-tools/kafka/jdbc/">JDBC connector</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/third-party-tools/telegraf/">Telegraf</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/storage-model/">Storage model</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/designated-timestamp/">Designated timestamp</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/sql-extensions/">SQL extensions</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/jit-compiler/">JIT compiler</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/partitions/">Partitions</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/symbol/">Symbol</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/indexes/">Indexes</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/geohashes/">Geospatial data</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/root-directory-structure/">Root directory</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u menu__link--sublist menu__link--active" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="0">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/rest/">REST</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/postgres/">Postgres</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="-1">InfluxDB Line Protocol</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/ilp/overview/">Overview</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/ilp/columnset-types/">Columnset Value Types</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/ilp/tcp-receiver/">TCP Receiver</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/ilp/udp-receiver/">UDP Receiver</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/ilp/authenticate/">Authenticate</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/java-embedded/">Java (embedded)</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/command-line-options/">Command-line options</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/configuration/">Configuration</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="0">ILP client libraries</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/clients/overview/">Clients overview</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/clients/java_ilp/">Java ILP client</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/datatypes/">Data types</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="0">Functions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/aggregation/">Aggregate</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/analytic/">Analytic</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/binary/">Binary</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/boolean/">Boolean</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/conditional/">Conditional</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/date-time/">Date and time</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/meta/">Meta</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/numeric/">Numeric</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/random-value-generator/">Random value generator</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/row-generator/">Row generator</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/spatial/">Spatial</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/text/">Text</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/timestamp-generator/">Timestamp generator</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/timestamp/">Timestamp</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="0">Operators</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/operators/bitwise/">Bitwise</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/operators/pattern-matching/">Pattern matching</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/operators/spatial/">Spatial</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u menu__link--sublist menu__link--active" href="#!" tabindex="0">SQL</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/concept/sql-execution-order/">SQL execution order</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u menu__link--sublist menu__link--active" href="#!" tabindex="0">ALTER TABLE</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/alter-table-add-column/">ADD COLUMN</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/alter-table-rename-column/">RENAME COLUMN</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/alter-table-drop-column/">DROP COLUMN</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menuLink_Zq3u menu__link--active active" tabindex="0" href="/docs/reference/sql/alter-table-attach-partition/">ATTACH PARTITION</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/alter-table-detach-partition/">DETACH PARTITION</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/alter-table-drop-partition/">DROP PARTITION</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/alter-table-set-param/">SET PARAM</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="0">ALTER COLUMN</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-alter-column-add-index/">ADD INDEX</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-alter-column-drop-index/">DROP INDEX</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-alter-column-cache/">CACHE | NOCACHE</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/backup/">BACKUP</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/case/">CASE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/cast/">CAST</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/copy/">COPY</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/create-table/">CREATE TABLE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/distinct/">DISTINCT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/fill/">FILL</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/drop/">DROP TABLE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/group-by/">GROUP BY</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/insert/">INSERT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/join/">JOIN</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/latest-on/">LATEST ON</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/limit/">LIMIT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/order-by/">ORDER BY</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/reindex/">REINDEX</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/rename/">RENAME TABLE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/sample-by/">SAMPLE BY</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/select/">SELECT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/show/">SHOW</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/snapshot/">SNAPSHOT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/truncate/">TRUNCATE TABLE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/union-except-intersect/">UNION EXCEPT INTERSECT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/update/">UPDATE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/vacuum-table/">VACUUM TABLE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/where/">WHERE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/reference/sql/with/">WITH</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/troubleshooting/faq/">FAQ</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/troubleshooting/os-error-codes/">List of OS error codes</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" href="/blog/tags/tutorial/">Tutorials</a></li></ul></div></div></div><main class="doc__main_VklL"><div class="padding-vert--lg container doc__item-wrapper_FIxd"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">ALTER TABLE ATTACH PARTITION</h1></header><div class="markdown"><p>Restores one or more partitions to the table where they have been detached from
by using the SQL
<a href="/docs/reference/sql/alter-table-detach-partition">ALTER TABLE DETACH PARTITION</a>
statement.</p><p>This feature is part of the manual S3/cold storage solution, allowing restoring
data manually.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="syntax"></a>Syntax<a class="hash-link" href="#syntax" title="Direct link to heading">#</a></h2><p><img alt="Flow chart showing the syntax of ALTER TABLE with ATTACH PARTITION keyword" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iODEiPgogICAgPGRlZnM+CiAgICAgICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KICAgICAgICAgICAgQG5hbWVzcGFjZSAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciOwogICAgICAgICAgICAgICAgLmxpbmUgICAgICAgICAgICAgICAgIHtmaWxsOiBub25lOyBzdHJva2U6ICM2MzYyNzM7fQogICAgICAgICAgICAgICAgLmJvbGQtbGluZSAgICAgICAgICAgIHtzdHJva2U6ICM2MzYyNzM7IHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlczsgc3Ryb2tlLXdpZHRoOiAyOyB9CiAgICAgICAgICAgICAgICAudGhpbi1saW5lICAgICAgICAgICAge3N0cm9rZTogIzYzNjI3Mzsgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcEVkZ2VzfQogICAgICAgICAgICAgICAgLmZpbGxlZCAgICAgICAgICAgICAgIHtmaWxsOiAjNjM2MjczOyBzdHJva2U6IG5vbmU7fQogICAgICAgICAgICAgICAgdGV4dC50ZXJtaW5hbCAgICAgICAgIHtmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBSb2JvdG8sIFVidW50dSwgQ2FudGFyZWxsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgICAgICBmaWxsOiAjZmZmZmZmOwogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0ZXh0Lm5vbnRlcm1pbmFsICAgICAge2ZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICJTZWdvZSBVSSIsIFJvYm90bywgVWJ1bnR1LCBDYW50YXJlbGwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgICAgIGZpbGw6ICNlMjg5YTQ7CiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGV4dC5yZWdleHAgICAgICAgICAgIHtmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBSb2JvdG8sIFVidW50dSwgQ2FudGFyZWxsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgICAgICBmaWxsOiAjMDAxNDFGOwogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlY3QsIGNpcmNsZSwgcG9seWdvbiB7ZmlsbDogbm9uZTsgc3Ryb2tlOiBub25lO30KICAgICAgICAgICAgICAgIHJlY3QudGVybWluYWwgICAgICAgICB7ZmlsbDogbm9uZTsgc3Ryb2tlOiAjYmUyZjViO30KICAgICAgICAgICAgICAgIHJlY3Qubm9udGVybWluYWwgICAgICB7ZmlsbDogcmdiYSgyNTUsMjU1LDI1NSwwLjEpOyBzdHJva2U6IG5vbmU7fQogICAgICAgICAgICAgICAgcmVjdC50ZXh0ICAgICAgICAgICAgIHtmaWxsOiBub25lOyBzdHJva2U6IG5vbmU7fQogICAgICAgICAgICAgICAgcG9seWdvbi5yZWdleHAgICAgICAgIHtmaWxsOiAjQzdFQ0ZGOyBzdHJva2U6ICMwMzhjYmM7fQogICAgICAgIDwvc3R5bGU+CiAgICA8L2RlZnM+CiAgICA8cG9seWdvbiBwb2ludHM9IjkgNjEgMSA1NyAxIDY1Ii8+CiAgICA8cG9seWdvbiBwb2ludHM9IjE3IDYxIDkgNTcgOSA2NSIvPgogICAgPHJlY3QgeD0iMzEiIHk9IjQ3IiB3aWR0aD0iNjIiIGhlaWdodD0iMzIiIHJ4PSIxMCIvPgogICAgPHJlY3QgeD0iMjkiIHk9IjQ1IiB3aWR0aD0iNjIiIGhlaWdodD0iMzIiIGNsYXNzPSJ0ZXJtaW5hbCIgcng9IjEwIi8+CiAgICA8dGV4dCBjbGFzcz0idGVybWluYWwiIHg9IjM5IiB5PSI2NSI+QUxURVI8L3RleHQ+CiAgICA8cmVjdCB4PSIxMTMiIHk9IjQ3IiB3aWR0aD0iNjIiIGhlaWdodD0iMzIiIHJ4PSIxMCIvPgogICAgPHJlY3QgeD0iMTExIiB5PSI0NSIgd2lkdGg9IjYyIiBoZWlnaHQ9IjMyIiBjbGFzcz0idGVybWluYWwiIHJ4PSIxMCIvPgogICAgPHRleHQgY2xhc3M9InRlcm1pbmFsIiB4PSIxMjEiIHk9IjY1Ij5UQUJMRTwvdGV4dD4KICAgIDxhIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bGluazpocmVmPSIjdGFibGVOYW1lIiB4bGluazp0aXRsZT0idGFibGVOYW1lIj4KICAgICAgICA8cmVjdCB4PSIxOTUiIHk9IjQ3IiB3aWR0aD0iODgiIGhlaWdodD0iMzIiLz4KICAgICAgICA8cmVjdCB4PSIxOTMiIHk9IjQ1IiB3aWR0aD0iODgiIGhlaWdodD0iMzIiIGNsYXNzPSJub250ZXJtaW5hbCIvPgogICAgICAgIDx0ZXh0IGNsYXNzPSJub250ZXJtaW5hbCIgeD0iMjAzIiB5PSI2NSI+dGFibGVOYW1lPC90ZXh0PgogICAgPC9hPgogICAgPHJlY3QgeD0iMzAzIiB5PSI0NyIgd2lkdGg9Ijc0IiBoZWlnaHQ9IjMyIiByeD0iMTAiLz4KICAgIDxyZWN0IHg9IjMwMSIgeT0iNDUiIHdpZHRoPSI3NCIgaGVpZ2h0PSIzMiIgY2xhc3M9InRlcm1pbmFsIiByeD0iMTAiLz4KICAgIDx0ZXh0IGNsYXNzPSJ0ZXJtaW5hbCIgeD0iMzExIiB5PSI2NSI+QVRUQUNIPC90ZXh0PgogICAgPHJlY3QgeD0iMzk3IiB5PSI0NyIgd2lkdGg9Ijk4IiBoZWlnaHQ9IjMyIiByeD0iMTAiLz4KICAgIDxyZWN0IHg9IjM5NSIgeT0iNDUiIHdpZHRoPSI5OCIgaGVpZ2h0PSIzMiIgY2xhc3M9InRlcm1pbmFsIiByeD0iMTAiLz4KICAgIDx0ZXh0IGNsYXNzPSJ0ZXJtaW5hbCIgeD0iNDA1IiB5PSI2NSI+UEFSVElUSU9OPC90ZXh0PgogICAgPHJlY3QgeD0iNTE1IiB5PSI0NyIgd2lkdGg9IjUyIiBoZWlnaHQ9IjMyIiByeD0iMTAiLz4KICAgIDxyZWN0IHg9IjUxMyIgeT0iNDUiIHdpZHRoPSI1MiIgaGVpZ2h0PSIzMiIgY2xhc3M9InRlcm1pbmFsIiByeD0iMTAiLz4KICAgIDx0ZXh0IGNsYXNzPSJ0ZXJtaW5hbCIgeD0iNTIzIiB5PSI2NSI+TElTVDwvdGV4dD4KICAgIDxhIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bGluazpocmVmPSIjcGFydGl0aW9uTmFtZSIgeGxpbms6dGl0bGU9InBhcnRpdGlvbk5hbWUiPgogICAgICAgIDxyZWN0IHg9IjYwNyIgeT0iNDciIHdpZHRoPSIxMTAiIGhlaWdodD0iMzIiLz4KICAgICAgICA8cmVjdCB4PSI2MDUiIHk9IjQ1IiB3aWR0aD0iMTEwIiBoZWlnaHQ9IjMyIiBjbGFzcz0ibm9udGVybWluYWwiLz4KICAgICAgICA8dGV4dCBjbGFzcz0ibm9udGVybWluYWwiIHg9IjYxNSIgeT0iNjUiPnBhcnRpdGlvbk5hbWU8L3RleHQ+CiAgICA8L2E+CiAgICA8cmVjdCB4PSI2MDciIHk9IjMiIHdpZHRoPSIyNCIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSI2MDUiIHk9IjEiIHdpZHRoPSIyNCIgaGVpZ2h0PSIzMiIgY2xhc3M9InRlcm1pbmFsIiByeD0iMTAiLz4KICAgIDx0ZXh0IGNsYXNzPSJ0ZXJtaW5hbCIgeD0iNjE1IiB5PSIyMSI+LDwvdGV4dD4KICAgIDxzdmc6cGF0aCB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0ibGluZSIKICAgICAgICAgIGQ9Im0xNyA2MSBoMiBtMCAwIGgxMCBtNjIgMCBoMTAgbTAgMCBoMTAgbTYyIDAgaDEwIG0wIDAgaDEwIG04OCAwIGgxMCBtMCAwIGgxMCBtNzQgMCBoMTAgbTAgMCBoMTAgbTk4IDAgaDEwIG0wIDAgaDEwIG01MiAwIGgxMCBtMjAgMCBoMTAgbTExMCAwIGgxMCBtLTE1MCAwIGwyMCAwIG0tMSAwIHEtOSAwIC05IC0xMCBsMCAtMjQgcTAgLTEwIDEwIC0xMCBtMTMwIDQ0IGwyMCAwIG0tMjAgMCBxMTAgMCAxMCAtMTAgbDAgLTI0IHEwIC0xMCAtMTAgLTEwIG0tMTMwIDAgaDEwIG0yNCAwIGgxMCBtMCAwIGg4NiBtMjMgNDQgaC0zIi8+CiAgICA8cG9seWdvbiBwb2ludHM9Ijc1NSA2MSA3NjMgNTcgNzYzIDY1Ii8+CiAgICA8cG9seWdvbiBwb2ludHM9Ijc1NSA2MSA3NDcgNTcgNzQ3IDY1Ii8+Cjwvc3ZnPgo="></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="description"></a>Description<a class="hash-link" href="#description" title="Direct link to heading">#</a></h2><p>Before executing <code>ATTACH PARTITION</code>, the partition folders to be attached must
be made available to QuestDB using one of the following methods:</p><ul><li>Copying the partition folders manually</li><li>Using a <a href="https://en.wikipedia.org/wiki/Symbolic_link" target="_blank" rel="noopener noreferrer">symbolic link</a></li></ul><p>This section describes the details of each method.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="manual-copy"></a>Manual copy<a class="hash-link" href="#manual-copy" title="Direct link to heading">#</a></h3><p>Partition folders can be manually moved from where they are stored into the table folder in
<code>db</code>. To make the partitions available for the attach operation, the files
need to be renamed <code>&lt;partition_name&gt;.attachable</code>.</p><p>For example, in a table partitioned by year, given a partition folder named
<code>2020.detached</code>, rename it as <code>2020.attachable</code>, and move it to the table folder.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="symbolic-links"></a>Symbolic links<a class="hash-link" href="#symbolic-links" title="Direct link to heading">#</a></h3><p><a href="https://en.wikipedia.org/wiki/Symbolic_link" target="_blank" rel="noopener noreferrer">Symbolic links</a> can be used to attach partition folders that
exist potentially in a different volume as cold storage. To make detached partition folders in cold storage
available for attaching, for each partition folder, create a symbolic link with the name
format<code>&lt;partition_name&gt;.attachable</code> from the table&#x27;s folder, and set the target path to the detached partition folder.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><ul><li><p>SQL statements that hit partitions attached via symbolic links may have slower runtimes
if their volumes have a slower disk.</p></li><li><p>In Windows, symbolic links require admin privileges, and thus this method is not recommended.</p></li></ul></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="properties-using-symbolic-links"></a>Properties using symbolic links<a class="hash-link" href="#properties-using-symbolic-links" title="Direct link to heading">#</a></h4><p>Partitions attached via the symbolic link approach are considered <strong>read-only</strong>
by these operations:</p><ul><li><em>DROP/DETACH PARTITION</em>: Once the partition folders are unlinked, the symbolic links are removed, but not the content
remains. Detaching a partition that was attached via symbolic link does not create a copy <code>&lt;partition_name&gt;.detached</code>;
in this case, the <code>DETACH PARTITION</code> operation is equal to <code>DROP PARTITION</code>.</li></ul><p>Partitions attached via symbolic links are <strong>read-write</strong> for these operations:</p><ul><li><em>INSERT</em>, <em>UPDATE</em>, <em>ADD/DROP INDEX</em>, <em>ADD/DROP/RENAME COLUMN</em>: Data in the partition folders
are modified in place as a result of the operation.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="example"></a>Example<a class="hash-link" href="#example" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="manual-copy-1"></a>Manual copy<a class="hash-link" href="#manual-copy-1" title="Direct link to heading">#</a></h3><p>Assuming the QuestDB data directory is <code>/var/lib/questdb/db</code>, for a table <code>x</code>
with AWS S3 for cold storage:</p><ol><li><p>Copy files from S3:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><div tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token builtin class-name" style="color:#bd93f9">cd</span><span class="token plain"> /var/lib/questdb/db/x</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4"># Table x is the original table where the partition were detached from.</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#8be9fd">mkdir</span><span class="token plain"> </span><span class="token number" style="color:#50fa7b">2019</span><span class="token plain">-02-01.attachable </span><span class="token operator" style="color:#ff79c6">&amp;&amp;</span><span class="token plain"> aws s3 </span><span class="token function" style="color:#8be9fd">cp</span><span class="token plain"> s3://questdb-internal/blobs/20190201.tar.gz - </span><span class="token operator" style="color:#ff79c6">|</span><span class="token plain"> </span><span class="token function" style="color:#8be9fd">tar</span><span class="token plain"> xvfz - -C </span><span class="token number" style="color:#50fa7b">2019</span><span class="token plain">-02-01.attachable --strip-components </span><span class="token number" style="color:#50fa7b">1</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#8be9fd">mkdir</span><span class="token plain"> </span><span class="token number" style="color:#50fa7b">2019</span><span class="token plain">-02-02.attachable </span><span class="token operator" style="color:#ff79c6">&amp;&amp;</span><span class="token plain"> aws s3 </span><span class="token function" style="color:#8be9fd">cp</span><span class="token plain"> s3://questdb-internal/blobs/20190202.tar.gz - </span><span class="token operator" style="color:#ff79c6">|</span><span class="token plain"> </span><span class="token function" style="color:#8be9fd">tar</span><span class="token plain"> xvfz - -C </span><span class="token number" style="color:#50fa7b">2019</span><span class="token plain">-02-01.attachable --strip-components </span><span class="token number" style="color:#50fa7b">1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></li><li><p>Execute the SQL <code>ALTER TABLE ATTACH PARTITION</code> command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">ALTER TABLE x ATTACH PARTITION LIST &#x27;2019-02-01&#x27;, &#x27;2019-02-02&#x27;;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></li><li><p>After the SQL is executed, the partitions will be available to read.</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="symbolic-link"></a>Symbolic link<a class="hash-link" href="#symbolic-link" title="Direct link to heading">#</a></h3><p>The following example creates a table <code>tab</code> with some data, detaches all but the last partition, and demonstrates how to
attach the partitions using symbolic links.</p><p>These SQL statements create table <code>tab</code> partitioned by year, and insert seven rows that result in a total of
seven partitions:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sql"><div tabindex="0" class="prism-code language-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#ff79c6">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">TABLE</span><span class="token plain"> tab </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">name STRING</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> age </span><span class="token keyword" style="color:#ff79c6">INT</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> dob </span><span class="token keyword" style="color:#ff79c6">TIMESTAMP</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">TIMESTAMP</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">dob</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">YEAR</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">INTO</span><span class="token plain"> tab </span><span class="token keyword" style="color:#ff79c6">VALUES</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#f1fa8c">&#x27;B&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#50fa7b">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2022-11-08T12:00:00.000000Z&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">INTO</span><span class="token plain"> tab </span><span class="token keyword" style="color:#ff79c6">VALUES</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#f1fa8c">&#x27;C&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#50fa7b">2</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2023-11-08T12:00:00.000000Z&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">INTO</span><span class="token plain"> tab </span><span class="token keyword" style="color:#ff79c6">VALUES</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#f1fa8c">&#x27;D&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#50fa7b">3</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2024-11-08T12:00:00.000000Z&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">INTO</span><span class="token plain"> tab </span><span class="token keyword" style="color:#ff79c6">VALUES</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#f1fa8c">&#x27;E&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#50fa7b">4</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2025-11-08T12:00:00.000000Z&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">INTO</span><span class="token plain"> tab </span><span class="token keyword" style="color:#ff79c6">VALUES</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#f1fa8c">&#x27;F&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#50fa7b">5</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2026-11-08T12:00:00.000000Z&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">INTO</span><span class="token plain"> tab </span><span class="token keyword" style="color:#ff79c6">VALUES</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#f1fa8c">&#x27;A&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#50fa7b">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2027-11-08T12:00:00.000000Z&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">INTO</span><span class="token plain"> tab </span><span class="token keyword" style="color:#ff79c6">VALUES</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#f1fa8c">&#x27;0&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#50fa7b">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2028-11-08T12:00:00.000000Z&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>This SQL statement detaches partitions 2022, 2023, 2024, 2025, 2026, and 2027:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sql"><div tabindex="0" class="prism-code language-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#ff79c6">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">TABLE</span><span class="token plain"> tab DETACH </span><span class="token keyword" style="color:#ff79c6">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">WHERE</span><span class="token plain"> dob </span><span class="token operator" style="color:#ff79c6">&lt;</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2028&#x27;</span><span class="token punctuation" style="color:#f8f8f2">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Assuming QuestDB&#x27;s root directory to be <code>/opt/homebrew/var/questdb/db</code>, the content of the table folder is:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token number" style="color:#50fa7b">2022</span><span class="token plain">.detached</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#50fa7b">2023</span><span class="token plain">.detached</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#50fa7b">2024</span><span class="token plain">.detached</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#50fa7b">2025</span><span class="token plain">.detached</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#50fa7b">2026</span><span class="token plain">.detached</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#50fa7b">2027</span><span class="token plain">.detached</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#50fa7b">2028.5</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">_cv</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">_meta</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">_todo_</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">_txn</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">_txn_scoreboard</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#8be9fd">seq</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>You can now move those <code>&lt;partition_name.detached&gt;</code> folders to a different path, potentially a different volume:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">mv</span><span class="token plain"> /opt/homebrew/var/questdb/db/tab/*.detached /cold_storage/tab</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>When you want to attach these partitions back, create a symlink for every partition to be attached
from the table folder <code>/opt/homebrew/var/questdb/db/tab</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">ln</span><span class="token plain"> -s /cold_storage/tab/2022.detached </span><span class="token number" style="color:#50fa7b">2022</span><span class="token plain">.attachable</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#8be9fd">ln</span><span class="token plain"> -s /cold_storage/tab/2023.detached </span><span class="token number" style="color:#50fa7b">2023</span><span class="token plain">.attachable</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#8be9fd">ln</span><span class="token plain"> -s /cold_storage/tab/2024.detached </span><span class="token number" style="color:#50fa7b">2024</span><span class="token plain">.attachable</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#8be9fd">ln</span><span class="token plain"> -s /cold_storage/tab/2025.detached </span><span class="token number" style="color:#50fa7b">2025</span><span class="token plain">.attachable</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#8be9fd">ln</span><span class="token plain"> -s /cold_storage/tab/2026.detached </span><span class="token number" style="color:#50fa7b">2026</span><span class="token plain">.attachable</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#8be9fd">ln</span><span class="token plain"> -s /cold_storage/tab/2027.detached </span><span class="token number" style="color:#50fa7b">2027</span><span class="token plain">.attachable</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>The content of the table folder should look like this now:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token number" style="color:#50fa7b">2022</span><span class="token plain">.attachable -</span><span class="token operator" style="color:#ff79c6">&gt;</span><span class="token plain"> /cold_storage/tab/2022.detached</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#50fa7b">2023</span><span class="token plain">.attachable -</span><span class="token operator" style="color:#ff79c6">&gt;</span><span class="token plain"> /cold_storage/tab/2023.detached</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#50fa7b">2024</span><span class="token plain">.attachable -</span><span class="token operator" style="color:#ff79c6">&gt;</span><span class="token plain"> /cold_storage/tab/2024.detached</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#50fa7b">2025</span><span class="token plain">.attachable -</span><span class="token operator" style="color:#ff79c6">&gt;</span><span class="token plain"> /cold_storage/tab/2025.detached</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#50fa7b">2026</span><span class="token plain">.attachable -</span><span class="token operator" style="color:#ff79c6">&gt;</span><span class="token plain"> /cold_storage/tab/2026.detached</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#50fa7b">2027</span><span class="token plain">.attachable -</span><span class="token operator" style="color:#ff79c6">&gt;</span><span class="token plain"> /cold_storage/tab/2027.detached</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#50fa7b">2028.5</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">_cv</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">_meta</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">_todo_</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">_txn</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">_txn_scoreboard</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#8be9fd">seq</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>After the symbolic links have been created, the partitions can be attached with the following SQL statement:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sql"><div tabindex="0" class="prism-code language-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#ff79c6">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">TABLE</span><span class="token plain"> tab ATTACH </span><span class="token keyword" style="color:#ff79c6">PARTITION</span><span class="token plain"> LIST </span><span class="token string" style="color:#f1fa8c">&#x27;2022&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2023&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2024&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2025&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2026&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&#x27;2027&#x27;</span><span class="token punctuation" style="color:#f8f8f2">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><ul><li>The SQL reference to the partitions does not include the suffix <code>.attachable</code>.</li><li>The <code>WHERE</code> clause is not supported when attaching partitions.</li><li>The latest partition cannot be detached. However, it can be irreversibly deleted using <a href="/docs/reference/sql/drop/">DROP TABLE</a>.</li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="limitation"></a>Limitation<a class="hash-link" href="#limitation" title="Direct link to heading">#</a></h2><ul><li>S3/Cold storage interaction is manual. Partitions can only be attached to the
same table they were detached from. The table name must be the same. Moving
partitions between tables or database instances is not supported.</li><li>The operation will fail if a partition already exists. We are working on
functionality to allow merging data in the same partition for attaching.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/turpleio/homepage/edit/main/docs/reference/sql/alter-table-attach-partition.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/reference/sql/alter-table-drop-column"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label"> ALTER TABLE DROP COLUMN</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/reference/sql/alter-table-detach-partition"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ALTER TABLE DETACH PARTITION </div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#syntax" class="table-of-contents__link">Syntax</a></li><li><a href="#description" class="table-of-contents__link">Description</a><ul><li><a href="#manual-copy" class="table-of-contents__link">Manual copy</a></li><li><a href="#symbolic-links" class="table-of-contents__link">Symbolic links</a></li></ul></li><li><a href="#example" class="table-of-contents__link">Example</a><ul><li><a href="#manual-copy-1" class="table-of-contents__link">Manual copy</a></li><li><a href="#symbolic-link" class="table-of-contents__link">Symbolic link</a></li></ul></li><li><a href="#limitation" class="table-of-contents__link">Limitation</a></li></ul></div></div></div></div></main></div></div><footer class="root_JnvJ"><div class="content_-gfC center_S24y"><img alt="QuestDB logo" class="logo_JrwJ" src="/img/navbar/tp_brand.png" width="108" height="27"><div class="tagline_T1tH"><p>      </p></div><div class="links_1SgP"></div></div><div class="border_PW0V"><div class="bottom_wPs3 center_S24y">Copyright  2023 Gitple. All rights are reserved.</div></div></footer></div>
<script src="/assets/js/main.a0cde2ea.js" defer="defer"></script>
<script src="/gitplechat.js"></script>
</body>
</html>