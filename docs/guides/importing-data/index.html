<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=3">
<meta httpequiv="x-ua-compatible" content="ie=edge">
<meta property="og:type" content="website">
<meta name="author" content="turpleio">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link href="https://www.googletagmanager.com" rel="dns-prefetch">
<link href="https://www.google-analytics.com" rel="dns-prefetch">
<link rel="icon" href="/favicon.png">
<link rel="apple-touch-icon" href="/img/icons/apple-180x180.png" sizes="180x180">
<meta name="msapplication-config" content="/browserconfig.xml">
<link rel="sitemap" type="application/xml" href="/sitemap.xml">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PVR7M2G"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-PVR7M2G",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Turple: Cloud Native Platform" href="/opensearch.xml">
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#d14671">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#21222c">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Turple: Cloud Native Platform Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Turple: Cloud Native Platform Blog Atom Feed"><title data-react-helmet="true">CSV import via COPY SQL | Turple: Cloud Native Platform</title><meta data-react-helmet="true" name="twitter:description" content="Turple is a cloud native platform which can help you build and operate your services on cloud."><meta data-react-helmet="true" name="twitter:title" content="Introduction | Turple: Cloud Native Platform"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for &quot;Introduction | Turple: Cloud Native Platform&quot;"><meta data-react-helmet="true" property="og:title" content="CSV import via COPY SQL | Turple: Cloud Native Platform"><meta data-react-helmet="true" name="description" content="This document describes how to load large CSV data using COPY SQL keyword."><meta data-react-helmet="true" property="og:description" content="This document describes how to load large CSV data using COPY SQL keyword."><meta data-react-helmet="true" property="og:image" content="https://turpleio.github.io/img/og.png"><meta data-react-helmet="true" name="twitter:image" content="https://turpleio.github.io/img/og.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link rel="stylesheet" href="/assets/css/styles.4f6557e4.css">
</head>
<body itemscope itemtype="http://schema.org/Organization">
<meta itemprop="name" content="Turple: Cloud Native Platform">
<meta itemprop="description" content="Turple is a cloud native platform which can help you build and operate your services on cloud.">
<meta itemprop="url" content="https://turpleio.github.io">
<meta itemprop="logo" content="https://turpleio.github.io/img/favicon.png">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar_wBc8 navbar--light"><div class="navbar__inner inner_Y8Z6"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand brand_AtiA" href="/">QuestDB</a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand brand_AtiA" href="/">QuestDB</a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="wrapper_DIJ0"><div class="doc_D+rh"><div class="doc__sidebar_gVFN" role="complementary"><div class="sidebar_LIo8"><div class="menu menu--responsive thin-scrollbar menu_oAhv"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_nrF-" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" href="/docs/">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Get Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/get-started/docker/">Docker</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/get-started/binaries/">Binaries</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/get-started/homebrew/">Homebrew</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/get-started/first-database/">Create my first dataset</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/get-started/learn-more/">Learn more</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Develop</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/connect/">Connect</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/insert-data/">Insert data</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/query-data/">Query data</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/update-data/">Update data</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/web-console/">Web Console</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menuLink_Zq3u menu__link--active active" tabindex="0" href="/docs/guides/importing-data/">Large CSV import (COPY SQL)</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/guides/importing-data-rest/">Small CSV import (REST API)</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/guides/modifying-data/">Modify data</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/guides/working-with-timestamps-timezones/">Timestamps and time zones</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/guides/out-of-order-commit-lag/">Out-of-order commit lag</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Deployment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/deployment/aws-official-ami/">AWS Marketplace AMI</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/deployment/kubernetes/">Kubernetes</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/deployment/google-cloud-platform/">Google Cloud Platform</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/deployment/digitalocean/">DigitalOcean Droplet</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Operations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/operations/design-for-performance/">Design for performance</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/operations/capacity-planning/">Capacity planning</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/operations/data-retention/">Data retention</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/operations/health-monitoring/">Health monitoring</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/operations/backup/">Backup and restore</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/operations/updating-data/">Updating data</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Third-party Tools</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/third-party-tools/prometheus/">Prometheus</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/third-party-tools/grafana/">Grafana</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="-1">Kafka</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/third-party-tools/kafka/overview/">Overview</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/third-party-tools/kafka/questdb-kafka/">QuestDB Kafka connector</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/third-party-tools/kafka/jdbc/">JDBC connector</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/third-party-tools/telegraf/">Telegraf</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/storage-model/">Storage model</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/designated-timestamp/">Designated timestamp</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/sql-extensions/">SQL extensions</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/jit-compiler/">JIT compiler</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/partitions/">Partitions</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/symbol/">Symbol</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/indexes/">Indexes</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/geohashes/">Geospatial data</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/root-directory-structure/">Root directory</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="-1">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/rest/">REST</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/postgres/">Postgres</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="-1">InfluxDB Line Protocol</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/ilp/overview/">Overview</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/ilp/columnset-types/">Columnset Value Types</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/ilp/tcp-receiver/">TCP Receiver</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/ilp/udp-receiver/">UDP Receiver</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/ilp/authenticate/">Authenticate</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/api/java-embedded/">Java (embedded)</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/command-line-options/">Command-line options</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/configuration/">Configuration</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="-1">ILP client libraries</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/clients/overview/">Clients overview</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/clients/java_ilp/">Java ILP client</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/datatypes/">Data types</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="-1">Functions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/aggregation/">Aggregate</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/analytic/">Analytic</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/binary/">Binary</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/boolean/">Boolean</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/conditional/">Conditional</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/date-time/">Date and time</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/meta/">Meta</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/numeric/">Numeric</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/random-value-generator/">Random value generator</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/row-generator/">Row generator</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/spatial/">Spatial</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/text/">Text</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/timestamp-generator/">Timestamp generator</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/function/timestamp/">Timestamp</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="-1">Operators</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/operators/bitwise/">Bitwise</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/operators/pattern-matching/">Pattern matching</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/operators/spatial/">Spatial</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="-1">SQL</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/concept/sql-execution-order/">SQL execution order</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="-1">ALTER TABLE</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-add-column/">ADD COLUMN</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-rename-column/">RENAME COLUMN</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-drop-column/">DROP COLUMN</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-attach-partition/">ATTACH PARTITION</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-detach-partition/">DETACH PARTITION</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-drop-partition/">DROP PARTITION</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-set-param/">SET PARAM</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!" tabindex="-1">ALTER COLUMN</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-alter-column-add-index/">ADD INDEX</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-alter-column-drop-index/">DROP INDEX</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/alter-table-alter-column-cache/">CACHE | NOCACHE</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/backup/">BACKUP</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/case/">CASE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/cast/">CAST</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/copy/">COPY</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/create-table/">CREATE TABLE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/distinct/">DISTINCT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/fill/">FILL</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/drop/">DROP TABLE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/group-by/">GROUP BY</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/insert/">INSERT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/join/">JOIN</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/latest-on/">LATEST ON</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/limit/">LIMIT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/order-by/">ORDER BY</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/reindex/">REINDEX</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/rename/">RENAME TABLE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/sample-by/">SAMPLE BY</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/select/">SELECT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/show/">SHOW</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/snapshot/">SNAPSHOT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/truncate/">TRUNCATE TABLE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/union-except-intersect/">UNION EXCEPT INTERSECT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/update/">UPDATE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/vacuum-table/">VACUUM TABLE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/where/">WHERE</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/reference/sql/with/">WITH</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/troubleshooting/faq/">FAQ</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/troubleshooting/os-error-codes/">List of OS error codes</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" href="/blog/tags/tutorial/">Tutorials</a></li></ul></div></div></div><main class="doc__main_VklL"><div class="padding-vert--lg container doc__item-wrapper_FIxd"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">CSV import via COPY SQL</h1></header><div class="markdown"><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>For partitioned tables, the best <code>COPY</code> performance can be achieved only on a
machine with a local, physically attached SSD. It is possible to use a network
block storage, such as an AWS EBS volume to perform the operation, with the
following impacts:</p><ul><li>Users need to configure the maximum IOPS and throughput setting values for the
volume.</li><li>The required import time is likely to be 5-10x longer.</li></ul></div></div><p>The <a href="/docs/reference/sql/copy/">COPY</a> SQL command is the preferred way to import
large CSV files into partitioned tables. It should be used to migrate data from
another database into QuestDB. This guide describes the method of migrating data
to QuestDB via CSV files. For the time being this is the only way to migrate
data from other databases into QuestDB.</p><p>This guide is applicable for QuestDB version 6.5 and higher.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="prepare-the-import"></a>Prepare the import<a class="hash-link" href="#prepare-the-import" title="Direct link to heading">#</a></h2><p>Preparation is key. Import is a multi-step process, which consists of:</p><ul><li>Export the existing database as CSV files</li><li>Enable and configure <code>COPY</code> command to be optimal for the system</li><li>Prepare target schema in QuestDB</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="export-the-existing-database"></a>Export the existing database<a class="hash-link" href="#export-the-existing-database" title="Direct link to heading">#</a></h3><p>Export data using one CSV file per table. Make sure to export a column, which
can be used as timestamp. Data in CSV is not expected to be in any particular
order. If it is not possible to export the table as one CSV, export multiple
files and concatenate these files before importing into QuestDB.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="concatenate-multiple-csv-files"></a>Concatenate multiple CSV files<a class="hash-link" href="#concatenate-multiple-csv-files" title="Direct link to heading">#</a></h4><p>The way to concatenate files depends on whether the CSV files have headers.</p><p>For CSV files without headers, concatenation is straightforward:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_vU9c tabs__item--active">Linux</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_vU9c">macOS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_vU9c">Windows PowerShell</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">ls</span><span class="token plain"> *.csv </span><span class="token operator" style="color:#ff79c6">|</span><span class="token plain"> </span><span class="token function" style="color:#8be9fd">xargs</span><span class="token plain"> </span><span class="token function" style="color:#8be9fd">cat</span><span class="token plain"> </span><span class="token operator" style="color:#ff79c6">&gt;</span><span class="token plain"> singleFile.csv</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">ls</span><span class="token plain"> *.csv </span><span class="token operator" style="color:#ff79c6">|</span><span class="token plain"> </span><span class="token function" style="color:#8be9fd">xargs</span><span class="token plain"> </span><span class="token function" style="color:#8be9fd">cat</span><span class="token plain"> </span><span class="token operator" style="color:#ff79c6">&gt;</span><span class="token plain"> singleFile.csv</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#ff79c6">$TextFiles</span><span class="token plain"> </span><span class="token operator" style="color:#ff79c6">=</span><span class="token plain"> Get-Item C:</span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain">Users</span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain">path</span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain">to</span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain">csv</span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain">*.csv</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4"># The files are moved to the same folder.</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#ff79c6">$TextFiles</span><span class="token plain"> foreach </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> Add-Content -Value </span><span class="token variable" style="color:#ff79c6">$(</span><span class="token variable" style="color:#ff79c6">Get-Content $_</span><span class="token variable" style="color:#ff79c6">)</span><span class="token plain"> -Path C:</span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain">Users</span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain">path</span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain">to</span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain">csv</span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain">singleFile.csv</span><span class="token punctuation" style="color:#f8f8f2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></div></div></div><p>For CSV files with headers, concatenation can be tricky. You could manually
remove the first line of the files before concatenating, or use some smart
command line to concatenate and remove the headers. A good alternative is using
the open source tool
<a href="https://csvkit.readthedocs.io/en/latest/scripts/csvstack.html" target="_blank" rel="noopener noreferrer">csvstack</a>.</p><p>This is how you can concatenate multiple CSV files using <em>csvstack</em>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">csvstack *.csv </span><span class="token operator" style="color:#ff79c6">&gt;</span><span class="token plain"> singleFile.csv</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="things-to-know-about-copy"></a>Things to know about <code>COPY</code><a class="hash-link" href="#things-to-know-about-copy" title="Direct link to heading">#</a></h3><ul><li><p><code>COPY</code> is disabled by default, as a security precaution. Configuration is
required.</p></li><li><p><code>COPY</code> is more efficient when source and target disks are different.</p></li><li><p><code>COPY</code> is parallel when target table is partitioned.</p></li><li><p><code>COPY</code> is <em>serial</em> when target table is non-partitioned, out-of-order
timestamps will be rejected.</p></li><li><p><code>COPY</code> cannot import data into non-empty table.</p></li><li><p><code>COPY</code> indexes CSV file; reading indexed CSV file benefits hugely from disk
IOPS. We recommend using NVME.</p></li><li><p><code>COPY</code> imports one file at a time; there is no internal queuing system yet.</p></li><li><p><a href="/docs/reference/sql/copy/">COPY reference</a></p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="configure-copy"></a>Configure <code>COPY</code><a class="hash-link" href="#configure-copy" title="Direct link to heading">#</a></h3><ul><li>Enable <code>COPY</code> and <a href="/docs/reference/configuration#csv-import">configure</a> <code>COPY</code>
directories to suit your server.</li><li><code>cairo.sql.copy.root</code> must be set for <code>COPY</code> to work.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="create-the-target-table-schema"></a>Create the target table schema<a class="hash-link" href="#create-the-target-table-schema" title="Direct link to heading">#</a></h2><p>If you know the target table schema already, you can
<a href="/docs/guides/importing-data#import-csv">skip this section</a>.</p><p>QuestDB could analyze the input file and &quot;guess&quot; the schema. This logic is
activated when target table does not exist.</p><p>To have QuestDB help with determining file schema, it is best to work with a
sub-set of CSV. A smaller file allows us to iterate faster if iteration is
required.</p><p>Let&#x27;s assume we have the following CSV:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI csv"><div tabindex="0" class="prism-code language-csv codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">&quot;locationId&quot;,&quot;timestamp&quot;,&quot;windDir&quot;,&quot;windSpeed&quot;,&quot;windGust&quot;,&quot;cloudCeiling&quot;,&quot;skyCover&quot;,&quot;visMiles&quot;,&quot;tempF&quot;,&quot;dewpF&quot;,&quot;rain1H&quot;,&quot;rain6H&quot;,&quot;rain24H&quot;,&quot;snowDepth&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">1,&quot;2010-07-05T00:23:58.981263Z&quot;,3050,442,512,,&quot;OBS&quot;,11.774906006761,-5,-31,58.228032196984,70.471606345673,77.938252342637,58</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">2,&quot;2017-10-10T10:13:55.246046Z&quot;,900,63,428,5487,&quot;BKN&quot;,4.958601701089,-19,-7,4.328016420894,36.020659549374,97.821114441800,41</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">3,&quot;2010-03-12T11:17:13.727137Z&quot;,2880,299,889,371,&quot;BKN&quot;,10.342717709226,46,81,9.149518425127,20.229637391479,20.074738007931,80</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">4,&quot;2018-08-21T15:42:23.107543Z&quot;,930,457,695,4540,&quot;OBS&quot;,13.359184086767,90,-47,33.346163208862,37.501996055160,58.316836760009,13</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><ol><li>Extract the first 1000 line to <code>test_file.csv</code> (assuming both files are in
the <code>cairo.sql.copy.root</code> directory):</li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">head</span><span class="token plain"> -1000 weather.csv </span><span class="token operator" style="color:#ff79c6">&gt;</span><span class="token plain"> test_file.csv</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><ol start="2"><li><p>Use a simple <code>COPY</code> command to import <code>test_file.csv</code> and define the table
name:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">COPY weather from &#x27;test_file.csv&#x27; WITH HEADER true;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></li></ol><p>Table <code>weather</code> is created and it quickly returns an id of asynchronous import
process running in the background:</p><table><thead><tr><th>id</th></tr></thead><tbody><tr><td>5179978a6d7a1772</td></tr></tbody></table><ol start="3"><li><p>In the Web Console right click table and select <code>Copy Schema to Clipboard</code> -
this copies the schema generated by the input file analysis.</p></li><li><p>Paste the table schema to the code editor:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">CREATE TABLE &#x27;weather&#x27; (</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  timestamp TIMESTAMP,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  windDir INT,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  windSpeed INT,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  windGust INT,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  cloudCeiling INT,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  skyCover STRING,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  visMiles DOUBLE,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  tempF INT,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  dewpF INT,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  rain1H DOUBLE,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  rain6H DOUBLE,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  rain24H DOUBLE,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  snowDepth INT</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></li><li><p>Identify the correct schema:</p><p>5.1. The generated schema may not be completely correct. Check the log table
and log file to resolve common errors using the id (see also
<a href="/docs/guides/importing-data#track-import-progress">Track import progress</a>
and <a href="/docs/guides/importing-data#faq">FAQ</a>):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">SELECT * FROM sys.text_import_log WHERE id = &#x27;5179978a6d7a1772&#x27; ORDER BY ts DESC;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></li></ol><table><thead><tr><th>ts</th><th>id</th><th>table</th><th>file</th><th>phase</th><th>status</th><th>message</th><th>rows_handled</th><th>rows_imported</th><th>errors</th></tr></thead><tbody><tr><td>2022-08-08T16:38:06.262706Z</td><td>5179978a6d7a1772</td><td>weather</td><td>test_file.csvtest_file.csv</td><td></td><td>finished</td><td></td><td>999</td><td>999</td><td>0</td></tr><tr><td>2022-08-08T16:38:06.226162Z</td><td>5179978a6d7a1772</td><td>weather</td><td>test_file.csvtest_file.csv</td><td></td><td>started</td><td></td><td></td><td></td><td>0</td></tr></tbody></table><p>Check <code>rows_handled</code>, <code>rows_imported</code>, and <code>message</code> for any errors and amend
the schema as required.</p><p>5.2. Drop the table and re-import <code>test_file.csv</code> using the updated schema.</p><ol start="6"><li><p>Repeat the steps to narrow down to a correct schema.</p><p>The process may require either truncating:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">TRUNCATE TABLE table_name;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>or dropping the target table:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">DROP TABLE table_name;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></li><li><p>Clean up: Once all the errors are resolved, copy the final schema, drop the
small table.</p></li><li><p>Make sure table is correctly partitioned. The final schema in our example
should look like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">CREATE TABLE &#x27;weather&#x27; (</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  timestamp TIMESTAMP,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  windDir INT,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  windSpeed INT,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  windGust INT,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  cloudCeiling INT,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  skyCover STRING,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  visMiles DOUBLE,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  tempF INT,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  dewpF INT,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  rain1H DOUBLE,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  rain6H DOUBLE,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  rain24H DOUBLE,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  snowDepth INT</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">) TIMESTAMP (timestamp) partitioned by DAY;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></li><li><p>Ready for import: Create an empty table using the final schema.</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="import-csv"></a>Import CSV<a class="hash-link" href="#import-csv" title="Direct link to heading">#</a></h2><p>Once an empty table is created in QuestDB using the correct schema, import can
be initiated with:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">COPY weather FROM &#x27;weather.csv&#x27; WITH HEADER true TIMESTAMP &#x27;timestamp&#x27; FORMAT &#x27;yyyy-MM-ddTHH:mm:ss.SSSUUUZ&#x27;;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>It quickly returns id of asynchronous import process running in the background:</p><table><thead><tr><th align="left">id</th></tr></thead><tbody><tr><td align="left">55020329020b446a</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="track-import-progress"></a>Track import progress<a class="hash-link" href="#track-import-progress" title="Direct link to heading">#</a></h2><p><code>COPY</code> returns an id for querying the log table (<code>sys.text_import_log</code>), to
monitor the progress of ongoing import:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">SELECT * FROM sys.text_import_log WHERE id = &#x27;55020329020b446a&#x27;;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><table><thead><tr><th align="left">ts</th><th>id</th><th>table</th><th>file</th><th>phase</th><th>status</th><th>message</th><th>rows_handled</th><th>rows_imported</th><th>errors</th></tr></thead><tbody><tr><td align="left">2022-08-03T14:00:40.907224Z</td><td>55020329020b446a</td><td>weather</td><td>weather.csv</td><td>null</td><td>started</td><td>null</td><td>null</td><td>null</td><td>0</td></tr><tr><td align="left">2022-08-03T14:00:40.910709Z</td><td>55020329020b446a</td><td>weather</td><td>weather.csv</td><td>analyze_file_structure</td><td>started</td><td>null</td><td>null</td><td>null</td><td>0</td></tr><tr><td align="left">2022-08-03T14:00:42.370563Z</td><td>55020329020b446a</td><td>weather</td><td>weather.csv</td><td>analyze_file_structure</td><td>finished</td><td>null</td><td>null</td><td>null</td><td>0</td></tr><tr><td align="left">2022-08-03T14:00:42.370793Z</td><td>55020329020b446a</td><td>weather</td><td>weather.csv</td><td>boundary_check</td><td>started</td><td>null</td><td>null</td><td>null</td><td>0</td></tr></tbody></table><p>Looking at the log from the newest to the oldest might be more convenient:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">SELECT * FROM sys.text_import_log WHERE id = &#x27;55020329020b446a&#x27; ORDER BY ts DESC;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Once import successfully ends the log table should contain a row with a &#x27;null&#x27;
phase and &#x27;finished&#x27; status :</p><table><thead><tr><th align="left">ts</th><th>id</th><th>table</th><th>file</th><th>phase</th><th>status</th><th>message</th><th>rows_handled</th><th>rows_imported</th><th>errors</th></tr></thead><tbody><tr><td align="left">2022-08-03T14:10:59.198672Z</td><td>55020329020b446a</td><td>weather</td><td>weather.csv</td><td>null</td><td>finished</td><td></td><td>300000000</td><td>300000000</td><td>0</td></tr></tbody></table><p>Import into non-partitioned tables uses single-threaded implementation (serial
import) that reports only start and finish records in the status table. Given an
ordered CSV file <code>weather1mil.csv</code>, when importing, the log table shows:</p><table><thead><tr><th align="left">ts</th><th>id</th><th>table</th><th>file</th><th>phase</th><th>status</th><th>message</th><th>rows_handled</th><th>rows_imported</th><th>errors</th></tr></thead><tbody><tr><td align="left">2022-08-03T15:00:40.907224Z</td><td>42d31603842f771a</td><td>weather</td><td>weather1mil.csv</td><td>null</td><td>started</td><td>null</td><td>null</td><td>null</td><td>0</td></tr><tr><td align="left">2022-08-03T15:01:20.000709Z</td><td>42d31603842f771a</td><td>weather</td><td>weather1mil.csv</td><td>null</td><td>finished</td><td>null</td><td>999999</td><td>999999</td><td>0</td></tr></tbody></table><p>The log table contains only coarse-grained, top-level data. Import phase run
times vary a lot (e.g. <code>partition_import</code> often takes 80% of the whole import
execution time), and therefore
<a href="/docs/reference/configuration#logging">the server log</a> provides an alternative
to follow more details of import:</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#262833" class="codeBlockTitle_oQzk">import log</div><div class="codeBlockContent_csEI log"><div tabindex="0" class="prism-code language-log codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-03T14:00:40.907224Z I i.q.c.t.ParallelCsvFileImporter started [importId=5502031634e923b2, phase=analyze_file_structure, file=`C:\dev\tmp\weather.csv`, workerCount=10]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-03T14:00:40.917224Z I i.q.c.p.WriterPool &gt;&gt; [table=`weather`, thread=43]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-03T14:00:41.440049Z I i.q.c.t.ParallelCsvFileImporter finished [importId=5502031634e923b2, phase=analyze_file_structure, file=`C:\dev\tmp\weather.csv`, duration=0s, errors=0]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-03T14:00:41.440196Z I i.q.c.t.ParallelCsvFileImporter started [importId=5502031634e923b2, phase=boundary_check, file=`C:\dev\tmp\weather.csv`, workerCount=10]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-03T14:01:18.853212Z I i.q.c.t.ParallelCsvFileImporter finished [importId=5502031634e923b2, phase=boundary_check, file=`C:\dev\tmp\weather.csv`, duration=6s, errors=0]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-03T14:01:18.853303Z I i.q.c.t.ParallelCsvFileImporter started [importId=5502031634e923b2, phase=indexing, file=`C:\dev\tmp\weather.csv`, workerCount=10]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-03T14:01:18.853516Z I i.q.c.t.ParallelCsvFileImporter temporary import directory [path=&#x27;E:\dev\tmp\weather\]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-03T14:01:42.612302Z I i.q.c.t.CsvFileIndexer finished chunk [chunkLo=23099021813, chunkHi=26948858785, lines=29999792, errors=0]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-03T14:01:42.791789Z I i.q.c.t.CsvFileIndexer finished chunk [chunkLo=11549510915, chunkHi=15399347885, lines=30000011, errors=0]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>If the <a href="/docs/reference/sql/copy#options"><code>ON ERROR</code> option</a> is set to <code>ABORT</code>,
import stops on the first error and the error is logged. Otherwise, all errors
are listed in the log.</p><p>The reference to the error varies depending on the phase of an import:</p><ul><li>In the indexing phase, if an error occurs, the absolute input file line is
referenced:</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI log"><div tabindex="0" class="prism-code language-log codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-08T11:50:24.319675Z E i.q.c.t.CsvFileIndexer could not parse timestamp [line=999986, column=1]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><ul><li>In the data import phase, if an error occurs, the log references the offset as
related to the start of the file.</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI log"><div tabindex="0" class="prism-code language-log codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-08T12:19:56.828792Z E i.q.c.t.TextImportTask type syntax [type=INT, offset=5823, column=0, value=&#x27;CMP2&#x27;]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>The errored rows can then be extracted for further investigation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="faq"></a>FAQ<a class="hash-link" href="#faq" title="Direct link to heading">#</a></h2><details><summary>What happens in a database crash or OS reboot?</summary><p></p><p>If reboot/power loss happens while partitions are being attached, then table
might be left with incomplete data. Please truncate table before re-importing
with:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">TRUNCATE TABLE table_name;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>If reboot/power loss happens before any partitions being attached, the import
should not be affected.</p><p></p></details><details><summary>I&#x27;m getting &quot;COPY is disabled [&#x27;cairo.sql.copy.root&#x27; is not set?]&quot; error message</summary><p></p><p>Please set <code>cairo.sql.copy.root</code> setting, restart the instance and try again.</p><p></p></details><details><summary>I&#x27;m getting &quot;could not create temporary import work directory [path=&#x27;somepath&#x27;, errno=-1]&quot; error message</summary><p></p><p>Please make sure that the <code>cairo.sql.copy.root</code> and <code>cairo.sql.copy.work.root</code>
are valid paths pointing to existing directories.</p><p></p></details><details><summary>I&#x27;m getting &quot;[2] could not open read-only [file=somepath]&quot; error message</summary><p></p><p>Please check that import file path is valid and accessible to QuestDB instance
users.</p><p>If you are running QuestDB using Docker, please check if the directory mounted
for storing source CSV files is identical to the one <code>cairo.sql.copy.root</code>
property or <code>QDB_CAIRO_SQL_COPY_ROOT</code> environment variable points to.</p><p>For example, the following command can start a QuestDB instance:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">docker run -p </span><span class="token number" style="color:#50fa7b">9000</span><span class="token plain">:9000 </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">-v </span><span class="token string" style="color:#f1fa8c">&quot;/tmp/questdb:/var/lib/questdb&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">-v </span><span class="token string" style="color:#f1fa8c">&quot;/tmp/questdb/my_input_root:/tmp/questdb_import&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">-e </span><span class="token assign-left variable" style="color:#ff79c6">QDB_CAIRO_SQL_COPY_ROOT</span><span class="token operator" style="color:#ff79c6">=</span><span class="token plain">/tmp/questdb_wrong </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">questdb/questdb</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>However, running:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">COPY weather from &#x27;weather_example.csv&#x27; WITH HEADER true;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Results in the &quot;[2] could not open read-only
[file=/tmp/questdb_wrong/weather_example.csv]&quot; error message.</p><p></p></details><details><summary>I&#x27;m getting &quot;column count mismatch [textColumnCount=4, tableColumnCount=3, table=someTable]&quot; error message</summary><p></p><p>There are more columns in input file than in the existing target table. Please
remove column(s) from input file or add them to the target table schema.</p><p></p></details><details><summary>I&#x27;m getting &quot;timestamp column &#x27;ts2&#x27; not found in file header&quot; error message</summary><p></p><p>Either input file is missing header or timestamp column name given in <code>COPY</code>
command is invalid. Please add file header or fix timestamp option.</p><p></p></details><details><summary>I&#x27;m getting &quot;column is not a timestamp [no=0, name=&#x27;ts&#x27;]&quot; error message</summary><p></p><p>Timestamp column given by the user or (if header is missing) assumed based on
target table schema is of a different type.<br>
Please check timestamp column name in input file header or make sure input file
column order matches that of target table.</p><p></p></details><details><summary>I&#x27;m getting &quot;target table must be empty [table=t]&quot; error message</summary><p></p><p><code>COPY</code> doesn&#x27;t yet support importing into partitioned table with existing data.</p><p>Please truncate table before re-importing with:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">TRUNCATE TABLE table_name;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>or import into another empty table and then use <code>INSERT INTO SELECT</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">INSERT INTO table_name batch 100000</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">SELECT * FROM other_table;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>to copy data into original target table.</p><p></p></details><details><summary>I&#x27;m getting &quot;io_uring error&quot; error message</summary><p></p><p>It&#x27;s possible that you&#x27;ve hit a IO_URING-related kernel error.<br>
Please set <code>cairo.iouring.enabled</code> setting to false, restart QuestDB instance,
and try again.</p><p></p></details><details><summary>I&#x27;m getting &quot;name is reserved&quot; error message</summary><p></p><p>The table you&#x27;re trying import into is in bad state (metadata is incomplete).</p><p>Please either drop the table with:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">DROP TABLE table_name;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>and recreate the table or change the table name in the <code>COPY</code> command.</p><p></p></details><details><summary>I&#x27;m getting &quot;Unable to process the import request. Another import request may be in progress.&quot; error message</summary><p></p><p>Only one import can be running at a time.</p><p>Either cancel running import with:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">COPY &#x27;paste_import_id_here&#x27; CANCEL;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>or wait until the current import is finished.</p><p></p></details><details><summary>Import finished but table is (almost) empty</summary><p></p><p>Please check the latest entries in log table:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">SELECT * FROM sys.text_import_log LIMIT -10;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>If &quot;errors&quot; column is close to number of records in the input file then it may
mean:</p><ul><li><code>FORMAT</code> option of <code>COPY</code> command or auto-detected format doesn&#x27;t match
timestamp column data in file</li><li>Other column(s) can&#x27;t be parsed and <code>ON ERROR SKIP_ROW</code> option was used</li><li>Input file is unordered and target table has designated timestamp but is not
partitioned</li></ul><p>If none of the above causes the error, please check the log file for messages
like:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI log"><div tabindex="0" class="prism-code language-log codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-08T11:50:24.319675Z E i.q.c.t.CsvFileIndexer could not parse timestamp [line=999986, column=1]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>or</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI log"><div tabindex="0" class="prism-code language-log codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">2022-08-08T12:19:56.828792Z E i.q.c.t.TextImportTask type syntax [type=INT, offset=5823, column=0, value=&#x27;CMP2&#x27;]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>that should explain why rows were rejected. Note that in these examples, the
former log message mentions the absolute input file line while the latter is
referencing the offset as related to the start of the file.</p><p></p></details><details><summary>Import finished but table column names are `f0`, `f1`, ...</summary><p></p><p>Input file misses header and target table does not exist, so columns received
synthetic names . You can rename them with the <code>ALTER TABLE</code> command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">ALTER TABLE table_name RENAME COLUMN f0 TO ts;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p></p></details></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/turpleio/homepage/edit/main/docs/guides/importing-data.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/develop/web-console"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Web Console</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/guides/importing-data-rest"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CSV import via REST API »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prepare-the-import" class="table-of-contents__link">Prepare the import</a><ul><li><a href="#export-the-existing-database" class="table-of-contents__link">Export the existing database</a></li><li><a href="#things-to-know-about-copy" class="table-of-contents__link">Things to know about <code>COPY</code></a></li><li><a href="#configure-copy" class="table-of-contents__link">Configure <code>COPY</code></a></li></ul></li><li><a href="#create-the-target-table-schema" class="table-of-contents__link">Create the target table schema</a></li><li><a href="#import-csv" class="table-of-contents__link">Import CSV</a></li><li><a href="#track-import-progress" class="table-of-contents__link">Track import progress</a></li><li><a href="#faq" class="table-of-contents__link">FAQ</a></li></ul></div></div></div></div></main></div></div><footer class="root_JnvJ"><div class="content_-gfC center_S24y"><img alt="QuestDB logo" class="logo_JrwJ" src="/img/navbar/tp_brand.png" width="108" height="27"><div class="tagline_T1tH"><p>인프라관리부터 서비스운영까지 클라우드환경에 최적화된 클라우드 네이티브 플랫폼</p></div><div class="links_1SgP"></div></div><div class="border_PW0V"><div class="bottom_wPs3 center_S24y">Copyright © 2023 Gitple. All rights are reserved.</div></div></footer></div>
<script src="/assets/js/main.e53824dd.js" defer="defer"></script>
</body>
</html>