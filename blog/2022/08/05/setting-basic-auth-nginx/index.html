<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=3">
<meta httpequiv="x-ua-compatible" content="ie=edge">
<meta property="og:type" content="website">
<meta name="author" content="turpleio">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link href="https://www.googletagmanager.com" rel="dns-prefetch">
<link href="https://www.google-analytics.com" rel="dns-prefetch">
<link rel="icon" href="/favicon.png">
<link rel="apple-touch-icon" href="/img/icons/apple-180x180.png" sizes="180x180">
<meta name="msapplication-config" content="/browserconfig.xml">
<link rel="sitemap" type="application/xml" href="/sitemap.xml">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PVR7M2G"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-PVR7M2G",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Turple: Cloud Native Platform" href="/opensearch.xml">
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#d14671">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#21222c">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Turple: Cloud Native Platform Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Turple: Cloud Native Platform Blog Atom Feed"><title data-react-helmet="true">Setting up Basic Authentication for QuestDB open source using Nginx | Turple: Cloud Native Platform</title><meta data-react-helmet="true" property="og:title" content="Setting up Basic Authentication for QuestDB open source using Nginx | Turple: Cloud Native Platform"><meta data-react-helmet="true" name="description" content="How to implement Nginx Basic Authentication for QuestDB open source."><meta data-react-helmet="true" name="twitter:description" content="How to implement Nginx Basic Authentication for QuestDB open source."><meta data-react-helmet="true" property="og:description" content="How to implement Nginx Basic Authentication for QuestDB open source."><meta data-react-helmet="true" name="twitter:title" content="Setting up Basic Authentication for QuestDB open source using Nginx | Turple: Cloud Native Platform"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for &quot;Setting up Basic Authentication for QuestDB open source using Nginx | Turple: Cloud Native Platform&quot;"><meta data-react-helmet="true" name="keywords" content="nginx,security,authentication,proxy,timeseries"><meta data-react-helmet="true" property="og:image" content="https://turpleio.github.io/img/blog/2022-08-05/banner.png"><meta data-react-helmet="true" name="twitter:image" content="https://turpleio.github.io/img/blog/2022-08-05/banner.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link rel="stylesheet" href="/assets/css/styles.4f6557e4.css">
</head>
<body itemscope itemtype="http://schema.org/Organization">
<meta itemprop="name" content="Turple: Cloud Native Platform">
<meta itemprop="description" content="Turple is a cloud native platform which can help you build and operate your services on cloud.">
<meta itemprop="url" content="https://turpleio.github.io">
<meta itemprop="logo" content="https://turpleio.github.io/img/favicon.png">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar_wBc8 navbar--light"><div class="navbar__inner inner_Y8Z6"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand brand_AtiA" href="/">QuestDB</a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand brand_AtiA" href="/">QuestDB</a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="wrapper_DIJ0 blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--3"><div class="sidebar_q+wC thin-scrollbar"><h3 class="sidebarItemTitle_9G5K">Recent posts</h3><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/12/19/merry-questmas-gifts-2023">Merry Questmas! Here are your gifts for 2023...</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/12/13/using-prometheus-loki-grafana-monitor-questdb-kubernetes">Using Prometheus, Loki, and Grafana to monitor QuestDB in Kubernetes</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/30/full-table-scan-are-fast">Listen to Your CPU - Full-table Scans Are Fast</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/25/questdb-6.6.1-dynamic-commits">QuestDB 6.6.1 - Dynamic Commits</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/23/sql-extensions-time-series-data-questdb-part-ii">SQL Extensions for Time Series Data in QuestDB - Part II</a></li></ul></div></div><main class="col col--7"><article><header><h1 class="title_KBQu">Setting up Basic Authentication for QuestDB open source using Nginx</h1><time datetime="2022-08-05T00:00:00.000Z" class="date_A31P">August 5, 2022 · 7 min read</time><div class="avatar margin-vert--md"><a href="https://kovidrathee.medium.com/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://miro.medium.com/fit/c/96/96/0*_CwYR2OmNap47tQO.jpg" alt="Kovid Rathee"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://kovidrathee.medium.com/" target="_blank" rel="noopener noreferrer">Kovid Rathee</a></h4><small class="avatar__subtitle">Guest post</small></div></div></header><div class="markdown"><figure><img alt="QuestDB log and nginx logo" class="image_1-Fc" height="467" src="/img/blog/2022-08-05/banner.png" width="650"></figure><p>This post comes from
<a href="https://towardsdatascience.com/questdb-vs-timescaledb-38160a361c0e?sk=42d1c037a6dfc3786e11eb9d9f5af2ad" target="_blank" rel="noopener noreferrer">Kovid Rathee</a>,
who has put together a tutorial to show how to add extra security by implementing Nginx Basic Authentication for QuestDB open source.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>Data privacy and security is one of the most critical areas of concern when working with any data. This is even more true for time-series databases because a lot of time-series data deals with highly essential financial, geospatial, and medical data, among many others.</p><p>While QuestDB open source has already <a href="https://questdb.io/docs/reference/api/ilp/authenticate/" target="_blank" rel="noopener noreferrer">added authentication on top of the InfluxDB line protocol</a> to secure your time-series data ingestion workloads into QuestDB, you might need more layers of security, mainly to prevent unauthorized access to your critical data from your QuestDB web console.</p><p>There are several ways to achieve this, such as <a href="https://en.wikipedia.org/wiki/Tunneling_protocol" target="_blank" rel="noopener noreferrer">SSH tunneling</a>, <a href="https://oauth.net/" target="_blank" rel="noopener noreferrer">OAuth</a>, <a href="https://www.okta.com/au/identity-101/what-is-token-based-authentication/" target="_blank" rel="noopener noreferrer">token-based auth</a>, etc. However, this article will take you through the most straightforward authentication setup of them so that you can get started with basic authentication with minimal effort using Nginx.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>While you can set up authentication for QuestDB open source, <a href="/cloud">QuestDB Cloud</a> offers built-in authentication that offers a hassle-free, Out-of-the-Box solution.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="how-basic-authentication-works-in-nginx"></a>How Basic Authentication Works in Nginx<a class="hash-link" href="#how-basic-authentication-works-in-nginx" title="Direct link to heading">#</a></h2><p>Nginx is a multi-purpose application that can be used as a <a href="https://microsoft.github.io/reverse-proxy/articles/authn-authz.html" target="_blank" rel="noopener noreferrer">reverse proxy</a>, a load balancer, or an HTTP cache. This means if you direct all your incoming traffic for QuestDB to Nginx, it can decide what action to take on that request.</p><p>Nginx Basic Authentication is a way to implement a fundamental authentication mechanism. In case of a successful login request, you’ll be redirected from the default HTTP port to the port on which your QuestDB server is running.</p><blockquote><p>Note: On top of the Basic Authentication, you should also <a href="https://docs.nginx.com/nginx/admin-guide/security-controls/securing-http-traffic-upstream/" target="_blank" rel="noopener noreferrer">configure SSL/HTTPS</a> on top for additional security. You can download free SSL/TLS certificates from <a href="https://www.nginx.com/blog/using-free-ssltls-certificates-from-lets-encrypt-with-nginx/" target="_blank" rel="noopener noreferrer">LetsEncrypt</a>.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="steps-for-setting-up-basic-authentication-for-questdb-open-source-using-nginx"></a>Steps for Setting up Basic Authentication for QuestDB open source using Nginx<a class="hash-link" href="#steps-for-setting-up-basic-authentication-for-questdb-open-source-using-nginx" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step-1-install-questdb-open-source"></a>Step 1. Install QuestDB open source<a class="hash-link" href="#step-1-install-questdb-open-source" title="Direct link to heading">#</a></h3><p>You can <a href="https://questdb.io/get-questdb/" target="_blank" rel="noopener noreferrer">install QuestDB open source</a> on your local instance or a production system in several ways. Your installation method doesn’t impact your basic authentication setup using Nginx. You&#x27;ll be good to go if you have QuestDB up and running. In this tutorial, we’ll install QuestDB using <a href="https://brew.sh/" target="_blank" rel="noopener noreferrer">Homebrew</a>, using the following command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">brew </span><span class="token function" style="color:#8be9fd">install</span><span class="token plain"> questdb</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Once the installation is complete, QuestDB automatically starts and is available on <a href="http://localhost:9000" target="_blank" rel="noopener noreferrer">http://localhost:9000</a>. To ensure that the installation has gone right, please visit this address and see if you can access the QuestDB console.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step-2-install-nginx"></a>Step 2. Install Nginx<a class="hash-link" href="#step-2-install-nginx" title="Direct link to heading">#</a></h3><p>To set up Basic Authentication using Nginx, you need to install Nginx on your system. Using Homebrew, you can do that by simply running the following command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">brew </span><span class="token function" style="color:#8be9fd">install</span><span class="token plain"> nginx</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>After the installation, please ensure that Nginx is up and running by visiting <a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">http://localhost:8080</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step-3-configure-nginx-to-require-basic-authentication-for-questdb-open-source"></a>Step 3. Configure Nginx to require Basic Authentication for QuestDB open source<a class="hash-link" href="#step-3-configure-nginx-to-require-basic-authentication-for-questdb-open-source" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step-3a-create-a-username-and-password"></a>Step 3a. Create a Username and Password<a class="hash-link" href="#step-3a-create-a-username-and-password" title="Direct link to heading">#</a></h4><p>When you configure Nginx to force authentication, you’ll need a username and password combination to log into QuestDB. The first step is to create that username and password combination using the following <code>htpasswd</code> command.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">sudo</span><span class="token plain"> htpasswd -c /usr/local/etc/nginx.htpasswd questdb  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>The home directory, i.e., in this case, <code>/usr/local/etc/,</code> might be something else for another platform like CentOS, Ubuntu, etc. It’s best just to run the following command to test your configuration file and find out what the installation path is:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">nginx -t</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>This command will give you an output will all the different paths that Nginx is using:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI log"><div tabindex="0" class="prism-code language-log codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">nginx: the configuration file /usr/local/etc/nginx/nginx.conf syntax is ok</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">nginx: configuration file /usr/local/etc/nginx/nginx.conf test is successful</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Once you&#x27;re done with this basic check, you can start with the configuration.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step-3b-modify-nginxconf-to-require-basic-authentication--redirect"></a>Step 3b. Modify <code>nginx.conf</code> to Require Basic Authentication &amp; Redirect<a class="hash-link" href="#step-3b-modify-nginxconf-to-require-basic-authentication--redirect" title="Direct link to heading">#</a></h4><p>To implement Basic Authentication properly, you must understand what Nginx does. To add a layer of security, all your requests on a certain port (in this case, port 80) will go to Nginx first. They will then be redirected to port 9000, where you have a QuestDB instance running.</p><p>The redirection will be contingent upon whether you can provide Nginx with the correct username and password combination you had created earlier.</p><p>Take the default <code>nginx.conf</code> file and remove all the comments. Firstly, in the <code>server</code> section, change the value of <code>listen</code> from 8080 to 80 if you want to redirect to QuestDB whenever someone types <code>localhost</code> (as 80 is the default HTTP port). Secondly, replace the <code>location</code> section with the following:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI conf"><div tabindex="0" class="prism-code language-conf codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">location / {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            proxy_pass  http://localhost:9000;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            index  index.html index.htm;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            auth_basic &quot;Restricted Content&quot;;      </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            auth_basic_user_file /usr/local/etc/nginx/.htpasswd;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>You&#x27;ll probably be dealing with a lot of data in the web console, and you might need to download it to your local machine. For such use cases, you can modify the default value of the <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_read_timeout" target="_blank" rel="noopener noreferrer"><code>proxy_read_timeout</code></a> variable from 60 to 300 (or a value that makes sense for your use case). You can, similarly, set the <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_send_timeout" target="_blank" rel="noopener noreferrer"><code>proxy_send_timeout</code></a> and <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_connect_timeout" target="_blank" rel="noopener noreferrer"><code>proxy_connect_timeout</code></a>.</p><p>This is where you’re telling Nginx to force authentication based on your password stored in the <code>.htpasswd</code> file in your Nginx home directory. The full `nginx.conf` file looks something like the following:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI conf"><div tabindex="0" class="prism-code language-conf codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">worker_processes  1;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">events {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    worker_connections  1024;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">}</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">http {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    include       mime.types;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    default_type  application/octet-stream;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    sendfile        on;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    keepalive_timeout  65;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    server {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        listen       80;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        server_name  localhost;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        location / {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            proxy_pass  http://localhost:9000;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            proxy_read_timeout 300;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            proxy_connect_timeout 120;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            proxy_send_timeout 300;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            index  index.html index.htm;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            auth_basic &quot;Restricted Content&quot;;      </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            auth_basic_user_file /usr/local/etc/nginx/.htpasswd;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        error_page   500 502 503 504  /50x.html;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        location = /50x.html {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            root   html;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    include servers/*;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step-3c-reload-nginx-configuration"></a>Step 3c. Reload Nginx Configuration<a class="hash-link" href="#step-3c-reload-nginx-configuration" title="Direct link to heading">#</a></h4><p>Once you make the necessary changes to your Nginx configuration file mentioned in the previous step, you’ll be ready to reload or restart the Nginx server for the configuration changes to take effect. </p><blockquote><p>Ensure that you&#x27;ve blocked any direct access to your QuestDB web console using a software-based firewall, such as <a href="https://en.wikipedia.org/wiki/Iptables" target="_blank" rel="noopener noreferrer"><code>iptables</code></a>. If you configure your firewall to deny traffic on a certain port, Nginx will still be able to redirect you to that.</p></blockquote><p>Alternatively, you can set the <a href="https://questdb.io/docs/reference/configuration/#http-server" target="_blank" rel="noopener noreferrer"><code>http.bind.to</code></a> variable in your QuestDB <code>server.conf</code> file to <code>127.0.0.1</code> ensuring that QuestDB rejects the requests coming directly from the internet, and only allows requests that are proxied via Nginx.</p><blockquote><p>You can find your <code>server.conf</code> file in your Homebrew QuestDB installation directory -- <code>/usr/local/var/questdb/conf</code>. This directory might differ on different OS and Homebrew versions. </p></blockquote><p>You can use one of the following commands for reloading the Nginx configuration:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">brew services restart nginx  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">brew services reload nginx  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Here’s what the output of the commands mentioned above will look like:</p><p><img src="/assets/images/step_3c-1ad3196f17dfe80bc6b5b3aa17704d1a.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step-4-verify-if-basic-authentication-is-working-while-accessing-questdb-open-source"></a>Step 4. Verify if Basic Authentication is working while accessing QuestDB open source<a class="hash-link" href="#step-4-verify-if-basic-authentication-is-working-while-accessing-questdb-open-source" title="Direct link to heading">#</a></h3><p>After reloading the configuration file, open a new tab in your browser to test if the redirection and authentication are working correctly.</p><p><code>localhost</code> points to QuestDB based on the <code>nginx.conf</code>.</p><p><img src="/assets/images/step_4_1-7748d6cf4ce89ed4fac0c11f7b68dd53.png"></p><p>If <code>localhost</code> binding is working correctly, you should see the following screen asking for your username and password to log into QuestDB:</p><p><img src="/assets/images/step_4_2-970356a5e21307065e58cf5198f7353c.png"></p><p>Once you enter your username and password, Nginx will go back to <code>.htpasswd</code> to verify whether you’ve entered the correct credentials. If the authentication succeeds, you’ll be able to log onto QuestDB and carry on with your work, as shown below:</p><p><img src="/assets/images/step_4_3-005ca1794a84c357985be23ff4d1255b.png"></p><p>However, if the authentication fails, you’ll see the following screen with an HTTP 401 specifying that you need the authorization to access <code>localhost</code>.</p><p><img src="/assets/images/step_4_4-b9eaf43faa0ba6e0d9d79bcf37cdc616.png"></p><p>If you end up getting an HTTP 401, recheck your username and password combination. If it is still not working, try creating another user or resetting the password for your current user using the <a href="https://httpd.apache.org/docs/2.4/programs/htpasswd.html" target="_blank" rel="noopener noreferrer"><code>htpasswd</code> command-line tool</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>Nginx Basic Authentication is a short-term solution to ensure that your data is safe and protected from unauthorized access. This tutorial took you through the steps required to set up authentication for QuestDB open source by simply installing Nginx and making a few changes in the configuration file.</p><p>Although Nginx Basic Authentication is not the recommended method for authentication and authorization, it is the quickest to set up. In the longer term, you might want to use a solution like LDAP-based solution, OAuth/OIDC, and so on.</p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/tutorial">tutorial</a><a class="margin-horiz--sm" href="/blog/tags/nginx">nginx</a><a class="margin-horiz--sm" href="/blog/tags/security">security</a><a class="margin-horiz--sm" href="/blog/tags/authentication">authentication</a><a class="margin-horiz--sm" href="/blog/tags/proxy">proxy</a></div></footer></article><div></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2022/08/08/questdb-release-6.5"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">« QuestDB 6.5 Release - CSV import</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2022/06/20/forecasting-with-questdb-and-tensorflow"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Time Series Forecasting with TensorFlow and QuestDB »</div></a></div></nav></div></main></div></div><div class="root_0lLS"><div class="cards_xeZk"><div class="root_R798 skinPrimary_JHOH"><svg width="76" height="76" viewBox="0 0 76 76" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="38" cy="38" r="38" fill="#1E1F27"></circle><path d="M56.99 18.792a.817.817 0 00-.117-.303c-.01-.02-.02-.05-.03-.069-.01-.02-.029-.029-.048-.049a.912.912 0 00-.137-.136l-.117-.088c-.02-.01-.03-.03-.05-.04-.029-.01-.068-.029-.107-.039a.85.85 0 00-.146-.049 1.075 1.075 0 00-.176-.019h-.147a1.15 1.15 0 00-.196.049c-.029.01-.068.01-.097.02L12.59 36.67a.979.979 0 00-.509 1.29c.098.216.264.401.48.5l16.07 7.556v15.025c0 .537.44.977.978.977a.964.964 0 00.831-.469l6.794-11.046 10.499 5.533a.974.974 0 001.408-.655l7.84-36.2v-.058c.01-.058.01-.107.019-.156 0-.059 0-.117-.01-.176zM29.413 44.208L15.376 37.6l36.326-15.68-22.289 22.288zm1.174 13.363V47.004l4.917 2.59-4.917 7.977zm16.92-3.87l-9.237-4.86-1.662-1.026-.068.118-5.289-2.786 23.1-23.12L47.508 53.7z" fill="#fff"></path></svg><h3 class="title_BHe0">문의하기</h3><p class="description_Bwvi">이메일을 입력하시면 소개자료를 보내드립니다.</p><div class="content_gAr2"><form class="root_teCd"><div><div class="inputs_0wQ8"><input type="email" class="input_cjQx input_a6pP" name="email" required="" pattern="^[a-zA-Z0-9.!#$%&amp;&#x27;*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$" placeholder="Email address" title="Email address should be valid"><button class="submit_poRs button_f7Ff button--tertiary_vtfp button--uppercase_ESEN" type="submit">보내기</button></div></div></form></div></div></div></div></div><footer class="root_JnvJ"><div class="content_-gfC center_S24y"><img alt="QuestDB logo" class="logo_JrwJ" src="/img/navbar/tp_brand.png" width="108" height="27"><div class="tagline_T1tH"><p>인프라관리부터 서비스운영까지 클라우드환경에 최적화된 클라우드 네이티브 플랫폼</p></div><div class="links_1SgP"></div></div><div class="border_PW0V"><div class="bottom_wPs3 center_S24y">Copyright © 2023 Gitple. All rights are reserved.</div></div></footer></div>
<script src="/assets/js/main.185a1183.js" defer="defer"></script>
</body>
</html>