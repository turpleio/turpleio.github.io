<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=3">
<meta httpequiv="x-ua-compatible" content="ie=edge">
<meta property="og:type" content="website">
<meta name="author" content="turpleio">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link href="https://www.googletagmanager.com" rel="dns-prefetch">
<link href="https://www.google-analytics.com" rel="dns-prefetch">
<link rel="icon" href="/favicon.png">
<link rel="apple-touch-icon" href="/img/icons/apple-180x180.png" sizes="180x180">
<meta name="msapplication-config" content="/browserconfig.xml">
<link rel="sitemap" type="application/xml" href="/sitemap.xml">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PVR7M2G"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-PVR7M2G",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Turple: Cloud Native Platform" href="/opensearch.xml">
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#d14671">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#21222c">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Turple: Cloud Native Platform Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Turple: Cloud Native Platform Blog Atom Feed"><title data-react-helmet="true">QuestDB 6.4 Release Highlights | Turple: Cloud Native Platform</title><meta data-react-helmet="true" property="og:title" content="QuestDB 6.4 Release Highlights | Turple: Cloud Native Platform"><meta data-react-helmet="true" name="description" content="QuestDB 6.4 Release Highlights"><meta data-react-helmet="true" name="twitter:description" content="QuestDB 6.4 Release Highlights"><meta data-react-helmet="true" property="og:description" content="QuestDB 6.4 Release Highlights"><meta data-react-helmet="true" name="twitter:title" content="QuestDB 6.4 Release Highlights | Turple: Cloud Native Platform"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for &quot;QuestDB 6.4 Release Highlights | Turple: Cloud Native Platform&quot;"><meta data-react-helmet="true" name="keywords" content="questdb,release,performance,database,sql"><meta data-react-helmet="true" property="og:image" content="https://turpleio.github.io/img/blog/2022-05-31/cover.png"><meta data-react-helmet="true" name="twitter:image" content="https://turpleio.github.io/img/blog/2022-05-31/cover.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link rel="stylesheet" href="/assets/css/styles.4f6557e4.css">
</head>
<body itemscope itemtype="http://schema.org/Organization">
<meta itemprop="name" content="Turple: Cloud Native Platform">
<meta itemprop="description" content="Turple is a cloud native platform which can help you build and operate your services on cloud.">
<meta itemprop="url" content="https://turpleio.github.io">
<meta itemprop="logo" content="https://turpleio.github.io/img/favicon.png">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar_wBc8 navbar--light"><div class="navbar__inner inner_Y8Z6"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand brand_AtiA" href="/">QuestDB</a><a class="navbar__item navbar__link" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand brand_AtiA" href="/">QuestDB</a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Docs</a></li></ul></div></div></div></nav><div class="wrapper_DIJ0 blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--3"><div class="sidebar_q+wC thin-scrollbar"><h3 class="sidebarItemTitle_9G5K">Recent posts</h3><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/12/19/merry-questmas-gifts-2023">Merry Questmas! Here are your gifts for 2023...</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/12/13/using-prometheus-loki-grafana-monitor-questdb-kubernetes">Using Prometheus, Loki, and Grafana to monitor QuestDB in Kubernetes</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/30/full-table-scan-are-fast">Listen to Your CPU - Full-table Scans Are Fast</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/25/questdb-6.6.1-dynamic-commits">QuestDB 6.6.1 - Dynamic Commits</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/23/sql-extensions-time-series-data-questdb-part-ii">SQL Extensions for Time Series Data in QuestDB - Part II</a></li></ul></div></div><main class="col col--7"><article><header><h1 class="title_KBQu">QuestDB 6.4 Release Highlights</h1><time datetime="2022-05-31T00:00:00.000Z" class="date_A31P">May 31, 2022 · 6 min read</time><div class="avatar margin-vert--md"><a href="https://github.com/jerrinot" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/jerrinot" alt="Jaromir Hamala"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/jerrinot" target="_blank" rel="noopener noreferrer">Jaromir Hamala</a></h4><small class="avatar__subtitle">QuestDB Engineering</small></div></div></header><div class="markdown"><figure><img alt="QuestDB 6.4 Release Highlights" class="image_1-Fc" height="800" src="/img/blog/2022-05-31/cover.png" width="900"></figure><p>We just released <strong>QuestDB 6.4</strong>. A new release is always exciting! However,
QuestDB 6.4 is a special release. Why? It is introducing one of the most awaited
features: SQL UPDATE! You read it right, QuestDB now allows updating already
written data.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="why-does-update-matter"></a>Why does UPDATE matter?<a class="hash-link" href="#why-does-update-matter" title="Direct link to heading">#</a></h2><p>One could argue: Time-series data should be immutable. After all, these are
records of historical facts, and history is immutable. While I can agree with
this sentiment, there are valid use-cases for updating time-series data. Imagine
an IoT application that records sensor data in QuestDB and uses it for various
analytics. It sounds like a typical append-only-never-mutate use case.</p><p>What happens when a sensor breaks down and feeds bad data into QuestDB? It may
badly skew the resulting analytics! How do you correct bad data? Even without
UPDATE you have some options. For example, you could maintain another table with
records of broken sensors and use it to exclude data from analytics. While this
sounds nice in theory - and there is a certain elegance in how it fits into the
append-only world - it complicates our data model. It forces us to consult
(join) the other table whenever querying sensor data. It results in more
complicated queries and the join also negatively impacts performance. There are
other options to solve this without UPDATE, but they all feel like a workaround.</p><p>How do you solve the broken-sensor problem with updates? You have 2 options:</p><ul><li>Repairing bad data</li><li>Excluding bad data</li></ul><p>The first option is best when you know what the right values should be. Imagine
our hypothetical sensor measures temperature and someone has accidentally
switched it to generate data in Fahrenheit while it should have been in Celsius.
Fixing such data is trivial. The SQL could look like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">UPDATE sensor_data</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">SET temperature = (temperature - 32) * 5.0 / 9</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">WHERE (measurement_timestamp between X and Y) and (sensor_id = Z)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Data exclusion is applicable in cases where you have no means of correcting the
data and you want to simply exclude them from analytics. Imagine a temperature
sensor which starts to generate completely random values. There is no way to
repair such data and the best you can do is to exclude the bad data from all
analytics. This could be done e.g. by having a column “isValid” which would be
true by default and when you detect a broken sensor then you run a query like
this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">UPDATE temperature_table</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">SET isValid = false</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">WHERE (measurement_timestamp between X and Y) and (sensor_id = Z)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>This allows analytical queries to exclude such data, without introducing
additional complexity due to extra joins.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="does-it-mean-questdb-can-be-used-for-oltp-use-cases"></a>Does it mean QuestDB can be used for OLTP use-cases?<a class="hash-link" href="#does-it-mean-questdb-can-be-used-for-oltp-use-cases" title="Direct link to heading">#</a></h2><p>As I’ve shown above the UPDATE greatly simplifies some use-cases. The internal
design was driven by this principle: <strong>Updates cannot slow down other paths.</strong>
QuestDB is known for awesome ingestion and query performance and we cannot
compromise on that for the sake of UPDATEs. We are also assuming UPDATEs in time
series are rare. Hence we decided that whoever is executing the update should
pay the performance price. All this means UPDATEs are relatively costly and this
feature won’t magically turn QuestDB into an
<a href="https://en.wikipedia.org/wiki/Online_transaction_processing" target="_blank" rel="noopener noreferrer">OLTP</a> database. We
don’t want to become yet another Postgres or MySQL. Our mission is to build the
best time-series database for real-time analytics and the design of this feature
reflects it. If you are interested in more in-depth design then check out our
<a href="https://questdb.io/docs/guides/modifying-data" target="_blank" rel="noopener noreferrer">documentation</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="extra-noteworthy-feature-write-amplification-metrics"></a>Extra noteworthy feature: Write amplification metrics<a class="hash-link" href="#extra-noteworthy-feature-write-amplification-metrics" title="Direct link to heading">#</a></h2><p>Out of order inserts can cause write amplification. When you insert a row with a
timestamp earlier than what was already committed, QuestDB merges existing data
with the new row. In the worst case, a single row insertion will copy the entire
table partition. QuestDB has
<a href="https://questdb.io/docs/guides/out-of-order-commit-lag/" target="_blank" rel="noopener noreferrer">various parameters</a> to
tune this behaviour; Commit Lag is the most important parameter. To do any
meaningful tuning you need to understand your data. At the very least you need
to know how frequently Out of order events occur and how much data was written
as a result of the merge process. QuestDB 6.4 is adding Out of order related
metrics to the already
<a href="https://questdb.io/docs/third-party-tools/prometheus" target="_blank" rel="noopener noreferrer">existing metrics</a> you can
consume via Prometheus.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="whats-next"></a>What’s next?<a class="hash-link" href="#whats-next" title="Direct link to heading">#</a></h2><p>There are 2 major items ahead of us: Data replication and QuestDB Cloud.
Replication is part of our story to accommodate more data, execute queries
faster and provide fault tolerance. QuestDB is already used for
<a href="https://questdb.io/customers" target="_blank" rel="noopener noreferrer">critical applications</a>, but as of QuestDB 6.4, it
offers little support for fault tolerance. Our users design their own solutions.
For example, some of them rely on container orchestration, but we know we can do
better. We would like to simplify this process and offer fault tolerance as a
first-class feature. Data replication is a prerequisite for that. Data
replication will also serve as a foundation for horizontal scaling which will
allow us to escape the capacity limitation of a single box.</p><p>Data replication will simplify the operational aspect of QuestDB. It will allow
everyone to run a highly available QuestDB both in Cloud and on-prem. However,
we would like to do more. What if you like QuestDB capabilities, but you don’t
want to run it? If you are like that then you will love to hear we are building
a managed version of QuestDB. It’ll allow you to consume QuestDB as a service
and we will cover the operational aspect of it. The service is currently being
rolled out. <a href="https://questdb.io/cloud" target="_blank" rel="noopener noreferrer">Give us a shout</a> if it sounds interesting
to you.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="words-of-appreciation"></a>Words of appreciation<a class="hash-link" href="#words-of-appreciation" title="Direct link to heading">#</a></h2><p>QuestDB is an open-source project. For us, it means more than just the Apache
License. We see it as a way to connect with our community. It gives all QuestDB
users a chance to dig into source code and improve it. We love all contributors,
but in this blog I’d like to cherry-pick 2 people who made their first
contributors:</p><ul><li>MatthewLENG2002
<a href="https://github.com/questdb/questdb/pull/2145" target="_blank" rel="noopener noreferrer">made our REST API more robust and predictable</a>.</li><li>Ngnic added a GitHub action to
<a href="https://github.com/questdb/questdb/pull/2150" target="_blank" rel="noopener noreferrer">check Pull Requests have the right format</a>.</li></ul><p>Thank you.</p><p>If you would like to start contributing to QuestDB then join
<a href="https://slack.questdb.io/" target="_blank" rel="noopener noreferrer">QuestDB Slack</a>, Say Hi and I’m sure we can find a
way for you to improve QuestDB. Did I mention we ❤️ getting
<a href="https://github.com/questdb/questdb" target="_blank" rel="noopener noreferrer">GitHub stars?</a> ;-)</p><p>And last but not least: <a href="https://questdb.io/careers" target="_blank" rel="noopener noreferrer">We are hiring!</a></p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/release">release</a><a class="margin-horiz--sm" href="/blog/tags/team">team</a><a class="margin-horiz--sm" href="/blog/tags/product">product</a></div></footer></article><div></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2022/06/07/data-pipeline-with-kafka-and-questdb"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">« Building a Data Pipeline using QuestDB and Confluent Kafka</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2022/05/26/query-benchmark-questdb-versus-clickhouse-timescale"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">4Bn rows/sec query benchmark: Clickhouse vs QuestDB vs Timescale »</div></a></div></nav></div></main></div></div><div class="root_0lLS"><div class="cards_xeZk"><div class="root_R798 skinPrimary_JHOH"><svg width="76" height="76" viewBox="0 0 76 76" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="38" cy="38" r="38" fill="#1E1F27"></circle><path d="M56.99 18.792a.817.817 0 00-.117-.303c-.01-.02-.02-.05-.03-.069-.01-.02-.029-.029-.048-.049a.912.912 0 00-.137-.136l-.117-.088c-.02-.01-.03-.03-.05-.04-.029-.01-.068-.029-.107-.039a.85.85 0 00-.146-.049 1.075 1.075 0 00-.176-.019h-.147a1.15 1.15 0 00-.196.049c-.029.01-.068.01-.097.02L12.59 36.67a.979.979 0 00-.509 1.29c.098.216.264.401.48.5l16.07 7.556v15.025c0 .537.44.977.978.977a.964.964 0 00.831-.469l6.794-11.046 10.499 5.533a.974.974 0 001.408-.655l7.84-36.2v-.058c.01-.058.01-.107.019-.156 0-.059 0-.117-.01-.176zM29.413 44.208L15.376 37.6l36.326-15.68-22.289 22.288zm1.174 13.363V47.004l4.917 2.59-4.917 7.977zm16.92-3.87l-9.237-4.86-1.662-1.026-.068.118-5.289-2.786 23.1-23.12L47.508 53.7z" fill="#fff"></path></svg><h3 class="title_BHe0">문의하기</h3><p class="description_Bwvi">이메일을 입력하시면 소개자료를 보내드립니다.</p><div class="content_gAr2"><form class="root_teCd"><div><div class="inputs_0wQ8"><input type="email" class="input_cjQx input_a6pP" name="email" required="" pattern="^[a-zA-Z0-9.!#$%&amp;&#x27;*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$" placeholder="Email address" title="Email address should be valid"><button class="submit_poRs button_f7Ff button--tertiary_vtfp button--uppercase_ESEN" type="submit">보내기</button></div></div></form></div></div></div></div></div><footer class="root_JnvJ"><div class="content_-gfC center_S24y"><img alt="QuestDB logo" class="logo_JrwJ" src="/img/navbar/tp_brand.png" width="108" height="27"><div class="tagline_T1tH"><p>인프라관리부터 서비스운영까지 클라우드환경에 최적화된 클라우드 네이티브 플랫폼</p></div><div class="links_1SgP"><div class="category_Ptbh"><span class="title_HpoE">Product</span><ul class="items_Lw7J"><li><a class="link_vx7p" href="/cloud/">Cloud</a></li><li><a class="link_vx7p" href="/enterprise/">Enterprise</a></li><li><a class="link_vx7p" href="/pricing/">Pricing</a></li><li><a class="link_vx7p" href="/use-cases/">Use Cases</a></li><li><a class="link_vx7p" href="/customers/">Customers</a></li><li><a class="link_vx7p" href="https://github.com/orgs/questdb/projects/1/views/5" rel="noopener noreferrer" target="_blank">Roadmap</a></li></ul></div><div class="category_Ptbh"><span class="title_HpoE">Developers</span><ul class="items_Lw7J"><li><a class="link_vx7p" href="/docs/">Docs</a></li><li><a class="link_vx7p" href="/blog/tags/tutorial/">Tutorials</a></li><li><a class="link_vx7p" href="/blog/">Blog</a></li><li><a class="link_vx7p" href="https://">Discussions</a></li><li><a class="link_vx7p" href="https://">Join Slack</a></li><li><a class="link_vx7p" href="/community/">Swag</a></li></ul></div><div class="category_Ptbh"><span class="title_HpoE">Company</span><ul class="items_Lw7J"><li><a class="link_vx7p" href="/about-us/">About us</a></li><li><a class="link_vx7p" href="/careers/">Careers</a></li></ul></div></div></div><div class="border_PW0V"><div class="bottom_wPs3 center_S24y">Copyright © 2023 Gitple. All rights are reserved.</div></div></footer></div>
<script src="/assets/js/main.db1fdb94.js" defer="defer"></script>
</body>
</html>