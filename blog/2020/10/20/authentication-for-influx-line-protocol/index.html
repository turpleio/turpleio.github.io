<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=3">
<meta httpequiv="x-ua-compatible" content="ie=edge">
<meta property="og:type" content="website">
<meta name="author" content="turpleio">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link href="https://www.googletagmanager.com" rel="dns-prefetch">
<link href="https://www.google-analytics.com" rel="dns-prefetch">
<link rel="icon" href="/favicon.png">
<link rel="apple-touch-icon" href="/img/icons/apple-180x180.png" sizes="180x180">
<meta name="msapplication-config" content="/browserconfig.xml">
<link rel="sitemap" type="application/xml" href="/sitemap.xml">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PVR7M2G"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-PVR7M2G",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Turple: Cloud Native Platform" href="/opensearch.xml">
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#d14671">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#21222c">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Turple: Cloud Native Platform Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Turple: Cloud Native Platform Blog Atom Feed"><title data-react-helmet="true">Authentication for InfluxDB line protocol | Turple: Cloud Native Platform</title><meta data-react-helmet="true" property="og:title" content="Authentication for InfluxDB line protocol | Turple: Cloud Native Platform"><meta data-react-helmet="true" name="description" content="QuestDB has added authentication for InfluxDB line protocol over TCP"><meta data-react-helmet="true" name="twitter:description" content="QuestDB has added authentication for InfluxDB line protocol over TCP"><meta data-react-helmet="true" property="og:description" content="QuestDB has added authentication for InfluxDB line protocol over TCP"><meta data-react-helmet="true" name="twitter:title" content="Authentication for InfluxDB line protocol | Turple: Cloud Native Platform"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for &quot;Authentication for InfluxDB line protocol | Turple: Cloud Native Platform&quot;"><meta data-react-helmet="true" property="og:image" content="https://turpleio.github.io/img/blog/2020-10-20/banner.jpg"><meta data-react-helmet="true" name="twitter:image" content="https://turpleio.github.io/img/blog/2020-10-20/banner.jpg"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link rel="stylesheet" href="/assets/css/styles.4f6557e4.css">
</head>
<body itemscope itemtype="http://schema.org/Organization">
<meta itemprop="name" content="Turple: Cloud Native Platform">
<meta itemprop="description" content="Turple is a cloud native platform which can help you build and operate your services on cloud.">
<meta itemprop="url" content="https://turpleio.github.io">
<meta itemprop="logo" content="https://turpleio.github.io/img/favicon.png">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar_wBc8 navbar--light"><div class="navbar__inner inner_Y8Z6"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand brand_AtiA" href="/">QuestDB</a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand brand_AtiA" href="/">QuestDB</a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="wrapper_DIJ0 blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--3"><div class="sidebar_q+wC thin-scrollbar"><h3 class="sidebarItemTitle_9G5K">Recent posts</h3><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/12/19/merry-questmas-gifts-2023">Merry Questmas! Here are your gifts for 2023...</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/12/13/using-prometheus-loki-grafana-monitor-questdb-kubernetes">Using Prometheus, Loki, and Grafana to monitor QuestDB in Kubernetes</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/30/full-table-scan-are-fast">Listen to Your CPU - Full-table Scans Are Fast</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/25/questdb-6.6.1-dynamic-commits">QuestDB 6.6.1 - Dynamic Commits</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/23/sql-extensions-time-series-data-questdb-part-ii">SQL Extensions for Time Series Data in QuestDB - Part II</a></li></ul></div></div><main class="col col--7"><article><header><h1 class="title_KBQu">Authentication for InfluxDB line protocol</h1><time datetime="2020-10-20T00:00:00.000Z" class="date_A31P">October 20, 2020 Â· 3 min read</time><div class="avatar margin-vert--md"><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/patrickSpaceSurfer" target="_blank" rel="noopener noreferrer">Patrick Mackinlay</a></h4><small class="avatar__subtitle">QuestDB Team</small></div></div></header><div class="markdown"><figure><img alt="An open lock with its key attached to it." class="image_1-Fc image--title_Z46g" height="365" src="/img/blog/2020-10-20/banner.jpg" width="650"><figcaption class="caption_VLGg"> Photo by<a href="https://unsplash.com/photos/hRXIKdxoaPo" target="_blank" rel="noopener noreferrer">Vanna Phon</a> on <a href="https://unsplash.com" target="_blank" rel="noopener noreferrer">Unsplash</a> </figcaption></figure><p>QuestDB supports ingesting records using InfluxDB line protocol. This means that
you can benefit from a simple, lightweight, and convenient message format to add
data points to tables. We&#x27;ve further improved support for this feature by adding
authentication, so your endpoint is more secure. This post describes how we
added this functionality and how to enable it via QuestDB configuration.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="adding-influxdb-line-protocol-support-to-questdb"></a>Adding InfluxDB line protocol support to QuestDB<a class="hash-link" href="#adding-influxdb-line-protocol-support-to-questdb" title="Direct link to heading">#</a></h2><p><a href="/docs/reference/api/ilp/overview">InfluxDB line protocol</a> is popular because
it is a simple text based format, you simply open a socket and send data points
line by line. Implementation is easy because encoding is trivial and there is no
response to parse. The protocol can be used over UDP or TCP with minimal
overhead.</p><p>This is all great as long as your endpoint can not be accessed by unauthorised
actors that could send junk to your database. If your endpoint is public, then
you could secure it by encapsulating it in a secure transport layer such as
<a href="https://en.wikipedia.org/wiki/Transport_Layer_Security" target="_blank" rel="noopener noreferrer">TLS</a>, adding complexity
to your infrastructure that needs to be managed. This is something we sought to
avoid. Our goals when implementing authentication were:</p><ul><li>Use a secure, future proof, authentication method.</li><li>Minimise protocol complexity and transport overhead.</li><li>Configuration solely in QuestDB without the need for storing secret data.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="adding-authentication-to-influxdb-line-protocol"></a>Adding authentication to InfluxDB line protocol<a class="hash-link" href="#adding-authentication-to-influxdb-line-protocol" title="Direct link to heading">#</a></h2><p>To these ends we decided to provide authentication for the InfluxDB line
protocol over TCP with a simple
<a href="https://en.wikipedia.org/wiki/Challenge%E2%80%93response_authentication" target="_blank" rel="noopener noreferrer">challenge/response</a>
mechanism, where the challenge is a
<a href="https://en.wikipedia.org/wiki/Cryptographic_nonce" target="_blank" rel="noopener noreferrer">nonce</a> and the response a
signature.
<a href="https://en.wikipedia.org/wiki/Elliptic-curve_cryptography" target="_blank" rel="noopener noreferrer">Elliptic curve cryptography</a>
(ECC curve P-256) with <a href="https://en.wikipedia.org/wiki/SHA-2" target="_blank" rel="noopener noreferrer">SHA-256</a> was chosen
for the signature algorithm, this ensures strong authentication that is
hopefully future proof. The elliptic curve cryptographic keys have a public and
secret component, it is possible to configure QuestDB with just the public part,
thereby mitigating any risks of storing secret information on the server.
Languages such as
<a href="/docs/develop/insert-data#influxdb-line-protocol">JavaScript and Go</a> have
standard libraries that implement ECC, the
<a href="https://tools.ietf.org/html/rfc7517" target="_blank" rel="noopener noreferrer">JSON Web Key</a> standard can be used to
store and distribute the keys in a clear and ubiquitous manner.</p><p>The authentication challenge/response mechanism was chosen to minimise the
impact on the protocol, it works as follows:</p><ol><li>When the client connects it sends its key id to the server.</li><li>The server responds with a
<a href="https://en.wikipedia.org/wiki/Cryptographic_nonce" target="_blank" rel="noopener noreferrer">nonce</a> in printable
characters.</li><li>The client responds with the <a href="https://en.wikipedia.org/wiki/Base64" target="_blank" rel="noopener noreferrer">base64</a>
encoded signature of the nonce.</li><li>If authentication fails the server will disconnect, if not then the client
can revert to sending standard InfluxDB line protocol data points.</li></ol><p>We developed this form of authentication in response to users who have QuestDB
deployments where a simple form of authentication is required without the
overheads of full encryption.</p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a><a class="margin-horiz--sm" href="/blog/tags/authentication">authentication</a><a class="margin-horiz--sm" href="/blog/tags/influxdb">influxdb</a></div></footer></article><div></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2020/11/16/http-server-contribution"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« Community contribution from Alex Pelagenko improving our HTTP server</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2020/10/19/grafana-tutorial"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Build a monitoring dashboard with QuestDB and Grafana Â»</div></a></div></nav></div></main></div></div><div class="root_0lLS"><div class="cards_xeZk"><div class="root_R798 skinPrimary_JHOH"><svg width="76" height="76" viewBox="0 0 76 76" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="38" cy="38" r="38" fill="#1E1F27"></circle><path d="M56.99 18.792a.817.817 0 00-.117-.303c-.01-.02-.02-.05-.03-.069-.01-.02-.029-.029-.048-.049a.912.912 0 00-.137-.136l-.117-.088c-.02-.01-.03-.03-.05-.04-.029-.01-.068-.029-.107-.039a.85.85 0 00-.146-.049 1.075 1.075 0 00-.176-.019h-.147a1.15 1.15 0 00-.196.049c-.029.01-.068.01-.097.02L12.59 36.67a.979.979 0 00-.509 1.29c.098.216.264.401.48.5l16.07 7.556v15.025c0 .537.44.977.978.977a.964.964 0 00.831-.469l6.794-11.046 10.499 5.533a.974.974 0 001.408-.655l7.84-36.2v-.058c.01-.058.01-.107.019-.156 0-.059 0-.117-.01-.176zM29.413 44.208L15.376 37.6l36.326-15.68-22.289 22.288zm1.174 13.363V47.004l4.917 2.59-4.917 7.977zm16.92-3.87l-9.237-4.86-1.662-1.026-.068.118-5.289-2.786 23.1-23.12L47.508 53.7z" fill="#fff"></path></svg><h3 class="title_BHe0">ë¬¸ìíê¸°</h3><p class="description_Bwvi">ì´ë©ì¼ì ìë ¥íìë©´ ìê°ìë£ë¥¼ ë³´ë´ëë¦½ëë¤.</p><div class="content_gAr2"><form class="root_teCd"><div><div class="inputs_0wQ8"><input type="email" class="input_cjQx input_a6pP" name="email" required="" pattern="^[a-zA-Z0-9.!#$%&amp;&#x27;*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$" placeholder="Email address" title="Email address should be valid"><button class="submit_poRs button_f7Ff button--tertiary_vtfp button--uppercase_ESEN" type="submit">ë³´ë´ê¸°</button></div></div></form></div></div></div></div></div><footer class="root_JnvJ"><div class="content_-gfC center_S24y"><img alt="QuestDB logo" class="logo_JrwJ" src="/img/navbar/tp_brand.png" width="108" height="27"><div class="tagline_T1tH"><p>ì¸íë¼ê´ë¦¬ë¶í° ìë¹ì¤ì´ìê¹ì§ í´ë¼ì°ëíê²½ì ìµì íë í´ë¼ì°ë ë¤ì´í°ë¸ íë«í¼</p></div><div class="links_1SgP"></div></div><div class="border_PW0V"><div class="bottom_wPs3 center_S24y">Copyright Â© 2023 Gitple. All rights are reserved.</div></div></footer></div>
<script src="/assets/js/main.202cfa5e.js" defer="defer"></script>
</body>
</html>