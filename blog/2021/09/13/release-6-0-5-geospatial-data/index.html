<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=3">
<meta httpequiv="x-ua-compatible" content="ie=edge">
<meta property="og:type" content="website">
<meta name="author" content="turpleio">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link href="https://www.googletagmanager.com" rel="dns-prefetch">
<link href="https://www.google-analytics.com" rel="dns-prefetch">
<link rel="icon" href="/favicon.png">
<link rel="apple-touch-icon" href="/img/icons/apple-180x180.png" sizes="180x180">
<meta name="msapplication-config" content="/browserconfig.xml">
<link rel="sitemap" type="application/xml" href="/sitemap.xml">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PVR7M2G"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-PVR7M2G",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Turple: Cloud Native Platform" href="/opensearch.xml">
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#d14671">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#21222c">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Turple: Cloud Native Platform Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Turple: Cloud Native Platform Blog Atom Feed"><title data-react-helmet="true">QuestDB 6.0.5 September release, geospatial support | Turple: Cloud Native Platform</title><meta data-react-helmet="true" property="og:title" content="QuestDB 6.0.5 September release, geospatial support | Turple: Cloud Native Platform"><meta data-react-helmet="true" name="description" content="QuestDB 6.0.5 is available now and includes support for geospatial data with the introduction of geohash support for fast and efficient geodata queries and storage."><meta data-react-helmet="true" name="twitter:description" content="QuestDB 6.0.5 is available now and includes support for geospatial data with the introduction of geohash support for fast and efficient geodata queries and storage."><meta data-react-helmet="true" property="og:description" content="QuestDB 6.0.5 is available now and includes support for geospatial data with the introduction of geohash support for fast and efficient geodata queries and storage."><meta data-react-helmet="true" name="twitter:title" content="QuestDB 6.0.5 September release, geospatial support | Turple: Cloud Native Platform"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for &quot;QuestDB 6.0.5 September release, geospatial support | Turple: Cloud Native Platform&quot;"><meta data-react-helmet="true" name="keywords" content="postgres,geohash,timeseries,database"><meta data-react-helmet="true" property="og:image" content="https://turpleio.github.io/img/blog/2021-09-13/banner.png"><meta data-react-helmet="true" name="twitter:image" content="https://turpleio.github.io/img/blog/2021-09-13/banner.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link rel="stylesheet" href="/assets/css/styles.4f6557e4.css">
</head>
<body itemscope itemtype="http://schema.org/Organization">
<meta itemprop="name" content="Turple: Cloud Native Platform">
<meta itemprop="description" content="Turple is a cloud native platform which can help you build and operate your services on cloud.">
<meta itemprop="url" content="https://turpleio.github.io">
<meta itemprop="logo" content="https://turpleio.github.io/img/favicon.png">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar_wBc8 navbar--light"><div class="navbar__inner inner_Y8Z6"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand brand_AtiA" href="/">QuestDB</a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand brand_AtiA" href="/">QuestDB</a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="wrapper_DIJ0 blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--3"><div class="sidebar_q+wC thin-scrollbar"><h3 class="sidebarItemTitle_9G5K">Recent posts</h3><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/12/19/merry-questmas-gifts-2023">Merry Questmas! Here are your gifts for 2023...</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/12/13/using-prometheus-loki-grafana-monitor-questdb-kubernetes">Using Prometheus, Loki, and Grafana to monitor QuestDB in Kubernetes</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/30/full-table-scan-are-fast">Listen to Your CPU - Full-table Scans Are Fast</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/25/questdb-6.6.1-dynamic-commits">QuestDB 6.6.1 - Dynamic Commits</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/23/sql-extensions-time-series-data-questdb-part-ii">SQL Extensions for Time Series Data in QuestDB - Part II</a></li></ul></div></div><main class="col col--7"><article><header><h1 class="title_KBQu">QuestDB 6.0.5 September release, geospatial support</h1><time datetime="2021-09-13T00:00:00.000Z" class="date_A31P">September 13, 2021 Â· 5 min read</time><div class="avatar margin-vert--md"><a href="https://github.com/bsmth" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/bsmth" alt="Brian Smith"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/bsmth" target="_blank" rel="noopener noreferrer">Brian Smith</a></h4><small class="avatar__subtitle">QuestDB Team</small></div></div></header><div class="markdown"><p>The latest QuestDB release introduces support for geospatial data via the
addition of geohash types. Geohashes encode geographic areas as base-32 strings,
and native support for this type allows for fast and efficient querying and
storage of geodata. Also included are helper functions for rounding timestamps,
performance improvements for existing functions, alongside other fixes and
features. Here&#x27;s the full roundup of changes that have just landed!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="questdb-605"></a>QuestDB 6.0.5<a class="hash-link" href="#questdb-605" title="Direct link to heading">#</a></h2><p>The addition of geospatial data in QuestDB opens up various possibilities to
include spatial dimensions in data sets in QuestDB. We&#x27;re excited at the options
for using QuestDB in different new use cases such as asset tracking, computer
vision, machine learning, and other challenging domains. We&#x27;re excited to see
what our community builds with the newly-supported functionality and eagerly
awaiting your feedback!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="geospatial-support-via-geohashes"></a>Geospatial support via geohashes<a class="hash-link" href="#geospatial-support-via-geohashes" title="Direct link to heading">#</a></h3><p>A <strong>geohash</strong> is a convenient way of expressing a location using a short
alphanumeric string, with greater precision obtained with longer strings. The
basic idea is that the Earth is divided into grids of defined size, and each
area is assigned a unique id called its Geohash.</p><p>For a given location on Earth, we can convert latitude and longitude as the
approximate center point of a grid represented by a geohash string. This string
is the Geohash and will determine which of the predefined regions the point
belongs to.</p><figure><img alt="An illustration showing two maps with different geohash precision levels applied" class="image_Pw1y margin_Rc0b shadow_7z-4" height="598" src="/img/blog/2021-09-13/geohashes.png" width="850"></figure><p>To assist with geospatial queries, a new <code>geohash</code> type has been added to
QuestDB which allows storing and querying spatial data. The syntax follows the
format <code>geohash(&lt;precision&gt;)</code>. The following examples show how to create tables
with geohash types and to make basic queries by geohash:</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#262833" class="codeBlockTitle_oQzk">Geohash overview</div><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">-- Create two geohash columns with different precision</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">CREATE TABLE geo_data (g5c geohash(5c), g29b geohash(29b));</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">-- Inserting geohash literals</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">INSERT INTO geo_data VALUES(#u33d8, ##10101111100101111111101101101)</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">-- Querying by geohash</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">SELECT * FROM geo_data WHERE g5c = #u33d8;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>To help with geospatial queries, a <code>within</code> operator has been added which helps
evaluate if a geohash is equal to or is within a larger grid. The following
query will return the most recent entries by device ID if the <code>g8c</code> column
contains a geohash within <code>u33d</code>:</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#262833" class="codeBlockTitle_oQzk">within operator</div><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">SELECT * FROM geo_data LATEST BY device_id</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">WHERE g8c within(#u33d);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Geohashes can be used in SQL via PostgreSQL and HTTP with geohash literals and
string to geohash conversion and with some special handling over InfluxDB Line
Protocol. For full details of supported features and functionality including
advanced usage, see the <a href="/docs/concept/geohashes">geohash documentation</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="first-and-last-functions"></a>first() and last() functions<a class="hash-link" href="#first-and-last-functions" title="Direct link to heading">#</a></h3><p>The <code>first()</code> and <code>last()</code> functions have had significant internal performance
improvements with the latest release. Improving the efficiency of these
functions has the benefit that geospatial queries are significantly faster. The
most common types of queries which are likely to benefit from this improvement
are those such as &quot;last-known location&quot; of a device or vessel:</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#262833" class="codeBlockTitle_oQzk">last() example</div><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">SELECT ts, last(g8c) FROM geo_data</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">WHERE device_id = &#x27;device_3&#x27;;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="timestamp-floor-and-ceiling-functions"></a>Timestamp floor and ceiling functions<a class="hash-link" href="#timestamp-floor-and-ceiling-functions" title="Direct link to heading">#</a></h3><p>To aid with rounding timestamp values, it&#x27;s now possible to use
<code>timestamp_floo()</code> and <code>timestamp_ceil()</code> functions to round up or down by a
unit of choice:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI questdb-sql"><div tabindex="0" class="prism-code language-questdb-sql codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">WITH t AS (SELECT cast(&#x27;2016-02-10T16:18:22.862145Z&#x27; AS timestamp) ts)</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">SELECT</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  ts,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  -- floor</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  timestamp_floor(&#x27;T&#x27;, ts) f_milli,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  timestamp_floor(&#x27;s&#x27;, ts) f_second,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  timestamp_floor(&#x27;m&#x27;, ts) f_minute,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  -- ceiling</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  timestamp_ceil(&#x27;h&#x27;, ts) c_hour,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  timestamp_ceil(&#x27;d&#x27;, ts) c_day,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  timestamp_ceil(&#x27;M&#x27;, ts) c_month</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">FROM t</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>For more details on using these functions and reference documentation for the
types of units that can be passed, see the
<a href="/docs/reference/function/date-time#timestamp_ceil">date and time functions documentation</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="out-of-order-parameters-via-rest-api"></a>Out-of-order parameters via REST API<a class="hash-link" href="#out-of-order-parameters-via-rest-api" title="Direct link to heading">#</a></h3><p>It&#x27;s now possible to pass parameters relating to out-of-order ingestion via REST
API. The <code>/imp</code> endpoint accepts the <code>commitLag</code> and <code>maxUncommittedRows</code> query
parameters on partitioned tables. For more information on the meaning and usage
of these parameters, see the
<a href="/docs/guides/out-of-order-commit-lag">out-of-order ingestion</a> documentation.</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#262833" class="codeBlockTitle_oQzk">Out-of-order params via REST API</div><div class="codeBlockContent_csEI bash"><div tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">curl</span><span class="token plain"> -F </span><span class="token assign-left variable" style="color:#ff79c6">data</span><span class="token operator" style="color:#ff79c6">=</span><span class="token plain">@weather.csv </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token string" style="color:#f1fa8c">&#x27;http://localhost:9000/imp?timestamp=ts&amp;partitionBy=DAY&amp;commitLag=120000000&amp;maxUncommittedRows=10000&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="run-questdb-605"></a>Run QuestDB 6.0.5<a class="hash-link" href="#run-questdb-605" title="Direct link to heading">#</a></h2><p>The release notes including a changelog is
<a href="https://github.com/questdb/questdb/releases/tag/6.0.5" target="_blank" rel="noopener noreferrer">available on GitHub</a> and
this version has been published to
<a href="https://hub.docker.com/r/questdb/questdb/tags?page=1&amp;ordering=last_updated" target="_blank" rel="noopener noreferrer">Docker Hub</a>.
To pull the <code>6.0.5</code> tag and start up QuestDB, use <code>docker run</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><div tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">docker run -p </span><span class="token number" style="color:#50fa7b">9000</span><span class="token plain">:9000 -p </span><span class="token number" style="color:#50fa7b">8812</span><span class="token plain">:8812 -p </span><span class="token number" style="color:#50fa7b">9009</span><span class="token plain">:9009 </span><span class="token punctuation" style="color:#f8f8f2">\</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  questdb/questdb:6.0.5</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="next-up"></a>Next up<a class="hash-link" href="#next-up" title="Direct link to heading">#</a></h2><p>We have been tracking the most active
<a href="https://github.com/questdb/questdb/discussions" target="_blank" rel="noopener noreferrer">GitHub discussions</a>, and we are
keeping a keen eye on the features and fixes that are most popular to our
community. We are picking up the most upvoted and active topics in our GitHub
Discussions and the feature requests in GitHub issues. If there&#x27;s a feature
you&#x27;d love to see, open a discussion on the topic or share your support if a
thread for it exists already!</p><p>We&#x27;re eagerly awaiting feedback on this release, so feel free to reach out and
tell us how this version is running. Let us know how we&#x27;re doing or just come by
and say hello <a href="https://" target="_blank" rel="noopener noreferrer">in our Slack Community</a> or browse the repository
<a href="https://" target="_blank" rel="noopener noreferrer">on GitHub</a>.</p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/release">release</a><a class="margin-horiz--sm" href="/blog/tags/geospatial">geospatial</a><a class="margin-horiz--sm" href="/blog/tags/influxdb">influxdb</a></div></footer></article><div></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2021/09/17/high-frequency-finance-julia-lang"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« High frequency finance with Julia and QuestDB</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2021/08/24/digitalocean-droplet"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Launch a QuestDB droplet in 1-click via the DigitalOcean marketplace Â»</div></a></div></nav></div></main></div></div><div class="root_0lLS"><div class="cards_xeZk"><div class="root_R798 skinPrimary_JHOH"><svg width="76" height="76" viewBox="0 0 76 76" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="38" cy="38" r="38" fill="#1E1F27"></circle><path d="M56.99 18.792a.817.817 0 00-.117-.303c-.01-.02-.02-.05-.03-.069-.01-.02-.029-.029-.048-.049a.912.912 0 00-.137-.136l-.117-.088c-.02-.01-.03-.03-.05-.04-.029-.01-.068-.029-.107-.039a.85.85 0 00-.146-.049 1.075 1.075 0 00-.176-.019h-.147a1.15 1.15 0 00-.196.049c-.029.01-.068.01-.097.02L12.59 36.67a.979.979 0 00-.509 1.29c.098.216.264.401.48.5l16.07 7.556v15.025c0 .537.44.977.978.977a.964.964 0 00.831-.469l6.794-11.046 10.499 5.533a.974.974 0 001.408-.655l7.84-36.2v-.058c.01-.058.01-.107.019-.156 0-.059 0-.117-.01-.176zM29.413 44.208L15.376 37.6l36.326-15.68-22.289 22.288zm1.174 13.363V47.004l4.917 2.59-4.917 7.977zm16.92-3.87l-9.237-4.86-1.662-1.026-.068.118-5.289-2.786 23.1-23.12L47.508 53.7z" fill="#fff"></path></svg><h3 class="title_BHe0">ë¬¸ìíê¸°</h3><p class="description_Bwvi">ì´ë©ì¼ì ìë ¥íìë©´ ìê°ìë£ë¥¼ ë³´ë´ëë¦½ëë¤.</p><div class="content_gAr2"><form class="root_teCd"><div><div class="inputs_0wQ8"><input type="email" class="input_cjQx input_a6pP" name="email" required="" pattern="^[a-zA-Z0-9.!#$%&amp;&#x27;*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$" placeholder="Email address" title="Email address should be valid"><button class="submit_poRs button_f7Ff button--tertiary_vtfp button--uppercase_ESEN" type="submit">ë³´ë´ê¸°</button></div></div></form></div></div></div></div></div><footer class="root_JnvJ"><div class="content_-gfC center_S24y"><img alt="QuestDB logo" class="logo_JrwJ" src="/img/navbar/tp_brand.png" width="108" height="27"><div class="tagline_T1tH"><p>ì¸íë¼ê´ë¦¬ë¶í° ìë¹ì¤ì´ìê¹ì§ í´ë¼ì°ëíê²½ì ìµì íë í´ë¼ì°ë ë¤ì´í°ë¸ íë«í¼</p></div><div class="links_1SgP"></div></div><div class="border_PW0V"><div class="bottom_wPs3 center_S24y">Copyright Â© 2023 Gitple. All rights are reserved.</div></div></footer></div>
<script src="/assets/js/main.a0cde2ea.js" defer="defer"></script>
<script src="/gitplechat.js"></script>
</body>
</html>