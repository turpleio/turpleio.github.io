"use strict";(self.webpackChunkquestdb_io=self.webpackChunkquestdb_io||[]).push([[3710],{3905:function(e,t,i){i.d(t,{Zo:function(){return s},kt:function(){return d}});var n=i(67294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function I(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?I(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):I(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},I=Object.keys(e);for(n=0;n<I.length;n++)i=I[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);for(n=0;n<I.length;n++)i=I[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var o=n.createContext({}),m=function(e){var t=n.useContext(o),i=t;return e&&(i="function"==typeof e?e(t):g(g({},t),e)),i},s=function(e){var t=m(e.components);return n.createElement(o.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,I=e.originalType,o=e.parentName,s=r(e,["components","mdxType","originalType","parentName"]),c=m(i),d=a,C=c["".concat(o,".").concat(d)]||c[d]||l[d]||I;return i?n.createElement(C,g(g({ref:t},s),{},{components:i})):n.createElement(C,g({ref:t},s))}));function d(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var I=i.length,g=new Array(I);g[0]=c;var r={};for(var o in t)hasOwnProperty.call(t,o)&&(r[o]=t[o]);r.originalType=e,r.mdxType="string"==typeof e?e:a,g[1]=r;for(var m=2;m<I;m++)g[m]=i[m];return n.createElement.apply(null,g)}return n.createElement.apply(null,i)}c.displayName="MDXCreateElement"},21206:function(e,t,i){i.r(t),i.d(t,{frontMatter:function(){return r},metadata:function(){return o},toc:function(){return m},default:function(){return l}});var n=i(83117),a=i(80102),I=(i(67294),i(3905)),g=["components"],r={title:"Timestamp function",sidebar_label:"Timestamp",description:"Timestamp function reference documentation."},o={unversionedId:"reference/function/timestamp",id:"reference/function/timestamp",isDocsHomePage:!1,title:"Timestamp function",description:"Timestamp function reference documentation.",source:"@site/docs/reference/function/timestamp.md",sourceDirName:"reference/function",slug:"/reference/function/timestamp",permalink:"/docs/reference/function/timestamp",editUrl:"https://github.com/turpleio/homepage/edit/main/docs/reference/function/timestamp.md",version:"current",sidebar_label:"Timestamp",frontMatter:{title:"Timestamp function",sidebar_label:"Timestamp",description:"Timestamp function reference documentation."},sidebar:"docs",previous:{title:"Timestamp generator",permalink:"/docs/reference/function/timestamp-generator"},next:{title:"Bitwise operators",permalink:"/docs/reference/operators/bitwise"}},m=[{value:"Syntax",id:"syntax",children:[{value:"During a CREATE operation",id:"during-a-create-operation",children:[]},{value:"During a SELECT operation",id:"during-a-select-operation",children:[]}]},{value:"Examples",id:"examples",children:[{value:"During a CREATE operation",id:"during-a-create-operation-1",children:[]},{value:"During a SELECT operation",id:"during-a-select-operation-1",children:[]}]}],s={toc:m};function l(e){var t=e.components,r=(0,a.Z)(e,g);return(0,I.kt)("wrapper",(0,n.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,I.kt)("p",null,(0,I.kt)("inlineCode",{parentName:"p"},"timestamp(columnName)")," elects a\n",(0,I.kt)("a",{parentName:"p",href:"/docs/concept/designated-timestamp"},"designated timestamp"),":"),(0,I.kt)("ul",null,(0,I.kt)("li",{parentName:"ul"},"during a ",(0,I.kt)("a",{parentName:"li",href:"/docs/reference/sql/create-table#timestamp"},"CREATE TABLE")," operation"),(0,I.kt)("li",{parentName:"ul"},"during a ",(0,I.kt)("a",{parentName:"li",href:"/docs/reference/sql/select#timestamp"},"SELECT")," operation (",(0,I.kt)("inlineCode",{parentName:"li"},"dynamic timestamp"),")"),(0,I.kt)("li",{parentName:"ul"},"when ingesting data via ILP, for tables that do not already exist in QuestDB, partitions are applied automatically by day by default with a ",(0,I.kt)("inlineCode",{parentName:"li"},"timestamp")," column")),(0,I.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,I.kt)("div",{parentName:"div",className:"admonition-heading"},(0,I.kt)("h5",{parentName:"div"},(0,I.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,I.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,I.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,I.kt)("div",{parentName:"div",className:"admonition-content"},(0,I.kt)("p",{parentName:"div"},"Checking if tables contain a designated timestamp column can be done via the\n",(0,I.kt)("inlineCode",{parentName:"p"},"tables()")," and ",(0,I.kt)("inlineCode",{parentName:"p"},"table_columns()")," functions which are described in the\n",(0,I.kt)("a",{parentName:"p",href:"/docs/reference/function/meta"},"meta functions")," documentation page."))),(0,I.kt)("h2",{id:"syntax"},"Syntax"),(0,I.kt)("h3",{id:"during-a-create-operation"},"During a CREATE operation"),(0,I.kt)("p",null,"Create a ",(0,I.kt)("a",{parentName:"p",href:"/docs/concept/designated-timestamp"},"designated timestamp")," column\nduring table creation. For more information, refer to the\n",(0,I.kt)("a",{parentName:"p",href:"/docs/reference/sql/create-table"},"CREATE TABLE")," section."),(0,I.kt)("p",null,(0,I.kt)("img",{alt:"Flow chart showing the syntax of the TIMESTAMP keyword",src:i(40597).Z})),(0,I.kt)("h3",{id:"during-a-select-operation"},"During a SELECT operation"),(0,I.kt)("p",null,"Creates a ",(0,I.kt)("a",{parentName:"p",href:"/docs/concept/designated-timestamp"},"designated timestamp")," column in\nthe result of a query. Assigning a timestamp in a ",(0,I.kt)("inlineCode",{parentName:"p"},"SELECT")," statement\n(",(0,I.kt)("inlineCode",{parentName:"p"},"dynamic timestamp"),") allows for time series operations such as ",(0,I.kt)("inlineCode",{parentName:"p"},"LATEST BY"),",\n",(0,I.kt)("inlineCode",{parentName:"p"},"SAMPLE BY")," or ",(0,I.kt)("inlineCode",{parentName:"p"},"LATEST BY")," on tables which do not have a ",(0,I.kt)("inlineCode",{parentName:"p"},"designated timestamp"),"\nassigned."),(0,I.kt)("p",null,(0,I.kt)("img",{alt:"Flow chart showing the syntax of the timestamp function",src:i(83858).Z})),(0,I.kt)("h2",{id:"examples"},"Examples"),(0,I.kt)("h3",{id:"during-a-create-operation-1"},"During a CREATE operation"),(0,I.kt)("p",null,"The following creates a table with\n",(0,I.kt)("a",{parentName:"p",href:"/docs/concept/designated-timestamp"},"designated timestamp"),"."),(0,I.kt)("pre",null,(0,I.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="Create table"',title:'"Create','table"':!0},"CREATE TABLE\ntemperatures(ts timestamp, sensorID symbol, sensorLocation symbol, reading double)\ntimestamp(ts);\n")),(0,I.kt)("h3",{id:"during-a-select-operation-1"},"During a SELECT operation"),(0,I.kt)("p",null,"The following will query a table and assign a\n",(0,I.kt)("a",{parentName:"p",href:"/docs/concept/designated-timestamp"},"designated timestamp")," to the output. Note\nthe use of brackets to ensure the timestamp clause is applied to the result of\nthe query instead of the whole ",(0,I.kt)("inlineCode",{parentName:"p"},"readings")," table."),(0,I.kt)("pre",null,(0,I.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="Dynamic timestamp"',title:'"Dynamic','timestamp"':!0},"(SELECT cast(dateTime AS TIMESTAMP) ts, device, value FROM readings) timestamp(ts);\n")),(0,I.kt)("p",null,"Although the ",(0,I.kt)("inlineCode",{parentName:"p"},"readings")," table does not have a designated timestamp, we are able\nto create one on the fly. Now, we can use this into a subquery to perform\ntimestamp operations."),(0,I.kt)("pre",null,(0,I.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="Dynamic timestamp subquery"',title:'"Dynamic',timestamp:!0,'subquery"':!0},"SELECT ts, avg(value) FROM\n(SELECT cast(dateTime AS TIMESTAMP) ts, value FROM readings) timestamp(ts)\nSAMPLE BY 1d;\n")),(0,I.kt)("p",null,"If the data is unordered, it is important to order it first."),(0,I.kt)("pre",null,(0,I.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="Dynamic timestamp - unordered data"',title:'"Dynamic',timestamp:!0,"-":!0,unordered:!0,'data"':!0},"SELECT ts, avg(value) FROM\n(SELECT ts, value FROM unordered_readings ORDER BY ts) timestamp(ts)\nSAMPLE BY 1d;\n")))}l.isMDXComponent=!0},40597:function(e,t){t.Z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NzUiIGhlaWdodD0iMzciPgogICAgPGRlZnM+CiAgICAgICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KICAgICAgICAgICAgQG5hbWVzcGFjZSAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciOwogICAgICAgICAgICAgICAgLmxpbmUgICAgICAgICAgICAgICAgIHtmaWxsOiBub25lOyBzdHJva2U6ICM2MzYyNzM7fQogICAgICAgICAgICAgICAgLmJvbGQtbGluZSAgICAgICAgICAgIHtzdHJva2U6ICM2MzYyNzM7IHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlczsgc3Ryb2tlLXdpZHRoOiAyOyB9CiAgICAgICAgICAgICAgICAudGhpbi1saW5lICAgICAgICAgICAge3N0cm9rZTogIzYzNjI3Mzsgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcEVkZ2VzfQogICAgICAgICAgICAgICAgLmZpbGxlZCAgICAgICAgICAgICAgIHtmaWxsOiAjNjM2MjczOyBzdHJva2U6IG5vbmU7fQogICAgICAgICAgICAgICAgdGV4dC50ZXJtaW5hbCAgICAgICAgIHtmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBSb2JvdG8sIFVidW50dSwgQ2FudGFyZWxsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgICAgICBmaWxsOiAjZmZmZmZmOwogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0ZXh0Lm5vbnRlcm1pbmFsICAgICAge2ZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICJTZWdvZSBVSSIsIFJvYm90bywgVWJ1bnR1LCBDYW50YXJlbGwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgICAgIGZpbGw6ICNlMjg5YTQ7CiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGV4dC5yZWdleHAgICAgICAgICAgIHtmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBSb2JvdG8sIFVidW50dSwgQ2FudGFyZWxsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgICAgICBmaWxsOiAjMDAxNDFGOwogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlY3QsIGNpcmNsZSwgcG9seWdvbiB7ZmlsbDogbm9uZTsgc3Ryb2tlOiBub25lO30KICAgICAgICAgICAgICAgIHJlY3QudGVybWluYWwgICAgICAgICB7ZmlsbDogbm9uZTsgc3Ryb2tlOiAjYmUyZjViO30KICAgICAgICAgICAgICAgIHJlY3Qubm9udGVybWluYWwgICAgICB7ZmlsbDogcmdiYSgyNTUsMjU1LDI1NSwwLjEpOyBzdHJva2U6IG5vbmU7fQogICAgICAgICAgICAgICAgcmVjdC50ZXh0ICAgICAgICAgICAgIHtmaWxsOiBub25lOyBzdHJva2U6IG5vbmU7fQogICAgICAgICAgICAgICAgcG9seWdvbi5yZWdleHAgICAgICAgIHtmaWxsOiAjQzdFQ0ZGOyBzdHJva2U6ICMwMzhjYmM7fQogICAgICAgIDwvc3R5bGU+CiAgICA8L2RlZnM+CiAgICA8cG9seWdvbiBwb2ludHM9IjkgMTcgMSAxMyAxIDIxIi8+CiAgICA8cG9seWdvbiBwb2ludHM9IjE3IDE3IDkgMTMgOSAyMSIvPgogICAgPHJlY3QgeD0iMzEiIHk9IjMiIHdpZHRoPSI3MiIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSIyOSIgeT0iMSIgd2lkdGg9IjcyIiBoZWlnaHQ9IjMyIiBjbGFzcz0idGVybWluYWwiIHJ4PSIxMCIvPgogICAgPHRleHQgY2xhc3M9InRlcm1pbmFsIiB4PSIzOSIgeT0iMjEiPkNSRUFURTwvdGV4dD48YSB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeGxpbms6aHJlZj0iI3NvbWVDcmVhdGVUYWJsZVN0YXRlbWVudCIgeGxpbms6dGl0bGU9InNvbWVDcmVhdGVUYWJsZVN0YXRlbWVudCI+CiAgICA8cmVjdCB4PSIxMjMiIHk9IjMiIHdpZHRoPSIxOTgiIGhlaWdodD0iMzIiLz4KICAgIDxyZWN0IHg9IjEyMSIgeT0iMSIgd2lkdGg9IjE5OCIgaGVpZ2h0PSIzMiIgY2xhc3M9Im5vbnRlcm1pbmFsIi8+CiAgICA8dGV4dCBjbGFzcz0ibm9udGVybWluYWwiIHg9IjEzMSIgeT0iMjEiPnNvbWVDcmVhdGVUYWJsZVN0YXRlbWVudDwvdGV4dD48L2E+PHJlY3QgeD0iMzQxIiB5PSIzIiB3aWR0aD0iOTIiIGhlaWdodD0iMzIiIHJ4PSIxMCIvPgogICAgPHJlY3QgeD0iMzM5IiB5PSIxIiB3aWR0aD0iOTIiIGhlaWdodD0iMzIiIGNsYXNzPSJ0ZXJtaW5hbCIgcng9IjEwIi8+CiAgICA8dGV4dCBjbGFzcz0idGVybWluYWwiIHg9IjM0OSIgeT0iMjEiPnRpbWVzdGFtcDwvdGV4dD4KICAgIDxyZWN0IHg9IjQ1MyIgeT0iMyIgd2lkdGg9IjI2IiBoZWlnaHQ9IjMyIiByeD0iMTAiLz4KICAgIDxyZWN0IHg9IjQ1MSIgeT0iMSIgd2lkdGg9IjI2IiBoZWlnaHQ9IjMyIiBjbGFzcz0idGVybWluYWwiIHJ4PSIxMCIvPgogICAgPHRleHQgY2xhc3M9InRlcm1pbmFsIiB4PSI0NjEiIHk9IjIxIj4oPC90ZXh0PjxhIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bGluazpocmVmPSIjY29sdW1uTmFtZSIgeGxpbms6dGl0bGU9ImNvbHVtbk5hbWUiPgogICAgPHJlY3QgeD0iNDk5IiB5PSIzIiB3aWR0aD0iMTAyIiBoZWlnaHQ9IjMyIi8+CiAgICA8cmVjdCB4PSI0OTciIHk9IjEiIHdpZHRoPSIxMDIiIGhlaWdodD0iMzIiIGNsYXNzPSJub250ZXJtaW5hbCIvPgogICAgPHRleHQgY2xhc3M9Im5vbnRlcm1pbmFsIiB4PSI1MDciIHk9IjIxIj5jb2x1bW5OYW1lPC90ZXh0PjwvYT48cmVjdCB4PSI2MjEiIHk9IjMiIHdpZHRoPSIyNiIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSI2MTkiIHk9IjEiIHdpZHRoPSIyNiIgaGVpZ2h0PSIzMiIgY2xhc3M9InRlcm1pbmFsIiByeD0iMTAiLz4KICAgIDx0ZXh0IGNsYXNzPSJ0ZXJtaW5hbCIgeD0iNjI5IiB5PSIyMSI+KTwvdGV4dD4KICAgIDxwYXRoIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJsaW5lIiBkPSJtMTcgMTcgaDIgbTAgMCBoMTAgbTcyIDAgaDEwIG0wIDAgaDEwIG0xOTggMCBoMTAgbTAgMCBoMTAgbTkyIDAgaDEwIG0wIDAgaDEwIG0yNiAwIGgxMCBtMCAwIGgxMCBtMTAyIDAgaDEwIG0wIDAgaDEwIG0yNiAwIGgxMCBtMyAwIGgtMyIvPgogICAgPHBvbHlnb24gcG9pbnRzPSI2NjUgMTcgNjczIDEzIDY3MyAyMSIvPgogICAgPHBvbHlnb24gcG9pbnRzPSI2NjUgMTcgNjU3IDEzIDY1NyAyMSIvPjwvc3ZnPgo="}}]);