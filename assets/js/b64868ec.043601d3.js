"use strict";(self.webpackChunkquestdb_io=self.webpackChunkquestdb_io||[]).push([[9065],{3905:function(e,I,t){t.d(I,{Zo:function(){return c},kt:function(){return s}});var g=t(67294);function n(e,I,t){return I in e?Object.defineProperty(e,I,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[I]=t,e}function r(e,I){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);I&&(g=g.filter((function(I){return Object.getOwnPropertyDescriptor(e,I).enumerable}))),t.push.apply(t,g)}return t}function i(e){for(var I=1;I<arguments.length;I++){var t=null!=arguments[I]?arguments[I]:{};I%2?r(Object(t),!0).forEach((function(I){n(e,I,t[I])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(I){Object.defineProperty(e,I,Object.getOwnPropertyDescriptor(t,I))}))}return e}function a(e,I){if(null==e)return{};var t,g,n=function(e,I){if(null==e)return{};var t,g,n={},r=Object.keys(e);for(g=0;g<r.length;g++)t=r[g],I.indexOf(t)>=0||(n[t]=e[t]);return n}(e,I);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(g=0;g<r.length;g++)t=r[g],I.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var C=g.createContext({}),l=function(e){var I=g.useContext(C),t=I;return e&&(t="function"==typeof e?e(I):i(i({},I),e)),t},c=function(e){var I=l(e.components);return g.createElement(C.Provider,{value:I},e.children)},A={inlineCode:"code",wrapper:function(e){var I=e.children;return g.createElement(g.Fragment,{},I)}},o=g.forwardRef((function(e,I){var t=e.components,n=e.mdxType,r=e.originalType,C=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),o=l(t),s=n,d=o["".concat(C,".").concat(s)]||o[s]||A[s]||r;return t?g.createElement(d,i(i({ref:I},c),{},{components:t})):g.createElement(d,i({ref:I},c))}));function s(e,I){var t=arguments,n=I&&I.mdxType;if("string"==typeof e||n){var r=t.length,i=new Array(r);i[0]=o;var a={};for(var C in I)hasOwnProperty.call(I,C)&&(a[C]=I[C]);a.originalType=e,a.mdxType="string"==typeof e?e:n,i[1]=a;for(var l=2;l<r;l++)i[l]=t[l];return g.createElement.apply(null,i)}return g.createElement.apply(null,t)}o.displayName="MDXCreateElement"},87599:function(e,I,t){t.r(I),t.d(I,{frontMatter:function(){return a},metadata:function(){return C},toc:function(){return l},default:function(){return A}});var g=t(83117),n=t(80102),r=(t(67294),t(3905)),i=["components"],a={title:"BACKUP keyword",sidebar_label:"BACKUP",description:"BACKUP SQL keyword reference documentation."},C={unversionedId:"reference/sql/backup",id:"reference/sql/backup",isDocsHomePage:!1,title:"BACKUP keyword",description:"BACKUP SQL keyword reference documentation.",source:"@site/docs/reference/sql/backup.md",sourceDirName:"reference/sql",slug:"/reference/sql/backup",permalink:"/docs/reference/sql/backup",editUrl:"https://github.com/turpleio/homepage/edit/main/docs/reference/sql/backup.md",version:"current",sidebar_label:"BACKUP",frontMatter:{title:"BACKUP keyword",sidebar_label:"BACKUP",description:"BACKUP SQL keyword reference documentation."},sidebar:"docs",previous:{title:"ALTER TABLE COLUMN CACHE | NOCACHE",permalink:"/docs/reference/sql/alter-table-alter-column-cache"},next:{title:"CASE keyword",permalink:"/docs/reference/sql/case"}},l=[{value:"Syntax",id:"syntax",children:[]},{value:"Backup directory",id:"backup-directory",children:[]},{value:"Examples",id:"examples",children:[]}],c={toc:l};function A(e){var I=e.components,a=(0,n.Z)(e,i);return(0,r.kt)("wrapper",(0,g.Z)({},c,a,{components:I,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Creates a backup for one, several, or all database tables."),(0,r.kt)("h2",{id:"syntax"},"Syntax"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Flow chart showing the syntax of the BACKUP keyword",src:t(89791).Z})),(0,r.kt)("h2",{id:"backup-directory"},"Backup directory"),(0,r.kt)("p",null,"Backing up a database or tables requires a ",(0,r.kt)("strong",{parentName:"p"},"backup directory")," which is set\nusing the ",(0,r.kt)("inlineCode",{parentName:"p"},"cairo.sql.backup.root"),"\n",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/configuration"},"configuration key")," in a\n",(0,r.kt)("a",{parentName:"p",href:"/docs/concept/root-directory-structure#serverconf"},"server.conf")," file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell",metastring:'title="server.conf"',title:'"server.conf"'},"cairo.sql.backup.root=/Users/UserName/Desktop\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"backup directory")," can be on a disk local to the server, a remote disk or\na remote filesystem. QuestDB will enforce that the backup is only written in a\nlocation relative to the ",(0,r.kt)("inlineCode",{parentName:"p"},"backup directory"),". This is a security feature to\ndisallow random file access by QuestDB."),(0,r.kt)("p",null,"The tables will be written in a directory with today's date with the default\nformat ",(0,r.kt)("inlineCode",{parentName:"p"},"yyyy-MM-dd")," (e.g., ",(0,r.kt)("inlineCode",{parentName:"p"},"2020-04-20"),"). A custom date format can be specified\nusing the ",(0,r.kt)("inlineCode",{parentName:"p"},"cairo.sql.backup.dir.datetime.format"),"\n",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/configuration"},"configuration key"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell",metastring:'title="server.conf"',title:'"server.conf"'},"cairo.sql.backup.dir.datetime.format=yyyy-dd-MM\n")),(0,r.kt)("p",null,"Given a ",(0,r.kt)("inlineCode",{parentName:"p"},"BACKUP")," query run on ",(0,r.kt)("inlineCode",{parentName:"p"},"2021-02-25"),", the data and metadata files will be\nwritten following the\n",(0,r.kt)("a",{parentName:"p",href:"/docs/concept/root-directory-structure#db"},"db directory structure")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-filestructure",metastring:'title="/path/to/backup_directory"',title:'"/path/to/backup_directory"'},"\u251c\u2500\u2500 2021-02-25\n\u2502\xa0\xa0 \u251c\u2500\u2500 table1\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 ...\n\u2502\xa0\xa0 \u251c\u2500\u2500 table2\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 ...\n\u2502\xa0\xa0 \u251c\u2500\u2500 table3\n\u2502\xa0\xa0 ...\n")),(0,r.kt)("p",null,"If a user performs several backups on the same date, each backup will be written\na new directory. Subsequent backups on the same date will look as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-filestructure",metastring:'title="/path/to/backup_directory"',title:'"/path/to/backup_directory"'},"\u251c\u2500\u2500 2021-02-22    'first'\n\u251c\u2500\u2500 2021-02-22.1  'second'\n\u251c\u2500\u2500 2021-02-22.2  'third'\n\u251c\u2500\u2500 2021-02-24    'first new date'\n\u251c\u2500\u2500 2021-02-24.1  'first new date'\n\u2502\xa0\xa0 ...\n")),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="Single table"',title:'"Single','table"':!0},"BACKUP TABLE table1;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="Multiple tables"',title:'"Multiple','tables"':!0},"BACKUP TABLE table1, table2, table3;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="All tables"',title:'"All','tables"':!0},"BACKUP DATABASE;\n")))}A.isMDXComponent=!0},89791:function(e,I){I.Z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NDciIGhlaWdodD0iMTI1Ij4KICAgIDxkZWZzPgogICAgICAgIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CiAgICAgICAgICAgIEBuYW1lc3BhY2UgImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIjsKICAgICAgICAgICAgICAgIC5saW5lICAgICAgICAgICAgICAgICB7ZmlsbDogbm9uZTsgc3Ryb2tlOiAjNjM2MjczO30KICAgICAgICAgICAgICAgIC5ib2xkLWxpbmUgICAgICAgICAgICB7c3Ryb2tlOiAjNjM2MjczOyBzaGFwZS1yZW5kZXJpbmc6IGNyaXNwRWRnZXM7IHN0cm9rZS13aWR0aDogMjsgfQogICAgICAgICAgICAgICAgLnRoaW4tbGluZSAgICAgICAgICAgIHtzdHJva2U6ICM2MzYyNzM7IHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlc30KICAgICAgICAgICAgICAgIC5maWxsZWQgICAgICAgICAgICAgICB7ZmlsbDogIzYzNjI3Mzsgc3Ryb2tlOiBub25lO30KICAgICAgICAgICAgICAgIHRleHQudGVybWluYWwgICAgICAgICB7Zm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgIlNlZ29lIFVJIiwgUm9ib3RvLCBVYnVudHUsIENhbnRhcmVsbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOwogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICAgICAgZmlsbDogI2ZmZmZmZjsKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGV4dC5ub250ZXJtaW5hbCAgICAgIHtmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBSb2JvdG8sIFVidW50dSwgQ2FudGFyZWxsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgICAgICBmaWxsOiAjZTI4OWE0OwogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRleHQucmVnZXhwICAgICAgICAgICB7Zm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgIlNlZ29lIFVJIiwgUm9ib3RvLCBVYnVudHUsIENhbnRhcmVsbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOwogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICAgICAgZmlsbDogIzAwMTQxRjsKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZWN0LCBjaXJjbGUsIHBvbHlnb24ge2ZpbGw6IG5vbmU7IHN0cm9rZTogbm9uZTt9CiAgICAgICAgICAgICAgICByZWN0LnRlcm1pbmFsICAgICAgICAge2ZpbGw6IG5vbmU7IHN0cm9rZTogI2JlMmY1Yjt9CiAgICAgICAgICAgICAgICByZWN0Lm5vbnRlcm1pbmFsICAgICAge2ZpbGw6IHJnYmEoMjU1LDI1NSwyNTUsMC4xKTsgc3Ryb2tlOiBub25lO30KICAgICAgICAgICAgICAgIHJlY3QudGV4dCAgICAgICAgICAgICB7ZmlsbDogbm9uZTsgc3Ryb2tlOiBub25lO30KICAgICAgICAgICAgICAgIHBvbHlnb24ucmVnZXhwICAgICAgICB7ZmlsbDogI0M3RUNGRjsgc3Ryb2tlOiAjMDM4Y2JjO30KICAgICAgICA8L3N0eWxlPgogICAgPC9kZWZzPgogICAgPHBvbHlnb24gcG9pbnRzPSI5IDYxIDEgNTcgMSA2NSIvPgogICAgPHBvbHlnb24gcG9pbnRzPSIxNyA2MSA5IDU3IDkgNjUiLz4KICAgIDxyZWN0IHg9IjMxIiB5PSI0NyIgd2lkdGg9Ijc0IiBoZWlnaHQ9IjMyIiByeD0iMTAiLz4KICAgIDxyZWN0IHg9IjI5IiB5PSI0NSIgd2lkdGg9Ijc0IiBoZWlnaHQ9IjMyIiBjbGFzcz0idGVybWluYWwiIHJ4PSIxMCIvPgogICAgPHRleHQgY2xhc3M9InRlcm1pbmFsIiB4PSIzOSIgeT0iNjUiPkJBQ0tVUDwvdGV4dD4KICAgIDxyZWN0IHg9IjE0NSIgeT0iNDciIHdpZHRoPSI2MiIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSIxNDMiIHk9IjQ1IiB3aWR0aD0iNjIiIGhlaWdodD0iMzIiIGNsYXNzPSJ0ZXJtaW5hbCIgcng9IjEwIi8+CiAgICA8dGV4dCBjbGFzcz0idGVybWluYWwiIHg9IjE1MyIgeT0iNjUiPlRBQkxFPC90ZXh0PjxhIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bGluazpocmVmPSIjdGFibGVOYW1lIiB4bGluazp0aXRsZT0idGFibGVOYW1lIj4KICAgIDxyZWN0IHg9IjI0NyIgeT0iNDciIHdpZHRoPSI4OCIgaGVpZ2h0PSIzMiIvPgogICAgPHJlY3QgeD0iMjQ1IiB5PSI0NSIgd2lkdGg9Ijg4IiBoZWlnaHQ9IjMyIiBjbGFzcz0ibm9udGVybWluYWwiLz4KICAgIDx0ZXh0IGNsYXNzPSJub250ZXJtaW5hbCIgeD0iMjU1IiB5PSI2NSI+dGFibGVOYW1lPC90ZXh0PjwvYT48cmVjdCB4PSIyNDciIHk9IjMiIHdpZHRoPSIyNCIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSIyNDUiIHk9IjEiIHdpZHRoPSIyNCIgaGVpZ2h0PSIzMiIgY2xhc3M9InRlcm1pbmFsIiByeD0iMTAiLz4KICAgIDx0ZXh0IGNsYXNzPSJ0ZXJtaW5hbCIgeD0iMjU1IiB5PSIyMSI+LDwvdGV4dD4KICAgIDxyZWN0IHg9IjE0NSIgeT0iOTEiIHdpZHRoPSI5MiIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSIxNDMiIHk9Ijg5IiB3aWR0aD0iOTIiIGhlaWdodD0iMzIiIGNsYXNzPSJ0ZXJtaW5hbCIgcng9IjEwIi8+CiAgICA8dGV4dCBjbGFzcz0idGVybWluYWwiIHg9IjE1MyIgeT0iMTA5Ij5EQVRBQkFTRTwvdGV4dD4KICAgIDxyZWN0IHg9IjM5NSIgeT0iNDciIHdpZHRoPSIyNCIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSIzOTMiIHk9IjQ1IiB3aWR0aD0iMjQiIGhlaWdodD0iMzIiIGNsYXNzPSJ0ZXJtaW5hbCIgcng9IjEwIi8+CiAgICA8dGV4dCBjbGFzcz0idGVybWluYWwiIHg9IjQwMyIgeT0iNjUiPjs8L3RleHQ+CiAgICA8cGF0aCB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0ibGluZSIgZD0ibTE3IDYxIGgyIG0wIDAgaDEwIG03NCAwIGgxMCBtMjAgMCBoMTAgbTYyIDAgaDEwIG0yMCAwIGgxMCBtODggMCBoMTAgbS0xMjggMCBsMjAgMCBtLTEgMCBxLTkgMCAtOSAtMTAgbDAgLTI0IHEwIC0xMCAxMCAtMTAgbTEwOCA0NCBsMjAgMCBtLTIwIDAgcTEwIDAgMTAgLTEwIGwwIC0yNCBxMCAtMTAgLTEwIC0xMCBtLTEwOCAwIGgxMCBtMjQgMCBoMTAgbTAgMCBoNjQgbS0yMzAgNDQgaDIwIG0yMzAgMCBoMjAgbS0yNzAgMCBxMTAgMCAxMCAxMCBtMjUwIDAgcTAgLTEwIDEwIC0xMCBtLTI2MCAxMCB2MjQgbTI1MCAwIHYtMjQgbS0yNTAgMjQgcTAgMTAgMTAgMTAgbTIzMCAwIHExMCAwIDEwIC0xMCBtLTI0MCAxMCBoMTAgbTkyIDAgaDEwIG0wIDAgaDExOCBtMjAgLTQ0IGgxMCBtMjQgMCBoMTAgbTMgMCBoLTMiLz4KICAgIDxwb2x5Z29uIHBvaW50cz0iNDM3IDYxIDQ0NSA1NyA0NDUgNjUiLz4KICAgIDxwb2x5Z29uIHBvaW50cz0iNDM3IDYxIDQyOSA1NyA0MjkgNjUiLz48L3N2Zz4K"}}]);