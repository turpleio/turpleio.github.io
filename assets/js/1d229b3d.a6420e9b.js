"use strict";(self.webpackChunkquestdb_io=self.webpackChunkquestdb_io||[]).push([[9724],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=u(n),m=a,g=c["".concat(l,".").concat(m)]||c[m]||d[m]||o;return n?r.createElement(g,i(i({ref:t},p),{},{components:n})):r.createElement(g,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},40244:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return l},toc:function(){return u},default:function(){return d}});var r=n(83117),a=n(80102),o=(n(67294),n(3905)),i=["components"],s={title:"QuestDB 5.0.6 Release Highlights, January 2021",author:"Brian Smith",author_title:"QuestDB Team",author_url:"https://github.com/bsmth",author_image_url:"https://avatars.githubusercontent.com/bsmth",description:"We've released version 5.0.6 and here's the highlights including PostgreSQL wire improvements, SQL additions and new functions for troubleshooting",keywords:["postgres","timeseries","database"],image:"/img/blog/2021-02-05/og.png",tags:["postgres","release","rust","golang"]},l={permalink:"/blog/2021/02/05/questdb-release-5-0-6-postgres-wire",source:"@site/blog/2021-02-05-questdb-release-5-0-6-postgres-wire.md",title:"QuestDB 5.0.6 Release Highlights, January 2021",description:"We've released version 5.0.6 and here's the highlights including PostgreSQL wire improvements, SQL additions and new functions for troubleshooting",date:"2021-02-05T00:00:00.000Z",formattedDate:"February 5, 2021",tags:[{label:"postgres",permalink:"/blog/tags/postgres"},{label:"release",permalink:"/blog/tags/release"},{label:"rust",permalink:"/blog/tags/rust"},{label:"golang",permalink:"/blog/tags/golang"}],readingTime:2.36,truncated:!0,prevItem:{title:"Realtime crypto tracker with Kafka and QuestDB",permalink:"/blog/2021/02/18/realtime-crypto-tracker-with-kafka-and-questdb"},nextItem:{title:"Stream heart rate data into QuestDB via Google IoT Core",permalink:"/blog/2021/02/05/streaming-heart-rate-data-with-iot-core-and-questdb"}},u=[{value:"Improving PostgreSQL wire protocol support",id:"improving-postgresql-wire-protocol-support",children:[]},{value:"Adding Grafana alerting",id:"adding-grafana-alerting",children:[]},{value:"Easily showing build details",id:"easily-showing-build-details",children:[]},{value:"CREATE TABLE IF NOT EXISTS",id:"create-table-if-not-exists",children:[]},{value:"Error prevention when disk full",id:"error-prevention-when-disk-full",children:[]},{value:"See more details on the release",id:"see-more-details-on-the-release",children:[]}],p={toc:u};function d(e){var t=e.components,s=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"We've just released software version 5.0.6 and it comes with plenty of\nadditional features and functionality, a full refactoring of PostgreSQL wire\nsupport, and multiple fixes to improve the stability of the system. Here's a\nroundup of recent changes that have just landed."),(0,o.kt)("h2",{id:"improving-postgresql-wire-protocol-support"},"Improving PostgreSQL wire protocol support"),(0,o.kt)("p",null,"The complete refactoring of PostgreSQL wire protocol, including binary support,\nmeans improved usability for many popular libraries and languages."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="Parameterized queries in Python"',title:'"Parameterized',queries:!0,in:!0,'Python"':!0},'# insert 10 records\nfor x in range(10):\n  now = dt.datetime.utcnow()\n  date = dt.datetime.now().date()\n  cursor.execute("""\n    INSERT INTO trades\n    VALUES (%s, %s, %s, %s);\n    """, (now, date, "python example", x))\n# commit records\nconnection.commit()\n')),(0,o.kt)("p",null,"Users can now use prepared statements (bind variables), which allows for better\nefficiency on repeated queries:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust",metastring:'title="Prepared statement in Rust"',title:'"Prepared',statement:!0,in:!0,'Rust"':!0},'    // Prepared statement\n    let mut txn = client.transaction()?;\n    let statement = txn.prepare("insert into trades values ($1,$2,$3,$4)")?;\n    for value in 0..10 {\n        let utc = Utc::now();\n        let sys_time = SystemTime::now();\n        txn.execute(&statement, &[&utc.naive_local(), &sys_time, &name, &value])?;\n    }\n    txn.commit()?;\n\n')),(0,o.kt)("p",null,"The documentation pages have more complete code examples which show how to\n",(0,o.kt)("a",{parentName:"p",href:"/docs/develop/insert-data#postgresql-wire-protocol"},"insert data")," and\n",(0,o.kt)("a",{parentName:"p",href:"/docs/develop/insert-data#postgresql-wire-protocol"},"query Data")," using popular\ntools and frameworks in Node, Go, Rust, Java and Python."),(0,o.kt)("h2",{id:"adding-grafana-alerting"},"Adding Grafana alerting"),(0,o.kt)("p",null,"Support for the RFC339Nano timestamp format enables the use of alerting via\nGrafana. This helps identify unintended changes, minimize disruptions and stay\non top of your system or infrastructure:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Alerts being triggered in Grafana based on data in QuestDB",src:n(28358).Z})),(0,o.kt)("h2",{id:"easily-showing-build-details"},"Easily showing build details"),(0,o.kt)("p",null,"There's now a function built-in that provides the current server version number\nand commit hash for troubleshooting. It can be run with the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-questdb-sql"},"SELECT build();\n")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"A screenshot of running a function inside the QuestDB Web Console",src:n(91109).Z})),(0,o.kt)("h2",{id:"create-table-if-not-exists"},"CREATE TABLE IF NOT EXISTS"),(0,o.kt)("p",null,"This language feature adds more flexibility in cases where ",(0,o.kt)("inlineCode",{parentName:"p"},"CREATE TABLE"),"\nqueries are run and tables already exist:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-questdb-sql"},"CREATE TABLE IF NOT EXISTS my_table (ts TIMESTAMP, value INT) timestamp(ts);\n")),(0,o.kt)("p",null,"Full examples using this statement in multiple languages can be found on the\n",(0,o.kt)("a",{parentName:"p",href:"/docs/develop/insert-data#postgresql-wire-protocol"},"Insert data")," page."),(0,o.kt)("h2",{id:"error-prevention-when-disk-full"},"Error prevention when disk full"),(0,o.kt)("p",null,"Even better than good error reporting is error prevention! This fix enhances the\nresilience of the system by preventing data loss in QuestDB instances if disk\nspace unexpectedly runs out."),(0,o.kt)("h2",{id:"see-more-details-on-the-release"},"See more details on the release"),(0,o.kt)("p",null,"These have been our top picks from the 5.0.6 release which cover what our users\nhave been most excited about recently but there are a lot more changes that have\nbeen omitted here. For a full list of the fixes, features and improvements that\nwe've added, take a look\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/questdb/questdb/releases/tag/5.0.6"},"at the GitHub Release"),"."),(0,o.kt)("p",null,"If you like our new additions or have a burning suggestion for upcoming changes,\nwe'd love to know your thoughts! Feel free to share your feedback\n",(0,o.kt)("a",{parentName:"p",href:"https://"},"in our Slack Community")," and don't forget to drop us a star\n",(0,o.kt)("a",{parentName:"p",href:"https://"},"on GitHub"),"."))}d.isMDXComponent=!0},91109:function(e,t,n){t.Z=n.p+"assets/images/build-function-0c6e35f1ed2c15ee05114ad18fe5f365.png"},28358:function(e,t,n){t.Z=n.p+"assets/images/grafana-alerts-16e0a67a243827c4991f664b5cb9e318.png"}}]);