"use strict";(self.webpackChunkquestdb_io=self.webpackChunkquestdb_io||[]).push([[8533],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return d}});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),l=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=l(n),d=o,h=p["".concat(u,".").concat(d)]||p[d]||m[d]||a;return n?r.createElement(h,i(i({ref:t},c),{},{components:n})):r.createElement(h,i({ref:t},c))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=p;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},33366:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},metadata:function(){return c},toc:function(){return m},default:function(){return d}});var r=n(83117),o=n(80102),a=(n(67294),n(3905)),i=n(46092),s=n(72525),u=["components"],l={title:"QuestDB 6.1.3 December release, Prometheus improvements",author:"Brian Smith",author_title:"QuestDB Engineering",author_url:"https://github.com/bsmth",author_image_url:"https://avatars.githubusercontent.com/bsmth",description:"We've released version 6.1.3 and here's the highlights including Prometheus metrics, Prometheus Alertmanager support, SQL additions and Monaco Editor support.",keywords:["prometheus","alertmanager","vscode","monaco","timeseries","database"],image:"/img/blog/2021-12-20/banner.png",tags:["release","team","prometheus"]},c={permalink:"/blog/2021/12/20/release-prometheus-alertmanager",source:"@site/blog/2021-12-20-release-prometheus-alertmanager.md",title:"QuestDB 6.1.3 December release, Prometheus improvements",description:"We've released version 6.1.3 and here's the highlights including Prometheus metrics, Prometheus Alertmanager support, SQL additions and Monaco Editor support.",date:"2021-12-20T00:00:00.000Z",formattedDate:"December 20, 2021",tags:[{label:"release",permalink:"/blog/tags/release"},{label:"team",permalink:"/blog/tags/team"},{label:"prometheus",permalink:"/blog/tags/prometheus"}],readingTime:3.25,truncated:!0,prevItem:{title:"Our two-year journey to raise $15m in venture capital",permalink:"/blog/2022/01/03/two-year-journey-raising-15m-venture-capital"},nextItem:{title:"Comparing InfluxDB and QuestDB databases",permalink:"/blog/2021/11/29/questdb-versus-influxdb"}},m=[{value:"Monaco Editor from VS Code in QuestDB UI",id:"monaco-editor-from-vs-code-in-questdb-ui",children:[]},{value:"Prometheus metrics",id:"prometheus-metrics",children:[]},{value:"Prometheus Alertmanager",id:"prometheus-alertmanager",children:[]},{value:"SQL syntax for bulk inserts",id:"sql-syntax-for-bulk-inserts",children:[]},{value:"Automatic SQL query timeout",id:"automatic-sql-query-timeout",children:[]},{value:"Next up",id:"next-up",children:[]}],p={toc:m};function d(e){var t=e.components,n=(0,o.Z)(e,u);return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)(i.Z,{alt:"Latest features in QuestDB version 6.1.3 including Prometheus and Alertmanager",height:360,src:"/img/blog/2021-12-20/banner.png",width:650,mdxType:"Banner"}),(0,a.kt)("p",null,"We've just published 6.1.3 and it includes Prometheus Alertmanager support, new\ncounters in the Prometheus endpoint for memory info, automatic query timeout,\nMonaco as the new SQL editor for QuestDB's web interface, and more UI additions.\nHere's a roundup of changes that have just landed in the latest and greatest\nversion!"),(0,a.kt)("h2",{id:"monaco-editor-from-vs-code-in-questdb-ui"},"Monaco Editor from VS Code in QuestDB UI"),(0,a.kt)("p",null,"The SQL editor in QuestDB's web console now includes the\n",(0,a.kt)("a",{parentName:"p",href:"https://microsoft.github.io/monaco-editor/"},"Monaco Editor that powers VS Code"),".\nUpgrading the SQL editor to use the Monaco Editor brings with it many\nimprovements and functionality that comes by default with VS Code, so now you\nget convenient features like bracket matching, find and replace-all, multiple\ncursor selection, and more right out of the box:"),(0,a.kt)(i.Z,{alt:"Find all functionality in the Monaco Editor within QuestDB",height:360,src:"/img/blog/2021-12-20/monaco.png",width:650,mdxType:"Banner"}),(0,a.kt)("p",null,"For more information on using the Monaco Editor in QuestDB, type ",(0,a.kt)("kbd",null,"F1"),"\nin QuestDB's web console, or refer to the official\n",(0,a.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/docs/editor/codebasics"},"Monaco documentation"),"."),(0,a.kt)("h2",{id:"prometheus-metrics"},"Prometheus metrics"),(0,a.kt)("p",null,"Prometheus is an open-source systems monitoring and alerting toolkit which\ncollects and stores metrics as time series data. Prometheus collects small\npieces of data about many components to help build a picture of the state and\ntrajectory of a system. The scraped metrics are stored, and rules can be applied\nto aggregate and generate new metrics from existing data or generate alerts\nbased on user-defined triggers."),(0,a.kt)("p",null,"QuestDB has a ",(0,a.kt)("inlineCode",{parentName:"p"},"/metrics")," HTTP endpoint on port ",(0,a.kt)("inlineCode",{parentName:"p"},"9003")," which provide counters in\nPrometheus format. Prometheus can be used to visualize and graph QuestDB metrics\nprefixed with ",(0,a.kt)("inlineCode",{parentName:"p"},"questdb_"),":"),(0,a.kt)(s.Z,{alt:"Prometheus graphing tab showing QuestDB instance metrics on a chart",height:320,src:"/img/guides/prometheus/graphing-metrics.png",width:750,mdxType:"Screenshot"}),(0,a.kt)("p",null,"For more information on configuring QuestDB and Prometheus to graph QuestDB\nmetrics, see the ",(0,a.kt)("a",{parentName:"p",href:"/docs/third-party-tools/prometheus"},"Prometheus documentation"),"\nfor examples and hints for setup and configuration."),(0,a.kt)("h2",{id:"prometheus-alertmanager"},"Prometheus Alertmanager"),(0,a.kt)("p",null,"Release 6.1.3 introduces a new log writer for QuestDB that sends any message to\nPrometheus\n",(0,a.kt)("a",{parentName:"p",href:"https://prometheus.io/docs/alerting/latest/alertmanager/"},"Alertmanager"),". To\nconfigure this writer, add it to the ",(0,a.kt)("inlineCode",{parentName:"p"},"writers")," config alongside other log\nwriters. Details on logging configuration can be found on the\n",(0,a.kt)("a",{parentName:"p",href:"/docs/reference/configuration#configuration-file"},"server configuration documentation"),"."),(0,a.kt)("p",null,"Configuring that QuestDB should send alerts to Alertmanager alerting is done in\nQuestDB's log config with the address and port for Alertmanager:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ini",metastring:'title="./conf/log.conf"',title:'"./conf/log.conf"'},"# Which writers to enable\nwriters=stdout,alert\n\n# Prometheus Alertmanager\nw.alert.class=io.questdb.log.LogAlertSocketWriter\nw.alert.level=CRITICAL\nw.alert.alertTargets=172.17.0.2:9093\n")),(0,a.kt)("p",null,"For details on configuring QuestDB to send alerts to Alertmanager, see the\n",(0,a.kt)("a",{parentName:"p",href:"/docs/third-party-tools/prometheus"},"Prometheus documentation")," for examples and\nguides for setup and configuration."),(0,a.kt)("h2",{id:"sql-syntax-for-bulk-inserts"},"SQL syntax for bulk inserts"),(0,a.kt)("p",null,"It's now possible to bulk insert vales into a table via SQL. This functionality\nfollows the 'multirow' ",(0,a.kt)("inlineCode",{parentName:"p"},"VALUES")," syntax used in PostgreSQL and acts as an\naccelerator when inserting data in bulk:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-questdb-sql"},"CREATE TABLE my_table(id SYMBOL index, val DOUBLE,ts TIMESTAMP)\n  timestamp(ts);\n\nINSERT INTO my_table\nVALUES\n    ('d1', 101.1, '2021-10-05T11:31:35.878Z'),\n    ('d1', 101.2, '2021-10-05T12:31:35.878Z'),\n    ('d2', 201.2, '2021-10-05T12:31:35.878Z'),\n    ('d2', 201.3, '2021-10-05T13:31:35.878Z'),\n    ('d2', 201.4, '2021-10-05T14:31:35.878Z');\n")),(0,a.kt)("h2",{id:"automatic-sql-query-timeout"},"Automatic SQL query timeout"),(0,a.kt)("p",null,"Users can now define automatic timeouts for SQL queries via server\nconfiguration. This is set using the ",(0,a.kt)("inlineCode",{parentName:"p"},"query.timeout.sec")," server configuration\nand is a global timeout in seconds used for long-running queries. For more\ninformation on setting this parameter, see the\n",(0,a.kt)("a",{parentName:"p",href:"/docs/reference/configuration"},"server configuration documentation"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ini",metastring:'title="/path/to/server.conf"',title:'"/path/to/server.conf"'},"# Default is 60 sec\nquery.timeout.sec=60\n")),(0,a.kt)("h2",{id:"next-up"},"Next up"),(0,a.kt)("p",null,"The team will be adding Java 17 support in the next release, meanwhile, we're\nworking on ",(0,a.kt)("inlineCode",{parentName:"p"},"UPDATE"),"/",(0,a.kt)("inlineCode",{parentName:"p"},"DELETE")," support, a JIT (Just-in-time) compiler for filters,\nand more stability improvements on InfluxDB line protocol."),(0,a.kt)("p",null,"We hope you enjoyed the features and functionality in version 6.1.3. See the\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/questdb/questdb/releases/tag/6.1.3"},"release notes on GitHub"),"\nfor the complete list of additions and fixes. We\u2019re eagerly awaiting your\nfeedback, so feel free to reach out and let us know how it's running. You can\nlet us know how we're doing or just come by and say hello\n",(0,a.kt)("a",{parentName:"p",href:"https://"},"in our Slack Community")," or browse the repository\n",(0,a.kt)("a",{parentName:"p",href:"https://"},"on GitHub"),"."))}d.isMDXComponent=!0},86010:function(e,t,n){function r(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function o(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o}n.d(t,{Z:function(){return o}})}}]);