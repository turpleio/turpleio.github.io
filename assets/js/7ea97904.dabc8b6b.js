"use strict";(self.webpackChunkquestdb_io=self.webpackChunkquestdb_io||[]).push([[6631],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=u(n),h=i,m=c["".concat(l,".").concat(h)]||c[h]||d[h]||o;return n?a.createElement(m,r(r({ref:t},p),{},{components:n})):a.createElement(m,r({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var u=2;u<o;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},84163:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},metadata:function(){return u},toc:function(){return p},default:function(){return c}});var a=n(83117),i=n(80102),o=(n(67294),n(3905)),r=n(72525),s=["components"],l={title:"QuestDB 6.0.5 September release, geospatial support",author:"Brian Smith",author_title:"QuestDB Team",author_url:"https://github.com/bsmth",author_image_url:"https://avatars.githubusercontent.com/bsmth",description:"QuestDB 6.0.5 is available now and includes support for geospatial data with the introduction of geohash support for fast and efficient geodata queries and storage.",keywords:["postgres","geohash","timeseries","database"],image:"/img/blog/2021-09-13/banner.png",tags:["release","geospatial","influxdb"]},u={permalink:"/blog/2021/09/13/release-6-0-5-geospatial-data",source:"@site/blog/2021-09-13-release-6-0-5-geospatial-data.md",title:"QuestDB 6.0.5 September release, geospatial support",description:"QuestDB 6.0.5 is available now and includes support for geospatial data with the introduction of geohash support for fast and efficient geodata queries and storage.",date:"2021-09-13T00:00:00.000Z",formattedDate:"September 13, 2021",tags:[{label:"release",permalink:"/blog/tags/release"},{label:"geospatial",permalink:"/blog/tags/geospatial"},{label:"influxdb",permalink:"/blog/tags/influxdb"}],readingTime:4.14,truncated:!0,prevItem:{title:"High frequency finance with Julia and QuestDB",permalink:"/blog/2021/09/17/high-frequency-finance-julia-lang"},nextItem:{title:"Launch a QuestDB droplet in 1-click via the DigitalOcean marketplace",permalink:"/blog/2021/08/24/digitalocean-droplet"}},p=[{value:"QuestDB 6.0.5",id:"questdb-605",children:[{value:"Geospatial support via geohashes",id:"geospatial-support-via-geohashes",children:[]},{value:"first() and last() functions",id:"first-and-last-functions",children:[]},{value:"Timestamp floor and ceiling functions",id:"timestamp-floor-and-ceiling-functions",children:[]},{value:"Out-of-order parameters via REST API",id:"out-of-order-parameters-via-rest-api",children:[]}]},{value:"Run QuestDB 6.0.5",id:"run-questdb-605",children:[]},{value:"Next up",id:"next-up",children:[]}],d={toc:p};function c(e){var t=e.components,n=(0,i.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The latest QuestDB release introduces support for geospatial data via the\naddition of geohash types. Geohashes encode geographic areas as base-32 strings,\nand native support for this type allows for fast and efficient querying and\nstorage of geodata. Also included are helper functions for rounding timestamps,\nperformance improvements for existing functions, alongside other fixes and\nfeatures. Here's the full roundup of changes that have just landed!"),(0,o.kt)("h2",{id:"questdb-605"},"QuestDB 6.0.5"),(0,o.kt)("p",null,"The addition of geospatial data in QuestDB opens up various possibilities to\ninclude spatial dimensions in data sets in QuestDB. We're excited at the options\nfor using QuestDB in different new use cases such as asset tracking, computer\nvision, machine learning, and other challenging domains. We're excited to see\nwhat our community builds with the newly-supported functionality and eagerly\nawaiting your feedback!"),(0,o.kt)("h3",{id:"geospatial-support-via-geohashes"},"Geospatial support via geohashes"),(0,o.kt)("p",null,"A ",(0,o.kt)("strong",{parentName:"p"},"geohash")," is a convenient way of expressing a location using a short\nalphanumeric string, with greater precision obtained with longer strings. The\nbasic idea is that the Earth is divided into grids of defined size, and each\narea is assigned a unique id called its Geohash."),(0,o.kt)("p",null,"For a given location on Earth, we can convert latitude and longitude as the\napproximate center point of a grid represented by a geohash string. This string\nis the Geohash and will determine which of the predefined regions the point\nbelongs to."),(0,o.kt)(r.Z,{alt:"An illustration showing two maps with different geohash precision levels applied",height:598,src:"/img/blog/2021-09-13/geohashes.png",width:850,mdxType:"Screenshot"}),(0,o.kt)("p",null,"To assist with geospatial queries, a new ",(0,o.kt)("inlineCode",{parentName:"p"},"geohash")," type has been added to\nQuestDB which allows storing and querying spatial data. The syntax follows the\nformat ",(0,o.kt)("inlineCode",{parentName:"p"},"geohash(<precision>)"),". The following examples show how to create tables\nwith geohash types and to make basic queries by geohash:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="Geohash overview"',title:'"Geohash','overview"':!0},"-- Create two geohash columns with different precision\nCREATE TABLE geo_data (g5c geohash(5c), g29b geohash(29b));\n-- Inserting geohash literals\nINSERT INTO geo_data VALUES(#u33d8, ##10101111100101111111101101101)\n-- Querying by geohash\nSELECT * FROM geo_data WHERE g5c = #u33d8;\n")),(0,o.kt)("p",null,"To help with geospatial queries, a ",(0,o.kt)("inlineCode",{parentName:"p"},"within")," operator has been added which helps\nevaluate if a geohash is equal to or is within a larger grid. The following\nquery will return the most recent entries by device ID if the ",(0,o.kt)("inlineCode",{parentName:"p"},"g8c")," column\ncontains a geohash within ",(0,o.kt)("inlineCode",{parentName:"p"},"u33d"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="within operator"',title:'"within','operator"':!0},"SELECT * FROM geo_data LATEST BY device_id\nWHERE g8c within(#u33d);\n")),(0,o.kt)("p",null,"Geohashes can be used in SQL via PostgreSQL and HTTP with geohash literals and\nstring to geohash conversion and with some special handling over InfluxDB Line\nProtocol. For full details of supported features and functionality including\nadvanced usage, see the ",(0,o.kt)("a",{parentName:"p",href:"/docs/concept/geohashes"},"geohash documentation"),"."),(0,o.kt)("h3",{id:"first-and-last-functions"},"first() and last() functions"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"first()")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"last()"),' functions have had significant internal performance\nimprovements with the latest release. Improving the efficiency of these\nfunctions has the benefit that geospatial queries are significantly faster. The\nmost common types of queries which are likely to benefit from this improvement\nare those such as "last-known location" of a device or vessel:'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="last() example"',title:'"last()','example"':!0},"SELECT ts, last(g8c) FROM geo_data\nWHERE device_id = 'device_3';\n")),(0,o.kt)("h3",{id:"timestamp-floor-and-ceiling-functions"},"Timestamp floor and ceiling functions"),(0,o.kt)("p",null,"To aid with rounding timestamp values, it's now possible to use\n",(0,o.kt)("inlineCode",{parentName:"p"},"timestamp_floo()")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"timestamp_ceil()")," functions to round up or down by a\nunit of choice:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-questdb-sql"},"WITH t AS (SELECT cast('2016-02-10T16:18:22.862145Z' AS timestamp) ts)\nSELECT\n  ts,\n  -- floor\n  timestamp_floor('T', ts) f_milli,\n  timestamp_floor('s', ts) f_second,\n  timestamp_floor('m', ts) f_minute,\n  -- ceiling\n  timestamp_ceil('h', ts) c_hour,\n  timestamp_ceil('d', ts) c_day,\n  timestamp_ceil('M', ts) c_month\nFROM t\n")),(0,o.kt)("p",null,"For more details on using these functions and reference documentation for the\ntypes of units that can be passed, see the\n",(0,o.kt)("a",{parentName:"p",href:"/docs/reference/function/date-time#timestamp_ceil"},"date and time functions documentation"),"."),(0,o.kt)("h3",{id:"out-of-order-parameters-via-rest-api"},"Out-of-order parameters via REST API"),(0,o.kt)("p",null,"It's now possible to pass parameters relating to out-of-order ingestion via REST\nAPI. The ",(0,o.kt)("inlineCode",{parentName:"p"},"/imp")," endpoint accepts the ",(0,o.kt)("inlineCode",{parentName:"p"},"commitLag")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"maxUncommittedRows")," query\nparameters on partitioned tables. For more information on the meaning and usage\nof these parameters, see the\n",(0,o.kt)("a",{parentName:"p",href:"/docs/guides/out-of-order-commit-lag"},"out-of-order ingestion")," documentation."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Out-of-order params via REST API"',title:'"Out-of-order',params:!0,via:!0,REST:!0,'API"':!0},"curl -F data=@weather.csv \\\n'http://localhost:9000/imp?timestamp=ts&partitionBy=DAY&commitLag=120000000&maxUncommittedRows=10000'\n")),(0,o.kt)("h2",{id:"run-questdb-605"},"Run QuestDB 6.0.5"),(0,o.kt)("p",null,"The release notes including a changelog is\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/questdb/questdb/releases/tag/6.0.5"},"available on GitHub")," and\nthis version has been published to\n",(0,o.kt)("a",{parentName:"p",href:"https://hub.docker.com/r/questdb/questdb/tags?page=1&ordering=last_updated"},"Docker Hub"),".\nTo pull the ",(0,o.kt)("inlineCode",{parentName:"p"},"6.0.5")," tag and start up QuestDB, use ",(0,o.kt)("inlineCode",{parentName:"p"},"docker run"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -p 9000:9000 -p 8812:8812 -p 9009:9009 \\\n  questdb/questdb:6.0.5\n")),(0,o.kt)("h2",{id:"next-up"},"Next up"),(0,o.kt)("p",null,"We have been tracking the most active\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/questdb/questdb/discussions"},"GitHub discussions"),", and we are\nkeeping a keen eye on the features and fixes that are most popular to our\ncommunity. We are picking up the most upvoted and active topics in our GitHub\nDiscussions and the feature requests in GitHub issues. If there's a feature\nyou'd love to see, open a discussion on the topic or share your support if a\nthread for it exists already!"),(0,o.kt)("p",null,"We're eagerly awaiting feedback on this release, so feel free to reach out and\ntell us how this version is running. Let us know how we're doing or just come by\nand say hello ",(0,o.kt)("a",{parentName:"p",href:"https://"},"in our Slack Community")," or browse the repository\n",(0,o.kt)("a",{parentName:"p",href:"https://"},"on GitHub"),"."))}c.isMDXComponent=!0},86010:function(e,t,n){function a(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(i&&(i+=" "),i+=t);return i}n.d(t,{Z:function(){return i}})}}]);