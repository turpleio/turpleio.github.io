"use strict";(self.webpackChunkquestdb_io=self.webpackChunkquestdb_io||[]).push([[4212],{3905:function(e,I,t){t.d(I,{Zo:function(){return C},kt:function(){return c}});var g=t(7294);function i(e,I,t){return I in e?Object.defineProperty(e,I,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[I]=t,e}function n(e,I){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);I&&(g=g.filter((function(I){return Object.getOwnPropertyDescriptor(e,I).enumerable}))),t.push.apply(t,g)}return t}function a(e){for(var I=1;I<arguments.length;I++){var t=null!=arguments[I]?arguments[I]:{};I%2?n(Object(t),!0).forEach((function(I){i(e,I,t[I])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(I){Object.defineProperty(e,I,Object.getOwnPropertyDescriptor(t,I))}))}return e}function r(e,I){if(null==e)return{};var t,g,i=function(e,I){if(null==e)return{};var t,g,i={},n=Object.keys(e);for(g=0;g<n.length;g++)t=n[g],I.indexOf(t)>=0||(i[t]=e[t]);return i}(e,I);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(g=0;g<n.length;g++)t=n[g],I.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var A=g.createContext({}),o=function(e){var I=g.useContext(A),t=I;return e&&(t="function"==typeof e?e(I):a(a({},I),e)),t},C=function(e){var I=o(e.components);return g.createElement(A.Provider,{value:I},e.children)},l={inlineCode:"code",wrapper:function(e){var I=e.children;return g.createElement(g.Fragment,{},I)}},s=g.forwardRef((function(e,I){var t=e.components,i=e.mdxType,n=e.originalType,A=e.parentName,C=r(e,["components","mdxType","originalType","parentName"]),s=o(t),c=i,p=s["".concat(A,".").concat(c)]||s[c]||l[c]||n;return t?g.createElement(p,a(a({ref:I},C),{},{components:t})):g.createElement(p,a({ref:I},C))}));function c(e,I){var t=arguments,i=I&&I.mdxType;if("string"==typeof e||i){var n=t.length,a=new Array(n);a[0]=s;var r={};for(var A in I)hasOwnProperty.call(I,A)&&(r[A]=I[A]);r.originalType=e,r.mdxType="string"==typeof e?e:i,a[1]=r;for(var o=2;o<n;o++)a[o]=t[o];return g.createElement.apply(null,a)}return g.createElement.apply(null,t)}s.displayName="MDXCreateElement"},362:function(e,I,t){t.r(I),t.d(I,{frontMatter:function(){return r},metadata:function(){return A},toc:function(){return o},default:function(){return l}});var g=t(3117),i=t(102),n=(t(7294),t(3905)),a=["components"],r={title:"ALTER TABLE DROP PARTITION",sidebar_label:"DROP PARTITION",description:"DROP PARTITION SQL keyword reference documentation."},A={unversionedId:"reference/sql/alter-table-drop-partition",id:"reference/sql/alter-table-drop-partition",isDocsHomePage:!1,title:"ALTER TABLE DROP PARTITION",description:"DROP PARTITION SQL keyword reference documentation.",source:"@site/docs/reference/sql/alter-table-drop-partition.md",sourceDirName:"reference/sql",slug:"/reference/sql/alter-table-drop-partition",permalink:"/docs/reference/sql/alter-table-drop-partition",editUrl:"https://github.com/turpleio/homepage/edit/main/docs/reference/sql/alter-table-drop-partition.md",version:"current",sidebar_label:"DROP PARTITION",frontMatter:{title:"ALTER TABLE DROP PARTITION",sidebar_label:"DROP PARTITION",description:"DROP PARTITION SQL keyword reference documentation."},sidebar:"docs",previous:{title:"ALTER TABLE DETACH PARTITION",permalink:"/docs/reference/sql/alter-table-detach-partition"},next:{title:"ALTER TABLE SET PARAM",permalink:"/docs/reference/sql/alter-table-set-param"}},o=[{value:"Syntax",id:"syntax",children:[]},{value:"Drop partition by name",id:"drop-partition-by-name",children:[{value:"Examples",id:"examples",children:[]}]},{value:"Drop partitions using boolean expression",id:"drop-partitions-using-boolean-expression",children:[{value:"Examples",id:"examples-1",children:[]}]}],C={toc:o};function l(e){var I=e.components,r=(0,i.Z)(e,a);return(0,n.kt)("wrapper",(0,g.Z)({},C,r,{components:I,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Drops one or more partitions from an existing table."),(0,n.kt)("p",null,"Similar to dropping columns, dropping of partitions is a non-blocking and\nnon-waiting operation. While atomic for single partitions, dropping multiple\npartitions is in itself non-atomic. The operation will exit on the first failure\nand will not continue through a list of partitions if one fails to be dropped."),(0,n.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,n.kt)("div",{parentName:"div",className:"admonition-heading"},(0,n.kt)("h5",{parentName:"div"},(0,n.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,n.kt)("div",{parentName:"div",className:"admonition-content"},(0,n.kt)("p",{parentName:"div"},"Use ",(0,n.kt)("inlineCode",{parentName:"p"},"DROP PARTITION")," with care as QuestDB ",(0,n.kt)("strong",{parentName:"p"},"cannot recover data from dropped\npartitions"),"!"))),(0,n.kt)("h2",{id:"syntax"},"Syntax"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Flow chart showing the syntax of the ALTER TABLE keyword",src:t(4118).Z}),"\n",(0,n.kt)("img",{alt:"Flow chart showing the syntax of ALTER TABLE with DROP PARTITION keyword",src:t(2520).Z})),(0,n.kt)("h2",{id:"drop-partition-by-name"},"Drop partition by name"),(0,n.kt)("p",null,"The partition name must match the name of the directory for the given partition.\nThe naming convention is detailed in ",(0,n.kt)("a",{parentName:"p",href:"docs/concept/partitions"},"Partitions"),"."),(0,n.kt)("h3",{id:"examples"},"Examples"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="Drop a single partition"',title:'"Drop',a:!0,single:!0,'partition"':!0},"--DAY\nALTER TABLE measurements DROP PARTITION LIST '2019-05-18';\n--MONTH\nALTER TABLE measurements DROP PARTITION LIST '2019-05';\n--YEAR\nALTER TABLE measurements DROP PARTITION LIST '2019';\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="Drop multiple partitions"',title:'"Drop',multiple:!0,'partitions"':!0},"ALTER TABLE measurements DROP PARTITION LIST '2018','2019';\n")),(0,n.kt)("h2",{id:"drop-partitions-using-boolean-expression"},"Drop partitions using boolean expression"),(0,n.kt)("p",null,"Drops partitions based on a boolean expression on the designated timestamp\ncolumn."),(0,n.kt)("h3",{id:"examples-1"},"Examples"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="Drop one partition"',title:'"Drop',one:!0,'partition"':!0},"ALTER TABLE measurements\nDROP PARTITION\nWHERE timestamp = to_timestamp('2019-01-01:00:00:00', 'yyyy-MM-dd:HH:mm:ss');\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-questdb-sql",metastring:'title="Drop all partitions older than 2018"',title:'"Drop',all:!0,partitions:!0,older:!0,than:!0,'2018"':!0},"ALTER TABLE measurements\nDROP PARTITION\nWHERE timestamp < to_timestamp('2018-01-01:00:00:00', 'yyyy-MM-dd:HH:mm:ss');\n")))}l.isMDXComponent=!0},2520:function(e,I){I.Z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0ODAiIGhlaWdodD0iODEiPgogICAgPGRlZnM+CiAgICAgICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KICAgICAgICAgICAgQG5hbWVzcGFjZSAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciOwogICAgICAgICAgICAgICAgLmxpbmUgICAgICAgICAgICAgICAgIHtmaWxsOiBub25lOyBzdHJva2U6ICM2MzYyNzM7fQogICAgICAgICAgICAgICAgLmJvbGQtbGluZSAgICAgICAgICAgIHtzdHJva2U6ICM2MzYyNzM7IHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlczsgc3Ryb2tlLXdpZHRoOiAyOyB9CiAgICAgICAgICAgICAgICAudGhpbi1saW5lICAgICAgICAgICAge3N0cm9rZTogIzYzNjI3Mzsgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcEVkZ2VzfQogICAgICAgICAgICAgICAgLmZpbGxlZCAgICAgICAgICAgICAgIHtmaWxsOiAjNjM2MjczOyBzdHJva2U6IG5vbmU7fQogICAgICAgICAgICAgICAgdGV4dC50ZXJtaW5hbCAgICAgICAgIHtmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBSb2JvdG8sIFVidW50dSwgQ2FudGFyZWxsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgICAgICBmaWxsOiAjZmZmZmZmOwogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0ZXh0Lm5vbnRlcm1pbmFsICAgICAge2ZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICJTZWdvZSBVSSIsIFJvYm90bywgVWJ1bnR1LCBDYW50YXJlbGwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgICAgIGZpbGw6ICNlMjg5YTQ7CiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGV4dC5yZWdleHAgICAgICAgICAgIHtmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBSb2JvdG8sIFVidW50dSwgQ2FudGFyZWxsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgICAgICBmaWxsOiAjMDAxNDFGOwogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlY3QsIGNpcmNsZSwgcG9seWdvbiB7ZmlsbDogbm9uZTsgc3Ryb2tlOiBub25lO30KICAgICAgICAgICAgICAgIHJlY3QudGVybWluYWwgICAgICAgICB7ZmlsbDogbm9uZTsgc3Ryb2tlOiAjYmUyZjViO30KICAgICAgICAgICAgICAgIHJlY3Qubm9udGVybWluYWwgICAgICB7ZmlsbDogcmdiYSgyNTUsMjU1LDI1NSwwLjEpOyBzdHJva2U6IG5vbmU7fQogICAgICAgICAgICAgICAgcmVjdC50ZXh0ICAgICAgICAgICAgIHtmaWxsOiBub25lOyBzdHJva2U6IG5vbmU7fQogICAgICAgICAgICAgICAgcG9seWdvbi5yZWdleHAgICAgICAgIHtmaWxsOiAjQzdFQ0ZGOyBzdHJva2U6ICMwMzhjYmM7fQogICAgICAgIDwvc3R5bGU+CiAgICA8L2RlZnM+CiAgICA8cG9seWdvbiBwb2ludHM9IjkgNjEgMSA1NyAxIDY1Ii8+CiAgICAgICAgIDxwb2x5Z29uIHBvaW50cz0iMTcgNjEgOSA1NyA5IDY1Ii8+CiAgICAgICAgIDxyZWN0IHg9IjMxIiB5PSI0NyIgd2lkdGg9IjU4IiBoZWlnaHQ9IjMyIiByeD0iMTAiLz4KICAgICAgICAgPHJlY3QgeD0iMjkiIHk9IjQ1IiB3aWR0aD0iNTgiIGhlaWdodD0iMzIiIGNsYXNzPSJ0ZXJtaW5hbCIgcng9IjEwIi8+CiAgICAgICAgIDx0ZXh0IGNsYXNzPSJ0ZXJtaW5hbCIgeD0iMzkiIHk9IjY1Ij5EUk9QPC90ZXh0PgogICAgICAgICA8cmVjdCB4PSIxMDkiIHk9IjQ3IiB3aWR0aD0iOTgiIGhlaWdodD0iMzIiIHJ4PSIxMCIvPgogICAgICAgICA8cmVjdCB4PSIxMDciIHk9IjQ1IiB3aWR0aD0iOTgiIGhlaWdodD0iMzIiIGNsYXNzPSJ0ZXJtaW5hbCIgcng9IjEwIi8+CiAgICAgICAgIDx0ZXh0IGNsYXNzPSJ0ZXJtaW5hbCIgeD0iMTE3IiB5PSI2NSI+UEFSVElUSU9OPC90ZXh0PgogICAgICAgICA8cmVjdCB4PSIyMjciIHk9IjQ3IiB3aWR0aD0iNTIiIGhlaWdodD0iMzIiIHJ4PSIxMCIvPgogICAgICAgICA8cmVjdCB4PSIyMjUiIHk9IjQ1IiB3aWR0aD0iNTIiIGhlaWdodD0iMzIiIGNsYXNzPSJ0ZXJtaW5hbCIgcng9IjEwIi8+CiAgICAgICAgIDx0ZXh0IGNsYXNzPSJ0ZXJtaW5hbCIgeD0iMjM1IiB5PSI2NSI+TElTVDwvdGV4dD48YSB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeGxpbms6aHJlZj0iI3BhcnRpdGlvbk5hbWUiIHhsaW5rOnRpdGxlPSJwYXJ0aXRpb25OYW1lIj4KICAgICAgICAgICAgPHJlY3QgeD0iMzE5IiB5PSI0NyIgd2lkdGg9IjExMCIgaGVpZ2h0PSIzMiIvPgogICAgICAgICAgICA8cmVjdCB4PSIzMTciIHk9IjQ1IiB3aWR0aD0iMTEwIiBoZWlnaHQ9IjMyIiBjbGFzcz0ibm9udGVybWluYWwiLz4KICAgICAgICAgICAgPHRleHQgY2xhc3M9Im5vbnRlcm1pbmFsIiB4PSIzMjciIHk9IjY1Ij5wYXJ0aXRpb25OYW1lPC90ZXh0PjwvYT48cmVjdCB4PSIzMTkiIHk9IjMiIHdpZHRoPSIyNCIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICAgICAgIDxyZWN0IHg9IjMxNyIgeT0iMSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjMyIiBjbGFzcz0idGVybWluYWwiIHJ4PSIxMCIvPgogICAgICAgICA8dGV4dCBjbGFzcz0idGVybWluYWwiIHg9IjMyNyIgeT0iMjEiPiw8L3RleHQ+CiAgICAgICAgIDxzdmc6cGF0aCB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0ibGluZSIgZD0ibTE3IDYxIGgyIG0wIDAgaDEwIG01OCAwIGgxMCBtMCAwIGgxMCBtOTggMCBoMTAgbTAgMCBoMTAgbTUyIDAgaDEwIG0yMCAwIGgxMCBtMTEwIDAgaDEwIG0tMTUwIDAgbDIwIDAgbS0xIDAgcS05IDAgLTkgLTEwIGwwIC0yNCBxMCAtMTAgMTAgLTEwIG0xMzAgNDQgbDIwIDAgbS0yMCAwIHExMCAwIDEwIC0xMCBsMCAtMjQgcTAgLTEwIC0xMCAtMTAgbS0xMzAgMCBoMTAgbTI0IDAgaDEwIG0wIDAgaDg2IG0yMyA0NCBoLTMiLz4KICAgICAgICAgPHBvbHlnb24gcG9pbnRzPSI0NjcgNjEgNDc1IDU3IDQ3NSA2NSIvPgogICAgICAgICA8cG9seWdvbiBwb2ludHM9IjQ2NyA2MSA0NTkgNTcgNDU5IDY1Ii8+PC9zdmc+Cg=="}}]);