"use strict";(self.webpackChunkquestdb_io=self.webpackChunkquestdb_io||[]).push([[2687],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=p(n),d=a,g=m["".concat(s,".").concat(d)]||m[d]||c[d]||r;return n?o.createElement(g,i(i({ref:t},u),{},{components:n})):o.createElement(g,i({ref:t},u))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<r;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7262:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u},default:function(){return m}});var o=n(3117),a=n(102),r=(n(7294),n(3905)),i=n(2525),l=["components"],s={title:"Google Cloud Platform",description:"This document describes how to deploy QuestDB on Google Cloud platform using a Compute Engine VM with additional details on configuring networking rules"},p={unversionedId:"deployment/google-cloud-platform",id:"deployment/google-cloud-platform",isDocsHomePage:!1,title:"Google Cloud Platform",description:"This document describes how to deploy QuestDB on Google Cloud platform using a Compute Engine VM with additional details on configuring networking rules",source:"@site/docs/deployment/google-cloud-platform.md",sourceDirName:"deployment",slug:"/deployment/google-cloud-platform",permalink:"/docs/deployment/google-cloud-platform",editUrl:"https://github.com/turpleio/homepage/edit/main/docs/deployment/google-cloud-platform.md",version:"current",frontMatter:{title:"Google Cloud Platform",description:"This document describes how to deploy QuestDB on Google Cloud platform using a Compute Engine VM with additional details on configuring networking rules"},sidebar:"docs",previous:{title:"Run QuestDB on Kubernetes",permalink:"/docs/deployment/kubernetes"},next:{title:"Launch QuestDB on DigitalOcean",permalink:"/docs/deployment/digitalocean"}},u=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Create a Compute Engine VM",id:"create-a-compute-engine-vm",children:[]},{value:"Create a firewall rule",id:"create-a-firewall-rule",children:[]},{value:"Verify the deployment",id:"verify-the-deployment",children:[]}],c={toc:u};function m(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This guide describes how to run QuestDB on a Compute Engine instance on Google\nCloud platform with details on how to enable networking on various interfaces by\nmeans of firewall rules."),(0,r.kt)("p",null,"This guide uses the official QuestDB Docker image during VM instance creation to\nsimplify setup steps for a quick, robust deployment. The networking rules below\nshow how to make ports for PostgreSQL wire protocol and REST API publicly\naccessible or by whitelisted IP."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("a",{parentName:"li",href:"https://console.cloud.google.com/getting-started"},"Google Cloud Platform"),"\n(GCP) account and a GCP Project"),(0,r.kt)("li",{parentName:"ul"},"The\n",(0,r.kt)("a",{parentName:"li",href:"https://console.cloud.google.com/apis/api/compute.googleapis.com"},"Compute Engine API"),"\nmust be enabled for the corresponding Google Cloud Platform project")),(0,r.kt)("h2",{id:"create-a-compute-engine-vm"},"Create a Compute Engine VM"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"In the Google Cloud Console, navigate to\n",(0,r.kt)("a",{parentName:"li",href:"https://console.cloud.google.com/compute/instances"},"Compute Engine")," and\nclick ",(0,r.kt)("strong",{parentName:"li"},"Create Instance"))),(0,r.kt)(i.Z,{alt:"The Create Instance wizard on Google Cloud platform",height:598,src:"/img/guides/google-cloud-platform/create-instance.png",width:650,mdxType:"Screenshot"}),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Give the instance a name, this example uses ",(0,r.kt)("inlineCode",{parentName:"p"},"questdb-europe-west3"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Choose a ",(0,r.kt)("strong",{parentName:"p"},"Region")," and ",(0,r.kt)("strong",{parentName:"p"},"Zone"),", this example uses\n",(0,r.kt)("inlineCode",{parentName:"p"},"europe-west3 (Frankfurt)")," and the default zone")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Choose a machine configuration, a general-purpose instance is ",(0,r.kt)("inlineCode",{parentName:"p"},"e2-medium"),"\nwith 4GB memory")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Enable the checkbox under ",(0,r.kt)("strong",{parentName:"p"},"Container")," and provide the latest QuestDB Docker\nimage:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-text"},"questdb/questdb:latest\n")))),(0,r.kt)("p",null,"Given the steps so far, the VM Instance configuration page should look like the\nfollowing:"),(0,r.kt)(i.Z,{alt:"Deploying a QuestDB instance via Docker on Google Cloud Platform Compute Engine",height:695,src:"/img/guides/google-cloud-platform/create-vm.png",width:650,mdxType:"Screenshot"}),(0,r.kt)("p",null,"Before creating the instance, assign a ",(0,r.kt)("strong",{parentName:"p"},"Network tag")," so that a firewall rule\nfor networking can be easily applied to instances of the same type."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Expand the menu item ",(0,r.kt)("strong",{parentName:"li"},"Management, security, disks, networking, sole\ntenancy")," towards the bottom of the page"),(0,r.kt)("li",{parentName:"ol"},"In the ",(0,r.kt)("strong",{parentName:"li"},"Networking")," panel add a ",(0,r.kt)("strong",{parentName:"li"},"Network tag")," to identify the instance,\nthis example uses ",(0,r.kt)("inlineCode",{parentName:"li"},"questdb")),(0,r.kt)("li",{parentName:"ol"},"Launch the instance by clicking ",(0,r.kt)("strong",{parentName:"li"},"Create"))),(0,r.kt)(i.Z,{alt:"Applying a Network tag to a Compute Engine VM Instance on Google Cloud Platform",height:610,src:"/img/guides/google-cloud-platform/add-network-tag.png",width:650,mdxType:"Screenshot"}),(0,r.kt)("h2",{id:"create-a-firewall-rule"},"Create a firewall rule"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Navigate to the\n",(0,r.kt)("a",{parentName:"li",href:"https://console.cloud.google.com/networking/firewalls"},"Firewalls configuration"),"\npage under ",(0,r.kt)("strong",{parentName:"li"},"VPC network")," -> ",(0,r.kt)("strong",{parentName:"li"},"Firewalls")),(0,r.kt)("li",{parentName:"ol"},"Add the target tag ",(0,r.kt)("inlineCode",{parentName:"li"},"questdb")),(0,r.kt)("li",{parentName:"ol"},"Choose an IP range that this rule applies to, this example uses ",(0,r.kt)("inlineCode",{parentName:"li"},"0.0.0.0/0"),"\n(i.e. any IP)"),(0,r.kt)("li",{parentName:"ol"},"In the ",(0,r.kt)("strong",{parentName:"li"},"Protocols and ports")," section, enable ",(0,r.kt)("inlineCode",{parentName:"li"},"8812")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"9000")," for TCP."),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"create"))),(0,r.kt)(i.Z,{alt:"Creating a firewall rule in for VPC networking on Google Cloud Platform",height:654,src:"/img/guides/google-cloud-platform/firewall-rules.png",width:650,mdxType:"Screenshot"}),(0,r.kt)("p",null,"All VM instances on Compute Engine within this account which have the ",(0,r.kt)("strong",{parentName:"p"},"Network\ntag")," ",(0,r.kt)("inlineCode",{parentName:"p"},"questdb")," will have this firewall rule applied."),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The configuration above allows networking from any IP address for the selected\nports. A more secure approach would be to only allow incoming connections from\nwhitelisted IPs."),(0,r.kt)("p",{parentName:"div"},"The ports we have opened are"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"9000")," for the REST API and Web Console"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"8812")," for PostgreSQL wire protocol")))),(0,r.kt)("h2",{id:"verify-the-deployment"},"Verify the deployment"),(0,r.kt)("p",null,"To verify the instance state, navigate to ",(0,r.kt)("strong",{parentName:"p"},"Compute Engine")," ->\n",(0,r.kt)("a",{parentName:"p",href:"https://console.cloud.google.com/compute/instances"},"VM Instances"),". A status\nindicator should show the instance as ",(0,r.kt)("strong",{parentName:"p"},"running"),":"),(0,r.kt)(i.Z,{alt:"A QuestDB instance running on Google Cloud Platform showing a success status indicator",height:186,src:"/img/guides/google-cloud-platform/instance-available.png",width:650,mdxType:"Screenshot"}),(0,r.kt)("p",null,"To verify that the QuestDB deployment is operating as expected:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Copy the ",(0,r.kt)("strong",{parentName:"li"},"External IP")," of the instance"),(0,r.kt)("li",{parentName:"ol"},"Navigate to ",(0,r.kt)("inlineCode",{parentName:"li"},"<external_ip>:9000")," in a browser")),(0,r.kt)("p",null,"The Web Console should be visible:"),(0,r.kt)(i.Z,{alt:"The QuestDB Web Console running on a VM instance on Google Cloud Platform",height:405,src:"/img/guides/google-cloud-platform/gcp-portal.png",width:650,mdxType:"Screenshot"}),(0,r.kt)("p",null,"Alternatively, a request may be sent against the REST API exposed on port 9000:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -G \\\n  --data-urlencode "query=SELECT * FROM telemetry_config" \\\n  <external_ip>:9000/exec\n')))}m.isMDXComponent=!0},6010:function(e,t,n){function o(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=o(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=o(e))&&(a&&(a+=" "),a+=t);return a}n.d(t,{Z:function(){return a}})}}]);